{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nvar _excluded = [\"action\", \"onItemClick\"],\n    _excluded2 = [\"Component\", \"title\", \"action\", \"autoClose\", \"mode\"],\n    _excluded3 = [\"actions\", \"actionsLayout\", \"children\", \"className\", \"style\", \"text\", \"header\", \"onClose\", \"dismissLabel\"];\nimport * as React from 'react';\nimport { Tappable } from '../Tappable/Tappable';\nimport { PopoutWrapper } from '../PopoutWrapper/PopoutWrapper';\nimport { classNames, hasReactNode } from '@vkontakte/vkjs';\nimport { Platform } from '../../lib/platform';\nimport { Button } from '../Button/Button';\nimport { stopPropagation } from '../../lib/utils';\nimport { Title } from '../Typography/Title/Title';\nimport { Caption } from '../Typography/Caption/Caption';\nimport { Footnote } from '../Typography/Footnote/Footnote';\nimport { Text } from '../Typography/Text/Text';\nimport { ModalDismissButton } from '../ModalDismissButton/ModalDismissButton';\nimport { FocusTrap } from '../FocusTrap/FocusTrap';\nimport { useScrollLock } from '../AppRoot/ScrollContext';\nimport { useWaitTransitionFinish } from '../../hooks/useWaitTransitionFinish';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useAdaptivityWithJSMediaQueries } from '../../hooks/useAdaptivityWithJSMediaQueries';\n\nvar AlertHeader = function AlertHeader(props) {\n  var platform = usePlatform();\n\n  switch (platform) {\n    case Platform.IOS:\n      return /*#__PURE__*/React.createElement(Title, _extends({\n        className: \"vkuiAlert__header\",\n        weight: \"1\",\n        level: \"3\"\n      }, props));\n\n    default:\n      return /*#__PURE__*/React.createElement(Title, _extends({\n        className: \"vkuiAlert__header\",\n        weight: \"2\",\n        level: \"2\"\n      }, props));\n  }\n};\n\nvar AlertText = function AlertText(props) {\n  var platform = usePlatform();\n\n  switch (platform) {\n    case Platform.VKCOM:\n      return /*#__PURE__*/React.createElement(Footnote, _extends({\n        className: \"vkuiAlert__text\"\n      }, props));\n\n    case Platform.IOS:\n      return /*#__PURE__*/React.createElement(Caption, _extends({\n        className: \"vkuiAlert__text\"\n      }, props));\n\n    default:\n      return /*#__PURE__*/React.createElement(Text, _extends({\n        Component: \"span\",\n        className: \"vkuiAlert__text\",\n        weight: \"3\"\n      }, props));\n  }\n};\n\nvar AlertAction = function AlertAction(_ref) {\n  var action = _ref.action,\n      onItemClick = _ref.onItemClick,\n      restProps = _objectWithoutProperties(_ref, _excluded);\n\n  var platform = usePlatform();\n  var handleItemClick = React.useCallback(function () {\n    return onItemClick(action);\n  }, [onItemClick, action]);\n\n  if (platform === Platform.IOS) {\n    var _action$Component = action.Component,\n        Component = _action$Component === void 0 ? 'button' : _action$Component,\n        title = action.title,\n        actionProp = action.action,\n        autoClose = action.autoClose,\n        _mode = action.mode,\n        restActionProps = _objectWithoutProperties(action, _excluded2);\n\n    return /*#__PURE__*/React.createElement(Tappable, _extends({\n      Component: restActionProps.href ? 'a' : Component,\n      className: classNames(\"vkuiAlert__action\", styles[\"Alert__action--mode-\".concat(_mode)]),\n      onClick: handleItemClick\n    }, restActionProps, restProps), title);\n  }\n\n  var mode = 'tertiary';\n\n  if (platform === Platform.VKCOM) {\n    mode = action.mode === 'cancel' ? 'secondary' : 'primary';\n  }\n\n  return /*#__PURE__*/React.createElement(Button, {\n    className: classNames(\"vkuiAlert__button\", styles[\"Alert__button--mode-\".concat(action.mode)]),\n    mode: mode,\n    size: \"m\",\n    onClick: handleItemClick,\n    Component: action.Component,\n    href: action.href,\n    target: action.target\n  }, action.title);\n};\n/**\n * @see https://vkcom.github.io/VKUI/#/Alert\n */\n\n\nexport var Alert = function Alert(_ref2) {\n  var _ref2$actions = _ref2.actions,\n      actions = _ref2$actions === void 0 ? [] : _ref2$actions,\n      _ref2$actionsLayout = _ref2.actionsLayout,\n      actionsLayout = _ref2$actionsLayout === void 0 ? 'horizontal' : _ref2$actionsLayout,\n      children = _ref2.children,\n      className = _ref2.className,\n      style = _ref2.style,\n      text = _ref2.text,\n      header = _ref2.header,\n      onClose = _ref2.onClose,\n      _ref2$dismissLabel = _ref2.dismissLabel,\n      dismissLabel = _ref2$dismissLabel === void 0 ? 'Закрыть предупреждение' : _ref2$dismissLabel,\n      restProps = _objectWithoutProperties(_ref2, _excluded3);\n\n  var platform = usePlatform();\n\n  var _useAdaptivityWithJSM = useAdaptivityWithJSMediaQueries(),\n      isDesktop = _useAdaptivityWithJSM.isDesktop;\n\n  var _useWaitTransitionFin = useWaitTransitionFinish(),\n      waitTransitionFinish = _useWaitTransitionFin.waitTransitionFinish;\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      closing = _React$useState2[0],\n      setClosing = _React$useState2[1];\n\n  var elementRef = React.useRef(null);\n  var resolvedActionsLayout = platform === Platform.VKCOM ? 'horizontal' : actionsLayout;\n  var timeout = platform === Platform.IOS ? 300 : 200;\n  var close = React.useCallback(function () {\n    setClosing(true);\n    waitTransitionFinish(elementRef.current, function (e) {\n      if (!e || e.propertyName === 'opacity') {\n        onClose();\n      }\n    }, timeout);\n  }, [elementRef, waitTransitionFinish, onClose, timeout]);\n  var onItemClick = React.useCallback(function (item) {\n    var action = item.action,\n        autoClose = item.autoClose;\n\n    if (autoClose) {\n      setClosing(true);\n      waitTransitionFinish(elementRef.current, function (e) {\n        if (!e || e.propertyName === 'opacity') {\n          onClose();\n          action && action();\n        }\n      }, timeout);\n    } else {\n      action && action();\n    }\n  }, [elementRef, waitTransitionFinish, onClose, timeout]);\n  useScrollLock();\n  return /*#__PURE__*/React.createElement(PopoutWrapper, {\n    className: className,\n    closing: closing,\n    style: style,\n    onClick: close\n  }, /*#__PURE__*/React.createElement(FocusTrap, _extends({}, restProps, {\n    getRootRef: elementRef,\n    onClick: stopPropagation,\n    onClose: close,\n    timeout: timeout,\n    className: classNames(\"vkuiAlert\", platform === Platform.IOS && \"vkuiAlert--ios\", platform === Platform.VKCOM && \"vkuiAlert--vkcom\", resolvedActionsLayout === 'vertical' ? \"vkuiAlert--v\" : \"vkuiAlert--h\", closing && \"vkuiAlert--closing\", isDesktop && \"vkuiAlert--desktop\"),\n    role: \"alertdialog\",\n    \"aria-modal\": true,\n    \"aria-labelledby\": \"vkui--alert--title\",\n    \"aria-describedby\": \"vkui--alert--desc\"\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiAlert__content\"\n  }, hasReactNode(header) && /*#__PURE__*/React.createElement(AlertHeader, {\n    id: \"vkui--alert--title\"\n  }, header), hasReactNode(text) && /*#__PURE__*/React.createElement(AlertText, {\n    id: \"vkui--alert--desc\"\n  }, text), children), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiAlert__actions\"\n  }, actions.map(function (action, i) {\n    return /*#__PURE__*/React.createElement(AlertAction, {\n      key: i,\n      action: action,\n      onItemClick: onItemClick\n    });\n  })), isDesktop && /*#__PURE__*/React.createElement(ModalDismissButton, {\n    onClick: close,\n    \"aria-label\": dismissLabel\n  })));\n};\nvar styles = {\n  \"Alert__action--mode-cancel\": \"vkuiAlert__action--mode-cancel\",\n  \"Alert__action--mode-destructive\": \"vkuiAlert__action--mode-destructive\",\n  \"Alert__action--mode-default\": \"vkuiAlert__action--mode-default\",\n  \"Alert__button--mode-cancel\": \"vkuiAlert__button--mode-cancel\",\n  \"Alert__button--mode-default\": \"vkuiAlert__button--mode-default\",\n  \"Alert__button--mode-destructive\": \"vkuiAlert__button--mode-destructive\"\n};","map":{"version":3,"mappings":"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","names":["React","Tappable","PopoutWrapper","classNames","hasReactNode","Platform","Button","stopPropagation","Title","Caption","Footnote","Text","ModalDismissButton","FocusTrap","useScrollLock","useWaitTransitionFinish","usePlatform","useAdaptivityWithJSMediaQueries","AlertHeader","props","platform","IOS","_extends","className","weight","level","AlertText","VKCOM","Component","AlertAction","_ref","action","onItemClick","restProps","handleItemClick","useCallback","_action$Component","title","actionProp","autoClose","mode","restActionProps","_excluded2","href","styles","onClick","size","target","Alert","_ref2","actions","_ref2$actions","_ref2$actionsLayout","actionsLayout","children","style","text","header","onClose","_ref2$dismissLabel","dismissLabel","isDesktop","waitTransitionFinish","useState","_React$useState2","closing","setClosing","elementRef","useRef","resolvedActionsLayout","timeout","close","current","e","propertyName","item","getRootRef","role","id","map","i","key"],"sources":["/Users/pitus_anonimous/Desktop/youth_bit_hack/youth_bit_vk/node_modules/@vkontakte/vkui/src/components/Alert/Alert.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Tappable } from '../Tappable/Tappable';\nimport { PopoutWrapper } from '../PopoutWrapper/PopoutWrapper';\nimport { classNames, hasReactNode } from '@vkontakte/vkjs';\nimport { Platform } from '../../lib/platform';\nimport { Button, ButtonProps } from '../Button/Button';\nimport { stopPropagation } from '../../lib/utils';\nimport { Title } from '../Typography/Title/Title';\nimport { Caption } from '../Typography/Caption/Caption';\nimport { Footnote } from '../Typography/Footnote/Footnote';\nimport { Text } from '../Typography/Text/Text';\nimport { ModalDismissButton } from '../ModalDismissButton/ModalDismissButton';\nimport { FocusTrap } from '../FocusTrap/FocusTrap';\nimport { useScrollLock } from '../AppRoot/ScrollContext';\nimport { useWaitTransitionFinish } from '../../hooks/useWaitTransitionFinish';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useAdaptivityWithJSMediaQueries } from '../../hooks/useAdaptivityWithJSMediaQueries';\nimport { AnchorHTMLAttributesOnly } from '../../types';\nimport styles from './Alert.module.css';\n\nexport interface AlertActionInterface\n  extends Pick<ButtonProps, 'Component'>,\n    AnchorHTMLAttributesOnly {\n  title: string;\n  action?: VoidFunction;\n  autoClose?: boolean;\n  mode: 'cancel' | 'destructive' | 'default';\n}\n\nexport interface AlertProps extends React.HTMLAttributes<HTMLElement> {\n  actionsLayout?: 'vertical' | 'horizontal';\n  actions?: AlertActionInterface[];\n  header?: React.ReactNode;\n  text?: React.ReactNode;\n  onClose: VoidFunction;\n\n  /**\n   * `aria-label` для кнопки закрытия. Необходим, чтобы кнопка была доступной.\n   */\n  dismissLabel?: string;\n}\n\ntype ItemClickHandler = (item: AlertActionInterface) => void;\n\ninterface AlertTypography {\n  id: string;\n  children?: React.ReactNode;\n}\n\nconst AlertHeader = (props: AlertTypography) => {\n  const platform = usePlatform();\n\n  switch (platform) {\n    case Platform.IOS:\n      return <Title className={styles['Alert__header']} weight=\"1\" level=\"3\" {...props} />;\n    default:\n      return <Title className={styles['Alert__header']} weight=\"2\" level=\"2\" {...props} />;\n  }\n};\n\nconst AlertText = (props: AlertTypography) => {\n  const platform = usePlatform();\n\n  switch (platform) {\n    case Platform.VKCOM:\n      return <Footnote className={styles['Alert__text']} {...props} />;\n    case Platform.IOS:\n      return <Caption className={styles['Alert__text']} {...props} />;\n    default:\n      return <Text Component=\"span\" className={styles['Alert__text']} weight=\"3\" {...props} />;\n  }\n};\n\ninterface AlertActionProps {\n  action: AlertActionInterface;\n  onItemClick: ItemClickHandler;\n}\n\nconst AlertAction = ({ action, onItemClick, ...restProps }: AlertActionProps) => {\n  const platform = usePlatform();\n  const handleItemClick = React.useCallback(() => onItemClick(action), [onItemClick, action]);\n\n  if (platform === Platform.IOS) {\n    const {\n      Component = 'button',\n      title,\n      action: actionProp,\n      autoClose,\n      mode,\n      ...restActionProps\n    } = action;\n\n    return (\n      <Tappable\n        Component={restActionProps.href ? 'a' : Component}\n        className={classNames(styles['Alert__action'], styles[`Alert__action--mode-${mode}`])}\n        onClick={handleItemClick}\n        {...restActionProps}\n        {...restProps}\n      >\n        {title}\n      </Tappable>\n    );\n  }\n\n  let mode: ButtonProps['mode'] = 'tertiary';\n\n  if (platform === Platform.VKCOM) {\n    mode = action.mode === 'cancel' ? 'secondary' : 'primary';\n  }\n\n  return (\n    <Button\n      className={classNames(styles['Alert__button'], styles[`Alert__button--mode-${action.mode}`])}\n      mode={mode}\n      size=\"m\"\n      onClick={handleItemClick}\n      Component={action.Component}\n      href={action.href}\n      target={action.target}\n    >\n      {action.title}\n    </Button>\n  );\n};\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Alert\n */\nexport const Alert = ({\n  actions = [],\n  actionsLayout = 'horizontal',\n  children,\n  className,\n  style,\n  text,\n  header,\n  onClose,\n  dismissLabel = 'Закрыть предупреждение',\n  ...restProps\n}: AlertProps) => {\n  const platform = usePlatform();\n  const { isDesktop } = useAdaptivityWithJSMediaQueries();\n  const { waitTransitionFinish } = useWaitTransitionFinish();\n\n  const [closing, setClosing] = React.useState(false);\n\n  const elementRef = React.useRef<HTMLDivElement>(null);\n\n  const resolvedActionsLayout: AlertProps['actionsLayout'] =\n    platform === Platform.VKCOM ? 'horizontal' : actionsLayout;\n\n  const timeout = platform === Platform.IOS ? 300 : 200;\n\n  const close = React.useCallback(() => {\n    setClosing(true);\n    waitTransitionFinish(\n      elementRef.current,\n      (e?: TransitionEvent) => {\n        if (!e || e.propertyName === 'opacity') {\n          onClose();\n        }\n      },\n      timeout,\n    );\n  }, [elementRef, waitTransitionFinish, onClose, timeout]);\n\n  const onItemClick: ItemClickHandler = React.useCallback(\n    (item: AlertActionInterface) => {\n      const { action, autoClose } = item;\n\n      if (autoClose) {\n        setClosing(true);\n        waitTransitionFinish(\n          elementRef.current,\n          (e?: TransitionEvent) => {\n            if (!e || e.propertyName === 'opacity') {\n              onClose();\n              action && action();\n            }\n          },\n          timeout,\n        );\n      } else {\n        action && action();\n      }\n    },\n    [elementRef, waitTransitionFinish, onClose, timeout],\n  );\n\n  useScrollLock();\n\n  return (\n    <PopoutWrapper className={className} closing={closing} style={style} onClick={close}>\n      <FocusTrap\n        {...restProps}\n        getRootRef={elementRef}\n        onClick={stopPropagation}\n        onClose={close}\n        timeout={timeout}\n        className={classNames(\n          styles['Alert'],\n          platform === Platform.IOS && styles['Alert--ios'],\n          platform === Platform.VKCOM && styles['Alert--vkcom'],\n          resolvedActionsLayout === 'vertical' ? styles['Alert--v'] : styles['Alert--h'],\n          closing && styles['Alert--closing'],\n          isDesktop && styles['Alert--desktop'],\n        )}\n        role=\"alertdialog\"\n        aria-modal\n        aria-labelledby=\"vkui--alert--title\"\n        aria-describedby=\"vkui--alert--desc\"\n      >\n        <div className={styles['Alert__content']}>\n          {hasReactNode(header) && <AlertHeader id=\"vkui--alert--title\">{header}</AlertHeader>}\n          {hasReactNode(text) && <AlertText id=\"vkui--alert--desc\">{text}</AlertText>}\n          {children}\n        </div>\n        <div className={styles['Alert__actions']}>\n          {actions.map((action, i) => (\n            <AlertAction key={i} action={action} onItemClick={onItemClick} />\n          ))}\n        </div>\n        {isDesktop && <ModalDismissButton onClick={close} aria-label={dismissLabel} />}\n      </FocusTrap>\n    </PopoutWrapper>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}