{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/objectSpread2\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"targetRef\", \"children\", \"getRef\", \"placement\", \"onPlacementChange\", \"arrow\", \"arrowClassName\", \"sameWidth\", \"offsetDistance\", \"offsetSkidding\", \"forcePortal\", \"style\", \"customModifiers\", \"renderContent\", \"className\"];\nimport * as React from 'react';\nimport { usePopper } from 'react-popper';\nimport { AppRootPortal } from '../AppRoot/AppRootPortal';\nimport { PopperArrow } from '../PopperArrow/PopperArrow';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { getPlatformClassName } from '../../helpers/getPlatformClassName';\nimport { useExternRef } from '../../hooks/useExternRef';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nimport { classNames } from '@vkontakte/vkjs';\nvar ARROW_PADDING = 8;\nvar ARROW_WIDTH = 20;\nvar ARROW_HEIGHT = 8;\nvar preventOverflowModifier = {\n  name: 'preventOverflow',\n  options: {\n    mainAxis: false\n  }\n};\nvar flipModifier = {\n  name: 'flip'\n};\nvar arrowModifier = {\n  name: 'arrow',\n  options: {\n    padding: ARROW_PADDING\n  }\n};\nvar sameWidthModifier = {\n  name: 'sameWidth',\n  enabled: true,\n  phase: 'beforeWrite',\n  requires: ['computeStyles'],\n  fn: function fn(_ref) {\n    var state = _ref.state;\n    state.styles.popper.width = \"\".concat(state.rects.reference.width, \"px\");\n  },\n  effect: function effect(_ref2) {\n    var state = _ref2.state;\n    state.elements.popper.style.width = \"\".concat(state.elements.reference.offsetWidth, \"px\");\n  }\n};\n/**\n * @see https://vkcom.github.io/VKUI/#/Popper\n */\n\nexport var Popper = function Popper(_ref3) {\n  var _targetRef$current3;\n\n  var targetRef = _ref3.targetRef,\n      children = _ref3.children,\n      getRef = _ref3.getRef,\n      _ref3$placement = _ref3.placement,\n      placement = _ref3$placement === void 0 ? 'bottom-start' : _ref3$placement,\n      onPlacementChange = _ref3.onPlacementChange,\n      arrow = _ref3.arrow,\n      arrowClassName = _ref3.arrowClassName,\n      sameWidth = _ref3.sameWidth,\n      _ref3$offsetDistance = _ref3.offsetDistance,\n      offsetDistance = _ref3$offsetDistance === void 0 ? 8 : _ref3$offsetDistance,\n      _ref3$offsetSkidding = _ref3.offsetSkidding,\n      offsetSkidding = _ref3$offsetSkidding === void 0 ? 0 : _ref3$offsetSkidding,\n      _ref3$forcePortal = _ref3.forcePortal,\n      forcePortal = _ref3$forcePortal === void 0 ? true : _ref3$forcePortal,\n      compStyles = _ref3.style,\n      customModifiers = _ref3.customModifiers,\n      renderContent = _ref3.renderContent,\n      className = _ref3.className,\n      restProps = _objectWithoutProperties(_ref3, _excluded);\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      popperNode = _React$useState2[0],\n      setPopperNode = _React$useState2[1];\n\n  var _React$useState3 = React.useState(0),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      smallTargetOffsetSkidding = _React$useState4[0],\n      setSmallTargetOffsetSkidding = _React$useState4[1];\n\n  var platform = usePlatform();\n  var setExternalRef = useExternRef(getRef, setPopperNode);\n  var modifiers = React.useMemo(function () {\n    var modifiers = [preventOverflowModifier, {\n      name: 'offset',\n      options: {\n        offset: [arrow ? offsetSkidding - smallTargetOffsetSkidding : offsetSkidding, arrow ? offsetDistance + ARROW_HEIGHT : offsetDistance]\n      }\n    }, flipModifier];\n\n    if (arrow) {\n      modifiers.push(arrowModifier);\n    }\n\n    if (sameWidth) {\n      modifiers.push(sameWidthModifier);\n    }\n\n    if (customModifiers) {\n      modifiers.push.apply(modifiers, _toConsumableArray(customModifiers));\n    }\n\n    return modifiers;\n  }, [arrow, sameWidth, smallTargetOffsetSkidding, offsetSkidding, offsetDistance, customModifiers]);\n\n  var _usePopper = usePopper(targetRef.current, popperNode, {\n    placement: placement,\n    modifiers: modifiers\n  }),\n      popperStyles = _usePopper.styles,\n      state = _usePopper.state,\n      attributes = _usePopper.attributes;\n\n  var resolvedPlacement = state === null || state === void 0 ? void 0 : state.placement;\n  var isEdgePlacement = !!resolvedPlacement && resolvedPlacement.includes('-'); // true, если поппер отрисован с краю\n  // Если поппер рисуется с краю, то нужно опционально сместить его в тех случаях, когда стрелка не дотягивается до\n  // таргета из-за маленьких размеров последнего\n\n  useIsomorphicLayoutEffect(function () {\n    if (arrow && isEdgePlacement) {\n      var _ref4, _targetRef$current, _targetRef$current2;\n\n      var placementDirection = resolvedPlacement !== null && resolvedPlacement !== void 0 && resolvedPlacement.startsWith('bottom') || resolvedPlacement !== null && resolvedPlacement !== void 0 && resolvedPlacement.startsWith('top') ? 'vertical' : 'horizontal';\n      var arrowSize = placementDirection === 'vertical' ? ARROW_WIDTH : ARROW_HEIGHT;\n      var targetSize = (_ref4 = placementDirection === 'vertical' ? (_targetRef$current = targetRef.current) === null || _targetRef$current === void 0 ? void 0 : _targetRef$current.offsetWidth : (_targetRef$current2 = targetRef.current) === null || _targetRef$current2 === void 0 ? void 0 : _targetRef$current2.offsetHeight) !== null && _ref4 !== void 0 ? _ref4 : 0;\n\n      if (targetSize < arrowSize + 2 * ARROW_PADDING) {\n        setSmallTargetOffsetSkidding(ARROW_PADDING + arrowSize / 2);\n      }\n    } else {\n      setSmallTargetOffsetSkidding(0);\n    }\n  }, [arrow, isEdgePlacement]);\n  React.useEffect(function () {\n    if (resolvedPlacement) {\n      onPlacementChange && onPlacementChange({\n        placement: resolvedPlacement\n      });\n    }\n  }, [onPlacementChange, resolvedPlacement]);\n  var dropdown = /*#__PURE__*/React.createElement(\"div\", _extends({}, restProps, attributes.popper, {\n    className: classNames(\"vkuiPopper\", getPlatformClassName(\"vkuiPopper\", platform), className),\n    ref: setExternalRef,\n    style: _objectSpread(_objectSpread(_objectSpread({}, compStyles), popperStyles.popper), {}, {\n      minWidth: sameWidth ? (_targetRef$current3 = targetRef.current) === null || _targetRef$current3 === void 0 ? void 0 : _targetRef$current3.scrollWidth : undefined\n    })\n  }), arrow && /*#__PURE__*/React.createElement(PopperArrow, {\n    attributes: attributes.arrow,\n    style: popperStyles.arrow,\n    arrowClassName: arrowClassName\n  }), renderContent ? renderContent({\n    className: \"vkuiPopper__content\"\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiPopper__content\"\n  }, children));\n  return /*#__PURE__*/React.createElement(AppRootPortal, {\n    forcePortal: forcePortal,\n    className: \"vkuiPopperPortal\"\n  }, dropdown);\n};","map":{"version":3,"mappings":"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","names":["React","usePopper","AppRootPortal","PopperArrow","usePlatform","getPlatformClassName","useExternRef","useIsomorphicLayoutEffect","classNames","ARROW_PADDING","ARROW_WIDTH","ARROW_HEIGHT","preventOverflowModifier","name","options","mainAxis","flipModifier","arrowModifier","padding","sameWidthModifier","enabled","phase","requires","fn","state","styles","popper","width","rects","reference","effect","elements","style","offsetWidth","Popper","_ref3","targetRef","children","getRef","_ref3$placement","placement","onPlacementChange","arrow","arrowClassName","sameWidth","_ref3$offsetDistance","offsetDistance","_ref3$offsetSkidding","offsetSkidding","_ref3$forcePortal","forcePortal","compStyles","customModifiers","renderContent","className","restProps","useState","_React$useState2","popperNode","setPopperNode","_React$useState4","smallTargetOffsetSkidding","setSmallTargetOffsetSkidding","platform","setExternalRef","modifiers","useMemo","offset","push","apply","_toConsumableArray","current","popperStyles","attributes","resolvedPlacement","isEdgePlacement","includes","placementDirection","startsWith","arrowSize","targetSize","_targetRef$current","_targetRef$current2","offsetHeight","_ref4","useEffect","dropdown","ref","minWidth","_targetRef$current3","scrollWidth","undefined"],"sources":["/Users/pitus_anonimous/Desktop/youth_bit_hack/youth_bit_vk/node_modules/@vkontakte/vkui/src/components/Popper/Popper.tsx"],"sourcesContent":["import * as React from 'react';\nimport { usePopper, Modifier } from 'react-popper';\nimport { AppRootPortal } from '../AppRoot/AppRootPortal';\nimport { PopperArrow } from '../PopperArrow/PopperArrow';\nimport { HasRef } from '../../types';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { getPlatformClassName } from '../../helpers/getPlatformClassName';\nimport { useExternRef } from '../../hooks/useExternRef';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nimport { classNames } from '@vkontakte/vkjs';\nimport styles from './Popper.module.css';\n\nexport type Placement =\n  | 'auto'\n  | 'auto-start'\n  | 'auto-end'\n  | 'top-start'\n  | 'top-end'\n  | 'bottom-start'\n  | 'bottom-end'\n  | 'right-start'\n  | 'right-end'\n  | 'left-start'\n  | 'left-end'\n  | 'top'\n  | 'bottom'\n  | 'left'\n  | 'right';\n\nexport interface PopperRenderContentProps {\n  className: string;\n}\n\nexport interface PopperCommonProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    HasRef<HTMLDivElement> {\n  /**\n   * По умолчанию компонент выберет наилучшее расположение сам. Но его можно задать извне с помощью этого свойства\n   */\n  placement?: Placement;\n  /**\n   * Отступ по вспомогательной оси\n   */\n  offsetSkidding?: number;\n  /**\n   * Отступ по главной оси\n   */\n  offsetDistance?: number;\n  /**\n   * Отображать ли стрелку, указывающую на якорный элемент\n   */\n  arrow?: boolean;\n  /**\n   * Стиль стрелки\n   */\n  arrowClassName?: string;\n  /**\n   * Выставлять ширину равной target элементу\n   */\n  sameWidth?: boolean;\n  forcePortal?: boolean;\n  onPlacementChange?: (data: { placement?: Placement }) => void;\n  /**\n   * Массив кастомных модификаторов для Popper (необходимо мемоизировать)\n   */\n  customModifiers?: Array<Modifier<string>>;\n  /**\n   * При передаче содержимого в `children`, он будет обёрнут во внутренний контейнер.\n   *\n   * Если хочется управлять этим контейнером, то используйте данную функцию.\n   *\n   * > ⚠️ Параметр `children` будет проигнорирован.\n   */\n  renderContent?(props: PopperRenderContentProps): React.ReactNode;\n}\n\nexport interface PopperProps extends PopperCommonProps {\n  targetRef: React.RefObject<HTMLElement>;\n}\n\nconst ARROW_PADDING = 8;\nconst ARROW_WIDTH = 20;\nconst ARROW_HEIGHT = 8;\n\nconst preventOverflowModifier: Modifier<string> = {\n  name: 'preventOverflow',\n  options: {\n    mainAxis: false,\n  },\n};\n\nconst flipModifier: Modifier<string> = {\n  name: 'flip',\n};\n\nconst arrowModifier: Modifier<string> = {\n  name: 'arrow',\n  options: {\n    padding: ARROW_PADDING,\n  },\n};\n\nconst sameWidthModifier: Modifier<string> = {\n  name: 'sameWidth',\n  enabled: true,\n  phase: 'beforeWrite',\n  requires: ['computeStyles'],\n  fn: ({ state }) => {\n    state.styles.popper.width = `${state.rects.reference.width}px`;\n  },\n  effect: ({ state }) => {\n    state.elements.popper.style.width = `${\n      (state.elements.reference as HTMLElement).offsetWidth\n    }px`;\n  },\n};\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Popper\n */\nexport const Popper = ({\n  targetRef,\n  children,\n  getRef,\n  placement = 'bottom-start',\n  onPlacementChange,\n  arrow,\n  arrowClassName,\n  sameWidth,\n  offsetDistance = 8,\n  offsetSkidding = 0,\n  forcePortal = true,\n  style: compStyles,\n  customModifiers,\n  renderContent,\n  className,\n  ...restProps\n}: PopperProps) => {\n  const [popperNode, setPopperNode] = React.useState<HTMLDivElement | null>(null);\n  const [smallTargetOffsetSkidding, setSmallTargetOffsetSkidding] = React.useState(0);\n  const platform = usePlatform();\n\n  const setExternalRef = useExternRef<HTMLDivElement>(getRef, setPopperNode);\n\n  const modifiers = React.useMemo(() => {\n    const modifiers: Array<Modifier<string>> = [\n      preventOverflowModifier,\n      {\n        name: 'offset',\n        options: {\n          offset: [\n            arrow ? offsetSkidding - smallTargetOffsetSkidding : offsetSkidding,\n            arrow ? offsetDistance + ARROW_HEIGHT : offsetDistance,\n          ],\n        },\n      },\n      flipModifier,\n    ];\n\n    if (arrow) {\n      modifiers.push(arrowModifier);\n    }\n\n    if (sameWidth) {\n      modifiers.push(sameWidthModifier);\n    }\n\n    if (customModifiers) {\n      modifiers.push(...customModifiers);\n    }\n    return modifiers;\n  }, [\n    arrow,\n    sameWidth,\n    smallTargetOffsetSkidding,\n    offsetSkidding,\n    offsetDistance,\n    customModifiers,\n  ]);\n\n  const {\n    styles: popperStyles,\n    state,\n    attributes,\n  } = usePopper(targetRef.current, popperNode, {\n    placement,\n    modifiers,\n  });\n\n  const resolvedPlacement = state?.placement;\n  const isEdgePlacement = !!resolvedPlacement && resolvedPlacement.includes('-'); // true, если поппер отрисован с краю\n\n  // Если поппер рисуется с краю, то нужно опционально сместить его в тех случаях, когда стрелка не дотягивается до\n  // таргета из-за маленьких размеров последнего\n  useIsomorphicLayoutEffect(() => {\n    if (arrow && isEdgePlacement) {\n      const placementDirection =\n        resolvedPlacement?.startsWith('bottom') || resolvedPlacement?.startsWith('top')\n          ? 'vertical'\n          : 'horizontal';\n\n      const arrowSize = placementDirection === 'vertical' ? ARROW_WIDTH : ARROW_HEIGHT;\n      const targetSize =\n        (placementDirection === 'vertical'\n          ? targetRef.current?.offsetWidth\n          : targetRef.current?.offsetHeight) ?? 0;\n\n      if (targetSize < arrowSize + 2 * ARROW_PADDING) {\n        setSmallTargetOffsetSkidding(ARROW_PADDING + arrowSize / 2);\n      }\n    } else {\n      setSmallTargetOffsetSkidding(0);\n    }\n  }, [arrow, isEdgePlacement]);\n\n  React.useEffect(() => {\n    if (resolvedPlacement) {\n      onPlacementChange && onPlacementChange({ placement: resolvedPlacement });\n    }\n  }, [onPlacementChange, resolvedPlacement]);\n\n  const dropdown = (\n    <div\n      {...restProps}\n      {...attributes.popper}\n      className={classNames(\n        styles['Popper'],\n        getPlatformClassName(styles['Popper'], platform),\n        className,\n      )}\n      ref={setExternalRef}\n      style={{\n        ...compStyles,\n        ...popperStyles.popper,\n        minWidth: sameWidth ? targetRef.current?.scrollWidth : undefined,\n      }}\n    >\n      {arrow && (\n        <PopperArrow\n          attributes={attributes.arrow}\n          style={popperStyles.arrow}\n          arrowClassName={arrowClassName}\n        />\n      )}\n      {renderContent ? (\n        renderContent({ className: styles['Popper__content'] })\n      ) : (\n        <div className={styles['Popper__content']}>{children}</div>\n      )}\n    </div>\n  );\n\n  return (\n    <AppRootPortal forcePortal={forcePortal} className={styles['PopperPortal']}>\n      {dropdown}\n    </AppRootPortal>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}