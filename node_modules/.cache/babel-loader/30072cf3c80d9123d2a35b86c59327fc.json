{"ast":null,"code":"import * as React from 'react';\nimport { useDOM } from '../lib/dom';\nimport { noop } from '@vkontakte/vkjs';\nimport { transitionEvent } from '../lib/supportEvents';\nexport var useWaitTransitionFinish = function useWaitTransitionFinish() {\n  var timeoutRef = React.useRef(null);\n\n  var _useDOM = useDOM(),\n      document = _useDOM.document;\n\n  var detach = React.useRef(noop);\n  var remove = React.useCallback(function () {\n    detach.current();\n    detach.current = noop;\n  }, []);\n  var waitTransitionFinish = React.useCallback(function (element, eventHandler, durationFallback) {\n    if (element) {\n      if (!(document !== null && document !== void 0 && document.hidden) && transitionEvent.supported && transitionEvent.name) {\n        remove();\n        element.addEventListener(transitionEvent.name, eventHandler);\n\n        detach.current = function () {\n          if (transitionEvent.name) {\n            element.removeEventListener(transitionEvent.name, eventHandler);\n          }\n        };\n      } else {\n        if (timeoutRef !== null && timeoutRef !== void 0 && timeoutRef.current) {\n          clearTimeout(timeoutRef.current);\n        }\n\n        timeoutRef.current = setTimeout(eventHandler, durationFallback);\n      }\n    }\n  }, [document, remove, timeoutRef]);\n  return {\n    waitTransitionFinish: waitTransitionFinish\n  };\n};","map":{"version":3,"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,MAAT,QAAuB,YAAvB;AACA,SAASC,IAAT,QAAqB,iBAArB;AACA,SAASC,eAAT,QAAgC,sBAAhC;AAEA,OAAO,IAAMC,uBAAuB,GAAG,SAA1BA,uBAA0B,GAAM;EAC3C,IAAMC,UAAU,GAAGL,KAAK,CAACM,MAANN,CAAmD,IAAnDA,CAAnB;;EACA,cAAqBC,MAAM,EAA3B;EAAA,IAAQM,QAAQ,WAARA,QAAR;;EACA,IAAMC,MAAM,GAAGR,KAAK,CAACM,MAANN,CAAaE,IAAbF,CAAf;EAEA,IAAMS,MAAM,GAAGT,KAAK,CAACU,WAANV,CAAkB,YAAM;IACrCQ,MAAM,CAACG,OAAPH;IACAA,MAAM,CAACG,OAAPH,GAAiBN,IAAjBM;EACD,CAHcR,EAGZ,EAHYA,CAAf;EAKA,IAAMY,oBAAoB,GAAGZ,KAAK,CAACU,WAANV,CAC3B,UAACa,OAAD,EAA8BC,YAA9B,EAA0DC,gBAA1D,EAAuF;IACrF,IAAIF,OAAJ,EAAa;MACX,IAAI,EAACN,QAAQ,SAARA,YAAQ,WAARA,YAAQ,CAAES,MAAX,KAAqBb,eAAe,CAACc,SAArC,IAAkDd,eAAe,CAACe,IAAtE,EAA4E;QAC1ET,MAAM;QACNI,OAAO,CAACM,gBAARN,CAAyBV,eAAe,CAACe,IAAzCL,EAA+CC,YAA/CD;;QACAL,MAAM,CAACG,OAAPH,GAAiB,YAAM;UACrB,IAAIL,eAAe,CAACe,IAApB,EAA0B;YACxBL,OAAO,CAACO,mBAARP,CAA4BV,eAAe,CAACe,IAA5CL,EAAkDC,YAAlDD;UACF;QACD,CAJDL;MAKD,CARD,MAQO;QACL,IAAIH,UAAU,SAAVA,cAAU,WAAVA,cAAU,CAAEM,OAAhB,EAAyB;UACvBU,YAAY,CAAChB,UAAU,CAACM,OAAZ,CAAZU;QACF;;QACAhB,UAAU,CAACM,OAAXN,GAAqBiB,UAAU,CAACR,YAAD,EAAeC,gBAAf,CAA/BV;MACF;IACF;EACD,CAlB0BL,EAmB3B,CAACO,QAAD,EAAWE,MAAX,EAAmBJ,UAAnB,CAnB2BL,CAA7B;EAsBA,OAAO;IACLY,oBAAoB,EAApBA;EADK,CAAP;AAGD,CAnCM","names":["React","useDOM","noop","transitionEvent","useWaitTransitionFinish","timeoutRef","useRef","document","detach","remove","useCallback","current","waitTransitionFinish","element","eventHandler","durationFallback","hidden","supported","name","addEventListener","removeEventListener","clearTimeout","setTimeout"],"sources":["/Users/pitus_anonimous/Desktop/youth_bit_hack/youth_bit_vk/node_modules/@vkontakte/vkui/src/hooks/useWaitTransitionFinish.ts"],"sourcesContent":["import * as React from 'react';\nimport { useDOM } from '../lib/dom';\nimport { noop } from '@vkontakte/vkjs';\nimport { transitionEvent } from '../lib/supportEvents';\n\nexport const useWaitTransitionFinish = () => {\n  const timeoutRef = React.useRef<ReturnType<typeof setTimeout> | null>(null);\n  const { document } = useDOM();\n  const detach = React.useRef(noop);\n\n  const remove = React.useCallback(() => {\n    detach.current();\n    detach.current = noop;\n  }, []);\n\n  const waitTransitionFinish = React.useCallback(\n    (element: HTMLElement | null, eventHandler: VoidFunction, durationFallback: number) => {\n      if (element) {\n        if (!document?.hidden && transitionEvent.supported && transitionEvent.name) {\n          remove();\n          element.addEventListener(transitionEvent.name, eventHandler);\n          detach.current = () => {\n            if (transitionEvent.name) {\n              element.removeEventListener(transitionEvent.name, eventHandler);\n            }\n          };\n        } else {\n          if (timeoutRef?.current) {\n            clearTimeout(timeoutRef.current);\n          }\n          timeoutRef.current = setTimeout(eventHandler, durationFallback);\n        }\n      }\n    },\n    [document, remove, timeoutRef],\n  );\n\n  return {\n    waitTransitionFinish,\n  };\n};\n"]},"metadata":{},"sourceType":"module"}