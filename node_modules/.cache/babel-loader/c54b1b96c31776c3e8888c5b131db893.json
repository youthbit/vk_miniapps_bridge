{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"bannerData\", \"onClose\", \"isCloseButtonHidden\", \"className\"];\nimport * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { Icon24Dismiss } from '@vkontakte/icons';\nimport { Button } from '../Button/Button';\nimport { SimpleCell } from '../SimpleCell/SimpleCell';\nimport { Image } from '../Image/Image';\nimport { Footnote } from '../Typography/Footnote/Footnote';\n/**\n * @see https://vkcom.github.io/VKUI/#/PromoBanner\n */\n\nexport var PromoBanner = function PromoBanner(_ref) {\n  var _ref$bannerData = _ref.bannerData,\n      bannerData = _ref$bannerData === void 0 ? {} : _ref$bannerData,\n      onClose = _ref.onClose,\n      isCloseButtonHidden = _ref.isCloseButtonHidden,\n      className = _ref.className,\n      restProps = _objectWithoutProperties(_ref, _excluded);\n\n  var _React$useState = React.useState(''),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      currentPixel = _React$useState2[0],\n      setCurrentPixel = _React$useState2[1];\n\n  var statsPixels = React.useMemo(function () {\n    return bannerData.statistics ? bannerData.statistics.reduce(function (acc, item) {\n      return _objectSpread(_objectSpread({}, acc), {}, _defineProperty({}, item.type, item.url));\n    }, {}) : {};\n  }, [bannerData.statistics]);\n  var onClick = React.useCallback(function () {\n    return setCurrentPixel(statsPixels.click || '');\n  }, [statsPixels.click]);\n  React.useEffect(function () {\n    if (statsPixels.playbackStarted) {\n      setCurrentPixel(statsPixels.playbackStarted);\n    }\n  }, [statsPixels.playbackStarted]);\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: classNames(\"vkuiPromoBanner\", className)\n  }, restProps), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiPromoBanner__head\"\n  }, /*#__PURE__*/React.createElement(Footnote, {\n    className: \"vkuiPromoBanner__label\"\n  }, bannerData.advertisingLabel || 'Advertisement'), bannerData.ageRestrictions && /*#__PURE__*/React.createElement(Footnote, {\n    className: \"vkuiPromoBanner__age\"\n  }, bannerData.ageRestrictions), !isCloseButtonHidden && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiPromoBanner__close\",\n    onClick: onClose\n  }, /*#__PURE__*/React.createElement(Icon24Dismiss, null))), /*#__PURE__*/React.createElement(SimpleCell, {\n    href: bannerData.trackingLink,\n    onClick: onClick,\n    rel: \"nofollow noopener noreferrer\",\n    target: \"_blank\",\n    before: bannerData.iconLink && /*#__PURE__*/React.createElement(Image, {\n      size: 48,\n      src: bannerData.iconLink,\n      alt: bannerData.title,\n      \"data-testid\": process.env.NODE_ENV === 'test' ? 'avatar' : undefined\n    }),\n    after: bannerData.ctaText && /*#__PURE__*/React.createElement(Button, {\n      mode: \"outline\",\n      \"data-testid\": process.env.NODE_ENV === 'test' ? 'button-ctaText' : undefined\n    }, bannerData.ctaText),\n    subtitle: bannerData.domain\n  }, bannerData.title), currentPixel.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiPromoBanner__pixels\"\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: currentPixel,\n    alt: \"\"\n  })));\n};","map":{"version":3,"mappings":"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","names":["React","classNames","Icon24Dismiss","Button","SimpleCell","Image","Footnote","PromoBanner","_ref","bannerData","_ref$bannerData","onClose","isCloseButtonHidden","className","restProps","useState","_React$useState2","currentPixel","setCurrentPixel","statsPixels","useMemo","statistics","reduce","acc","item","_defineProperty","type","url","onClick","useCallback","click","useEffect","playbackStarted","advertisingLabel","ageRestrictions","href","trackingLink","rel","target","before","iconLink","size","src","alt","title","process","env","NODE_ENV","undefined","after","ctaText","mode","subtitle","domain","length"],"sources":["/Users/pitus_anonimous/Desktop/youth_bit_hack/youth_bit_vk/node_modules/@vkontakte/vkui/src/components/PromoBanner/PromoBanner.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { Icon24Dismiss } from '@vkontakte/icons';\nimport { Button } from '../Button/Button';\nimport { SimpleCell } from '../SimpleCell/SimpleCell';\nimport { Image } from '../Image/Image';\nimport { Footnote } from '../Typography/Footnote/Footnote';\nimport styles from './PromoBanner.module.css';\n\ntype StatsType =\n  | 'playbackStarted' // Начало показа\n  | 'click'; // Клик по баннеру\n\ntype BannerData = {\n  title?: string;\n  url_types?: string;\n  bannerID?: string;\n  imageWidth?: number;\n  imageHeight?: number;\n  imageLink?: string;\n  trackingLink?: string;\n  type?: string;\n  iconWidth?: number;\n  domain?: string;\n  ctaText?: string;\n  advertisingLabel?: string;\n  iconLink?: string;\n  statistics?: Array<{ type: StatsType; url: string }>;\n  openInBrowser?: boolean;\n  iconHeight?: number;\n  directLink?: boolean;\n  navigationType?: string;\n  description?: string;\n  ageRestrictions?: string;\n};\n\nexport interface PromoBannerProps extends React.HTMLAttributes<HTMLDivElement> {\n  /** Данные рекламного баннера, полученные из VKWebAppGetAds */\n  bannerData: BannerData;\n  /** Флаг скрытия кнопки закрытия рекламы */\n  isCloseButtonHidden?: boolean;\n  /** Хандлер закрытия рекламы */\n  onClose: () => void;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/PromoBanner\n */\nexport const PromoBanner = ({\n  bannerData = {},\n  onClose,\n  isCloseButtonHidden,\n  className,\n  ...restProps\n}: PromoBannerProps) => {\n  const [currentPixel, setCurrentPixel] = React.useState('');\n\n  const statsPixels = React.useMemo(\n    () =>\n      (bannerData.statistics\n        ? bannerData.statistics.reduce((acc, item) => ({ ...acc, [item.type]: item.url }), {})\n        : {}) as Record<StatsType, string | void>,\n    [bannerData.statistics],\n  );\n\n  const onClick = React.useCallback(\n    () => setCurrentPixel(statsPixels.click || ''),\n    [statsPixels.click],\n  );\n\n  React.useEffect(() => {\n    if (statsPixels.playbackStarted) {\n      setCurrentPixel(statsPixels.playbackStarted);\n    }\n  }, [statsPixels.playbackStarted]);\n\n  return (\n    <div className={classNames(styles['PromoBanner'], className)} {...restProps}>\n      <div className={styles['PromoBanner__head']}>\n        <Footnote className={styles['PromoBanner__label']}>\n          {bannerData.advertisingLabel || 'Advertisement'}\n        </Footnote>\n        {bannerData.ageRestrictions && (\n          <Footnote className={styles['PromoBanner__age']}>{bannerData.ageRestrictions}</Footnote>\n        )}\n\n        {!isCloseButtonHidden && (\n          <div className={styles['PromoBanner__close']} onClick={onClose}>\n            <Icon24Dismiss />\n          </div>\n        )}\n      </div>\n      <SimpleCell\n        href={bannerData.trackingLink}\n        onClick={onClick}\n        rel=\"nofollow noopener noreferrer\"\n        target=\"_blank\"\n        before={\n          bannerData.iconLink && (\n            <Image\n              size={48}\n              src={bannerData.iconLink}\n              alt={bannerData.title}\n              data-testid={process.env.NODE_ENV === 'test' ? 'avatar' : undefined}\n            />\n          )\n        }\n        after={\n          bannerData.ctaText && (\n            <Button\n              mode=\"outline\"\n              data-testid={process.env.NODE_ENV === 'test' ? 'button-ctaText' : undefined}\n            >\n              {bannerData.ctaText}\n            </Button>\n          )\n        }\n        subtitle={bannerData.domain}\n      >\n        {bannerData.title}\n      </SimpleCell>\n\n      {currentPixel.length > 0 && (\n        <div className={styles['PromoBanner__pixels']}>\n          <img src={currentPixel} alt=\"\" />\n        </div>\n      )}\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}