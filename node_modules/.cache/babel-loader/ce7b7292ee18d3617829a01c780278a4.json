{"ast":null,"code":"import * as React from 'react';\nimport { useDOM } from '../../lib/dom';\nimport { classNames } from '@vkontakte/vkjs';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nimport { useExternRef } from '../../hooks/useExternRef';\nimport { useEventListener } from '../../hooks/useEventListener';\nimport { useTrackerVisibility } from './useTrackerVisibility';\nimport { stopPropagation } from '../../lib/utils';\nexport var CustomScrollView = function CustomScrollView(_ref) {\n  var className = _ref.className,\n      children = _ref.children,\n      externalBoxRef = _ref.boxRef,\n      windowResize = _ref.windowResize,\n      _ref$autoHideScrollba = _ref.autoHideScrollbar,\n      autoHideScrollbar = _ref$autoHideScrollba === void 0 ? false : _ref$autoHideScrollba,\n      autoHideScrollbarDelay = _ref.autoHideScrollbarDelay;\n\n  var _useDOM = useDOM(),\n      document = _useDOM.document,\n      window = _useDOM.window;\n\n  var ratio = React.useRef(NaN);\n  var lastTrackerTop = React.useRef(0);\n  var clientHeight = React.useRef(0);\n  var trackerHeight = React.useRef(0);\n  var scrollHeight = React.useRef(0);\n  var transformProp = React.useRef('');\n  var startY = React.useRef(0);\n  var trackerTop = React.useRef(0);\n  var boxRef = useExternRef(externalBoxRef);\n  var barY = React.useRef(null);\n  var trackerY = React.useRef(null);\n\n  var setTrackerPosition = function setTrackerPosition(scrollTop) {\n    lastTrackerTop.current = scrollTop;\n\n    if (trackerY.current !== null) {\n      trackerY.current.style[transformProp.current] = \"translate(0, \".concat(scrollTop, \"px)\");\n    }\n  };\n\n  var setTrackerPositionFromScroll = function setTrackerPositionFromScroll(scrollTop) {\n    var progress = scrollTop / (scrollHeight.current - clientHeight.current);\n    setTrackerPosition((clientHeight.current - trackerHeight.current) * progress);\n  };\n\n  var resize = function resize() {\n    if (!boxRef.current || !barY.current || !trackerY.current) {\n      return;\n    }\n\n    var localClientHeight = boxRef.current.clientHeight;\n    var localScrollHeight = boxRef.current.scrollHeight;\n    var localRatio = localClientHeight / localScrollHeight;\n    var localTrackerHeight = Math.max(localClientHeight * localRatio, 40);\n    ratio.current = localRatio;\n    clientHeight.current = localClientHeight;\n    scrollHeight.current = localScrollHeight;\n    trackerHeight.current = localTrackerHeight;\n\n    if (localRatio >= 1) {\n      barY.current.style.display = 'none';\n    } else {\n      barY.current.style.display = '';\n      trackerY.current.style.height = \"\".concat(localTrackerHeight, \"px\");\n      setTrackerPositionFromScroll(boxRef.current.scrollTop);\n    }\n  };\n\n  var resizeHandler = useEventListener('resize', resize);\n  useIsomorphicLayoutEffect(function () {\n    if (windowResize && window) {\n      resizeHandler.add(window);\n    }\n  }, [windowResize, window]);\n  useIsomorphicLayoutEffect(function () {\n    var _trackerY$current;\n\n    var style = (_trackerY$current = trackerY.current) === null || _trackerY$current === void 0 ? void 0 : _trackerY$current.style;\n    var prop = '';\n\n    if (style !== undefined) {\n      if ('transform' in style) {\n        prop = 'transform';\n      } else if ('webkitTransform' in style) {\n        prop = 'webkitTransform';\n      }\n    }\n\n    transformProp.current = prop;\n  }, []);\n  useIsomorphicLayoutEffect(resize);\n\n  var setScrollPositionFromTracker = function setScrollPositionFromTracker(trackerTop) {\n    var progress = trackerTop / (clientHeight.current - trackerHeight.current);\n\n    if (boxRef.current !== null) {\n      boxRef.current.scrollTop = (scrollHeight.current - clientHeight.current) * progress;\n    }\n  };\n\n  var onMove = function onMove(e) {\n    e.preventDefault();\n    var diff = e.clientY - startY.current;\n    var position = Math.min(Math.max(trackerTop.current + diff, 0), clientHeight.current - trackerHeight.current);\n    setScrollPositionFromTracker(position);\n  };\n\n  var _useTrackerVisibility = useTrackerVisibility(autoHideScrollbar, autoHideScrollbarDelay),\n      trackerVisible = _useTrackerVisibility.trackerVisible,\n      onTargetScroll = _useTrackerVisibility.onTargetScroll,\n      onTrackerDragStart = _useTrackerVisibility.onTrackerDragStart,\n      onTrackerDragStop = _useTrackerVisibility.onTrackerDragStop,\n      onTrackerMouseEnter = _useTrackerVisibility.onTrackerMouseEnter,\n      onTrackerMouseLeave = _useTrackerVisibility.onTrackerMouseLeave;\n\n  var onUp = function onUp(e) {\n    e.preventDefault();\n\n    if (autoHideScrollbar) {\n      onTrackerDragStop();\n    }\n\n    unsubscribe();\n  };\n\n  var scroll = function scroll() {\n    if (ratio.current >= 1 || !boxRef.current) {\n      return;\n    }\n\n    if (autoHideScrollbar) {\n      onTargetScroll();\n    }\n\n    setTrackerPositionFromScroll(boxRef.current.scrollTop);\n  };\n\n  var listeners = [useEventListener('mousemove', onMove), useEventListener('mouseup', onUp)];\n\n  function subscribe(el) {\n    if (el) {\n      listeners.forEach(function (l) {\n        return l.add(el);\n      });\n    }\n  }\n\n  function unsubscribe() {\n    listeners.forEach(function (l) {\n      return l.remove();\n    });\n  }\n\n  var onDragStart = function onDragStart(e) {\n    e.preventDefault();\n    startY.current = e.clientY;\n    trackerTop.current = lastTrackerTop.current;\n\n    if (autoHideScrollbar) {\n      onTrackerDragStart();\n    }\n\n    subscribe(document);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"vkuiCustomScrollView\", className)\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiCustomScrollView__box\",\n    tabIndex: -1,\n    ref: boxRef,\n    onScroll: scroll\n  }, children), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiCustomScrollView__barY\",\n    ref: barY,\n    onClick: stopPropagation\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"vkuiCustomScrollView__trackerY\", !trackerVisible && \"vkuiCustomScrollView__trackerY--hidden\"),\n    onMouseEnter: autoHideScrollbar ? onTrackerMouseEnter : undefined,\n    onMouseLeave: autoHideScrollbar ? onTrackerMouseLeave : undefined,\n    ref: trackerY,\n    onMouseDown: onDragStart\n  })));\n};","map":{"version":3,"mappings":"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","names":["React","useDOM","classNames","useIsomorphicLayoutEffect","useExternRef","useEventListener","useTrackerVisibility","stopPropagation","CustomScrollView","_ref","className","children","externalBoxRef","boxRef","windowResize","_ref$autoHideScrollba","autoHideScrollbar","autoHideScrollbarDelay","document","window","ratio","useRef","NaN","lastTrackerTop","clientHeight","trackerHeight","scrollHeight","transformProp","startY","trackerTop","barY","trackerY","setTrackerPosition","scrollTop","current","style","setTrackerPositionFromScroll","progress","resize","localClientHeight","localScrollHeight","localRatio","localTrackerHeight","Math","max","display","height","resizeHandler","add","_trackerY$current","prop","undefined","setScrollPositionFromTracker","onMove","e","preventDefault","diff","clientY","position","min","trackerVisible","onTargetScroll","onTrackerDragStart","onTrackerDragStop","onTrackerMouseEnter","onTrackerMouseLeave","onUp","unsubscribe","scroll","listeners","subscribe","el","forEach","l","remove","onDragStart","tabIndex","ref","onScroll","onClick","onMouseEnter","onMouseLeave","onMouseDown"],"sources":["/Users/pitus_anonimous/Desktop/youth_bit_hack/youth_bit_vk/node_modules/@vkontakte/vkui/src/components/CustomScrollView/CustomScrollView.tsx"],"sourcesContent":["import * as React from 'react';\nimport { DOMProps, useDOM } from '../../lib/dom';\nimport { classNames } from '@vkontakte/vkjs';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nimport { useExternRef } from '../../hooks/useExternRef';\nimport { useEventListener } from '../../hooks/useEventListener';\nimport { TrackerOptionsProps, useTrackerVisibility } from './useTrackerVisibility';\nimport { stopPropagation } from '../../lib/utils';\nimport styles from './CustomScrollView.module.css';\n\nexport interface CustomScrollViewProps extends DOMProps, TrackerOptionsProps {\n  windowResize?: boolean;\n  boxRef?: React.Ref<HTMLDivElement>;\n  className?: HTMLDivElement['className'];\n  children: React.ReactNode;\n}\n\nexport const CustomScrollView = ({\n  className,\n  children,\n  boxRef: externalBoxRef,\n  windowResize,\n  autoHideScrollbar = false,\n  autoHideScrollbarDelay,\n}: CustomScrollViewProps) => {\n  const { document, window } = useDOM();\n\n  const ratio = React.useRef(NaN);\n  const lastTrackerTop = React.useRef(0);\n  const clientHeight = React.useRef(0);\n  const trackerHeight = React.useRef(0);\n  const scrollHeight = React.useRef(0);\n  const transformProp = React.useRef('');\n  const startY = React.useRef(0);\n  const trackerTop = React.useRef(0);\n\n  const boxRef = useExternRef(externalBoxRef);\n\n  const barY = React.useRef<HTMLDivElement>(null);\n  const trackerY = React.useRef<HTMLDivElement>(null);\n\n  const setTrackerPosition = (scrollTop: number) => {\n    lastTrackerTop.current = scrollTop;\n    if (trackerY.current !== null) {\n      (trackerY.current.style as any)[transformProp.current] = `translate(0, ${scrollTop}px)`;\n    }\n  };\n\n  const setTrackerPositionFromScroll = (scrollTop: number) => {\n    const progress = scrollTop / (scrollHeight.current - clientHeight.current);\n    setTrackerPosition((clientHeight.current - trackerHeight.current) * progress);\n  };\n\n  const resize = () => {\n    if (!boxRef.current || !barY.current || !trackerY.current) {\n      return;\n    }\n    const localClientHeight = boxRef.current.clientHeight;\n    const localScrollHeight = boxRef.current.scrollHeight;\n    const localRatio = localClientHeight / localScrollHeight;\n    const localTrackerHeight = Math.max(localClientHeight * localRatio, 40);\n\n    ratio.current = localRatio;\n    clientHeight.current = localClientHeight;\n    scrollHeight.current = localScrollHeight;\n    trackerHeight.current = localTrackerHeight;\n\n    if (localRatio >= 1) {\n      barY.current.style.display = 'none';\n    } else {\n      barY.current.style.display = '';\n      trackerY.current.style.height = `${localTrackerHeight}px`;\n      setTrackerPositionFromScroll(boxRef.current.scrollTop);\n    }\n  };\n\n  const resizeHandler = useEventListener('resize', resize);\n\n  useIsomorphicLayoutEffect(() => {\n    if (windowResize && window) {\n      resizeHandler.add(window);\n    }\n  }, [windowResize, window]);\n\n  useIsomorphicLayoutEffect(() => {\n    let style = trackerY.current?.style;\n    let prop = '';\n    if (style !== undefined) {\n      if ('transform' in style) {\n        prop = 'transform';\n      } else if ('webkitTransform' in style) {\n        prop = 'webkitTransform';\n      }\n    }\n    transformProp.current = prop;\n  }, []);\n\n  useIsomorphicLayoutEffect(resize);\n\n  const setScrollPositionFromTracker = (trackerTop: number) => {\n    const progress = trackerTop / (clientHeight.current - trackerHeight.current);\n    if (boxRef.current !== null) {\n      boxRef.current.scrollTop = (scrollHeight.current - clientHeight.current) * progress;\n    }\n  };\n\n  const onMove = (e: MouseEvent) => {\n    e.preventDefault();\n    const diff = e.clientY - startY.current;\n    const position = Math.min(\n      Math.max(trackerTop.current + diff, 0),\n      clientHeight.current - trackerHeight.current,\n    );\n\n    setScrollPositionFromTracker(position);\n  };\n\n  const {\n    trackerVisible,\n    onTargetScroll,\n    onTrackerDragStart,\n    onTrackerDragStop,\n    onTrackerMouseEnter,\n    onTrackerMouseLeave,\n  } = useTrackerVisibility(autoHideScrollbar, autoHideScrollbarDelay);\n\n  const onUp = (e: MouseEvent) => {\n    e.preventDefault();\n\n    if (autoHideScrollbar) {\n      onTrackerDragStop();\n    }\n\n    unsubscribe();\n  };\n\n  const scroll = () => {\n    if (ratio.current >= 1 || !boxRef.current) {\n      return;\n    }\n\n    if (autoHideScrollbar) {\n      onTargetScroll();\n    }\n\n    setTrackerPositionFromScroll(boxRef.current.scrollTop);\n  };\n\n  const listeners = [useEventListener('mousemove', onMove), useEventListener('mouseup', onUp)];\n\n  function subscribe(el: Document | undefined) {\n    if (el) {\n      listeners.forEach((l) => l.add(el));\n    }\n  }\n\n  function unsubscribe() {\n    listeners.forEach((l) => l.remove());\n  }\n\n  const onDragStart = (e: React.MouseEvent) => {\n    e.preventDefault();\n    startY.current = e.clientY;\n    trackerTop.current = lastTrackerTop.current;\n\n    if (autoHideScrollbar) {\n      onTrackerDragStart();\n    }\n\n    subscribe(document);\n  };\n\n  return (\n    <div className={classNames(styles['CustomScrollView'], className)}>\n      <div className={styles['CustomScrollView__box']} tabIndex={-1} ref={boxRef} onScroll={scroll}>\n        {children}\n      </div>\n\n      <div className={styles['CustomScrollView__barY']} ref={barY} onClick={stopPropagation}>\n        <div\n          className={classNames(\n            styles['CustomScrollView__trackerY'],\n            !trackerVisible && styles[`CustomScrollView__trackerY--hidden`],\n          )}\n          onMouseEnter={autoHideScrollbar ? onTrackerMouseEnter : undefined}\n          onMouseLeave={autoHideScrollbar ? onTrackerMouseLeave : undefined}\n          ref={trackerY}\n          onMouseDown={onDragStart}\n        />\n      </div>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}