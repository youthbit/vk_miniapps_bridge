{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"initialSlideIndex\", \"children\", \"timeout\", \"onChange\", \"bullets\"];\nimport * as React from 'react';\nimport { clamp } from '../../helpers/math';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { BaseGallery } from '../BaseGallery/BaseGallery';\n/**\n * @see https://vkcom.github.io/VKUI/#/Gallery\n */\n\nexport var Gallery = function Gallery(_ref) {\n  var _props$slideIndex;\n\n  var _ref$initialSlideInde = _ref.initialSlideIndex,\n      initialSlideIndex = _ref$initialSlideInde === void 0 ? 0 : _ref$initialSlideInde,\n      children = _ref.children,\n      _ref$timeout = _ref.timeout,\n      timeout = _ref$timeout === void 0 ? 0 : _ref$timeout,\n      onChange = _ref.onChange,\n      bullets = _ref.bullets,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  var _React$useState = React.useState(initialSlideIndex),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      localSlideIndex = _React$useState2[0],\n      setSlideIndex = _React$useState2[1];\n\n  var isControlled = typeof props.slideIndex === 'number';\n  var slideIndex = isControlled ? (_props$slideIndex = props.slideIndex) !== null && _props$slideIndex !== void 0 ? _props$slideIndex : 0 : localSlideIndex;\n  var isDraggable = !isControlled || Boolean(onChange);\n  var slides = React.useMemo(function () {\n    return React.Children.toArray(children).filter(function (item) {\n      return Boolean(item);\n    });\n  }, [children]);\n  var childCount = slides.length;\n  var handleChange = React.useCallback(function (current) {\n    if (current === slideIndex) {\n      return;\n    }\n\n    !isControlled && setSlideIndex(current);\n    onChange && onChange(current);\n  }, [isControlled, onChange, slideIndex]);\n  var autoplay = useTimeout(function () {\n    return handleChange((slideIndex + 1) % childCount);\n  }, timeout);\n  React.useEffect(function () {\n    return timeout ? autoplay.set() : autoplay.clear();\n  }, [timeout, slideIndex, autoplay]); // prevent invalid slideIndex\n  // any slide index is invalid with no slides, just keep it as is\n\n  var safeSlideIndex = childCount > 0 ? clamp(slideIndex, 0, childCount - 1) : slideIndex; // notify parent in controlled mode\n\n  React.useEffect(function () {\n    if (onChange && safeSlideIndex !== slideIndex) {\n      onChange(safeSlideIndex);\n    }\n\n    setSlideIndex(safeSlideIndex);\n  }, [onChange, safeSlideIndex, slideIndex]);\n  return /*#__PURE__*/React.createElement(BaseGallery, _extends({\n    isDraggable: isDraggable\n  }, props, {\n    bullets: childCount > 0 && bullets,\n    slideIndex: safeSlideIndex,\n    onChange: handleChange\n  }), slides);\n};","map":{"version":3,"mappings":"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","names":["React","clamp","useTimeout","BaseGallery","Gallery","_ref","initialSlideIndex","_ref$initialSlideInde","children","_ref$timeout","timeout","onChange","bullets","props","useState","_React$useState2","localSlideIndex","setSlideIndex","isControlled","slideIndex","_props$slideIndex","isDraggable","Boolean","slides","useMemo","Children","toArray","filter","item","childCount","length","handleChange","useCallback","current","autoplay","useEffect","set","clear","safeSlideIndex","_extends"],"sources":["/Users/pitus_anonimous/Desktop/youth_bit_hack/youth_bit_vk/node_modules/@vkontakte/vkui/src/components/Gallery/Gallery.tsx"],"sourcesContent":["import * as React from 'react';\nimport { clamp } from '../../helpers/math';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { BaseGallery } from '../BaseGallery/BaseGallery';\nimport { BaseGalleryProps } from '../BaseGallery/types';\n\nexport interface GalleryProps extends BaseGalleryProps {\n  initialSlideIndex?: number;\n  timeout?: number;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Gallery\n */\nexport const Gallery = ({\n  initialSlideIndex = 0,\n  children,\n  timeout = 0,\n  onChange,\n  bullets,\n  ...props\n}: GalleryProps) => {\n  const [localSlideIndex, setSlideIndex] = React.useState(initialSlideIndex);\n  const isControlled = typeof props.slideIndex === 'number';\n  const slideIndex = isControlled ? props.slideIndex ?? 0 : localSlideIndex;\n  const isDraggable = !isControlled || Boolean(onChange);\n  const slides = React.useMemo(\n    () => React.Children.toArray(children).filter((item) => Boolean(item)),\n    [children],\n  );\n  const childCount = slides.length;\n\n  const handleChange: GalleryProps['onChange'] = React.useCallback(\n    (current: number) => {\n      if (current === slideIndex) {\n        return;\n      }\n      !isControlled && setSlideIndex(current);\n      onChange && onChange(current);\n    },\n    [isControlled, onChange, slideIndex],\n  );\n\n  const autoplay = useTimeout(() => handleChange((slideIndex + 1) % childCount), timeout);\n  React.useEffect(\n    () => (timeout ? autoplay.set() : autoplay.clear()),\n    [timeout, slideIndex, autoplay],\n  );\n\n  // prevent invalid slideIndex\n  // any slide index is invalid with no slides, just keep it as is\n  const safeSlideIndex = childCount > 0 ? clamp(slideIndex, 0, childCount - 1) : slideIndex;\n  // notify parent in controlled mode\n  React.useEffect(() => {\n    if (onChange && safeSlideIndex !== slideIndex) {\n      onChange(safeSlideIndex);\n    }\n    setSlideIndex(safeSlideIndex);\n  }, [onChange, safeSlideIndex, slideIndex]);\n\n  return (\n    <BaseGallery\n      isDraggable={isDraggable}\n      {...props}\n      bullets={childCount > 0 && bullets}\n      slideIndex={safeSlideIndex}\n      onChange={handleChange}\n    >\n      {slides}\n    </BaseGallery>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}