{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nvar CustomStorage = /*#__PURE__*/function () {\n  function CustomStorage() {\n    var _this = this;\n\n    _classCallCheck(this, CustomStorage);\n\n    _defineProperty(this, \"data\", {});\n\n    _defineProperty(this, \"getItem\", function (key) {\n      return _this.data.hasOwnProperty(key) ? _this.data[key] : null;\n    });\n\n    _defineProperty(this, \"keys\", function () {\n      return Object.keys(_this.data);\n    });\n  }\n\n  _createClass(CustomStorage, [{\n    key: \"setItem\",\n    value: function setItem(key, val) {\n      this.data[key] = String(val);\n    }\n  }, {\n    key: \"removeItem\",\n    value: function removeItem(id) {\n      delete this.data[id];\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.data = {};\n    }\n  }, {\n    key: \"length\",\n    get: function get() {\n      return Object.keys(this.data).length;\n    }\n  }, {\n    key: \"key\",\n    value: function key(index) {\n      return Object.keys(this.data)[index];\n    }\n  }]);\n\n  return CustomStorage;\n}();\n\nvar dummyKey = 'vk-ls-dummy';\nvar dummyContent = 'test';\nvar ls;\n\nfunction getLocalStorage() {\n  if (ls) {\n    return ls;\n  }\n\n  try {\n    // Проверяем, нет ли в FF или Safari cross domain security restrictions\n    window.localStorage.setItem(dummyKey, dummyContent);\n\n    if (dummyContent !== window.localStorage.getItem(dummyKey)) {\n      throw new Error('localStorage is broken');\n    }\n\n    window.localStorage.removeItem(dummyKey);\n    ls = window.localStorage;\n  } catch (e) {\n    ls = new CustomStorage();\n  }\n\n  return ls;\n}\n/**\n * Обертка над localStorage для кода, который может использоваться на других сайтах\n * Firefox блокирует доступ к localStorage для скриптов с других доменов\n */\n\n\nexport var localStorage = {\n  setItem: function setItem(key, val) {\n    return getLocalStorage().setItem(key, val);\n  },\n  getItem: function getItem(key) {\n    return getLocalStorage().getItem(key);\n  },\n  removeItem: function removeItem(key) {\n    return getLocalStorage().removeItem(key);\n  },\n  clear: function clear() {\n    return getLocalStorage().clear();\n  },\n  length: function length() {\n    return getLocalStorage().length;\n  },\n  key: function key(index) {\n    return getLocalStorage().key(index);\n  },\n  keys: function keys() {\n    var storage = getLocalStorage();\n\n    if (storage instanceof CustomStorage) {\n      return storage.keys();\n    } else {\n      return Object.keys(storage);\n    }\n  },\n  getPrefixedKeys: function getPrefixedKeys(prefix) {\n    return localStorage.keys().filter(function (key) {\n      return key.startsWith(prefix);\n    });\n  }\n};\nvar sessionStorageCache;\n\nfunction getSessionStorage() {\n  if (sessionStorageCache) {\n    return sessionStorageCache;\n  }\n\n  try {\n    // Проверяем, нет ли в FF или Safari cross domain security restrictions\n    window.sessionStorage.setItem(dummyKey, dummyContent);\n\n    if (dummyContent !== window.sessionStorage.getItem(dummyKey)) {\n      throw new Error('sessionStorage is broken');\n    }\n\n    window.sessionStorage.removeItem(dummyKey);\n    sessionStorageCache = window.sessionStorage;\n  } catch (e) {\n    sessionStorageCache = new CustomStorage();\n  }\n\n  return sessionStorageCache;\n}\n\nexport var sessionStorage = {\n  setItem: function setItem(key, val) {\n    return getSessionStorage().setItem(key, val);\n  },\n  getItem: function getItem(key) {\n    return getSessionStorage().getItem(key);\n  },\n  removeItem: function removeItem(key) {\n    return getSessionStorage().removeItem(key);\n  },\n  clear: function clear() {\n    return getSessionStorage().clear();\n  },\n  length: function length() {\n    return getSessionStorage().length;\n  },\n  key: function key(index) {\n    return getSessionStorage().key(index);\n  },\n  keys: function keys() {\n    var storage = getSessionStorage();\n\n    if (storage instanceof CustomStorage) {\n      return storage.keys();\n    } else {\n      return Object.keys(storage);\n    }\n  },\n  getPrefixedKeys: function getPrefixedKeys(prefix) {\n    return sessionStorage.keys().filter(function (key) {\n      return key.startsWith(prefix);\n    });\n  }\n};","map":{"version":3,"mappings":";;;;IAEMA,aAAa;EAAA;IAAA;;IAAAC;;IAAAC,8BACkB,EADlB;;IACoBA,iCAMpB,UAACC,GAAD,EAAY;MAAA,OAAMC,KAAI,CAACC,IAAL,CAAUC,cAAV,CAAyBH,GAAzB,IAAgCC,KAAI,CAACC,IAAL,CAAUF,GAAV,CAAhC,GAAiD,IAAvD;IAA4D,CANpD;;IAMoDD,8BAkB3E;MAAA,OAAgBK,MAAM,CAACC,IAAPD,CAAYH,KAAI,CAACC,IAAjBE,CAAhB;IAAsC,CAlBqC;EAkBrC;;EAAAE;IAAAN;IAAAO,OAtBpD,iBAAeP,GAAf,EAA4BQ,GAA5B,EAAyC;MACvC,KAAKN,IAAL,CAAUF,GAAV,IAAiBS,MAAM,CAACD,GAAD,CAAvB;IACF;EAoBoD,GApBnD;IAAAR;IAAAO,OAID,oBAAkBG,EAAlB,EAA8B;MAC5B,OAAO,KAAKR,IAAL,CAAUQ,EAAV,CAAP;IACF;EANC,CAoBmD,EAdnD;IAAAV;IAAAO,OAED,iBAAe;MACb,KAAKL,IAAL,GAAY,EAAZ;IACF;EAJC,CAcmD,EAVnD;IAAAF;IAAAW,KAED,eAAoB;MAClB,OAAOP,MAAM,CAACC,IAAPD,CAAY,KAAKF,IAAjBE,EAAuBQ,MAA9B;IACF;EAJC,CAUmD,EANnD;IAAAZ;IAAAO,OAED,aAAWM,KAAX,EAAyC;MACvC,OAAOT,MAAM,CAACC,IAAPD,CAAY,KAAKF,IAAjBE,EAAuBS,KAAvBT,CAAP;IACF;EAJC,CAMmD;;EAFnD;AAAA,CAvBgB;;AA4BnB,IAAMU,QAAQ,GAAG,aAAjB;AACA,IAAMC,YAAY,GAAG,MAArB;AAEA,IAAIC,EAAJ;;AAEA,SAASC,eAAT,GAA2B;EACzB,IAAID,EAAJ,EAAQ;IACN,OAAOA,EAAP;EACF;;EACA,IAAI;IACF;IACAE,MAAM,CAACC,YAAPD,CAAoBE,OAApBF,CAA4BJ,QAA5BI,EAAsCH,YAAtCG;;IACA,IAAIH,YAAY,KAAKG,MAAM,CAACC,YAAPD,CAAoBG,OAApBH,CAA4BJ,QAA5BI,CAArB,EAA4D;MAC1D,MAAM,IAAII,KAAJ,CAAU,wBAAV,CAAN;IACF;;IACAJ,MAAM,CAACC,YAAPD,CAAoBK,UAApBL,CAA+BJ,QAA/BI;IACAF,EAAE,GAAGE,MAAM,CAACC,YAAZH;EACD,CARD,CAQE,OAAOQ,CAAP,EAAU;IACVR,EAAE,GAAG,IAAInB,aAAJ,EAALmB;EACF;;EACA,OAAOA,EAAP;AACF;AAEA;AACA;AACA;AACA;;;AACA,OAAO,IAAMG,YAAY,GAAG;EAC1BC,OAAO,EAAE,iBAACpB,GAAD,EAAcQ,GAAd,EAAyB;IAAA,OAAKS,eAAe,GAAGG,OAAlBH,CAA0BjB,GAA1BiB,EAA+BT,GAA/BS,CAAL;EAAwC,CADhD;EAE1BI,OAAO,EAAE,iBAACrB,GAAD,EAAY;IAAA,OAAKiB,eAAe,GAAGI,OAAlBJ,CAA0BjB,GAA1BiB,CAAL;EAAmC,CAF9B;EAG1BM,UAAU,EAAE,oBAACvB,GAAD,EAAY;IAAA,OAAKiB,eAAe,GAAGM,UAAlBN,CAA6BjB,GAA7BiB,CAAL;EAAsC,CAHpC;EAI1BQ,KAAK,EAAE;IAAA,OAAMR,eAAe,GAAGQ,KAAlBR,EAAN;EAA+B,CAJZ;EAK1BL,MAAM,EAAE;IAAA,OAAMK,eAAe,GAAGL,MAAxB;EAA8B,CALZ;EAM1BZ,GAAG,EAAE,aAACa,KAAD,EAAc;IAAA,OAAKI,eAAe,GAAGjB,GAAlBiB,CAAsBJ,KAAtBI,CAAL;EAAiC,CAN1B;EAO1BZ,IAAI,kBAAa;IACf,IAAMqB,OAAO,GAAGT,eAAe,EAA/B;;IACA,IAAIS,OAAO,YAAY7B,aAAvB,EAAsC;MACpC,OAAO6B,OAAO,CAACrB,IAARqB,EAAP;IACD,CAFD,MAEO;MACL,OAAOtB,MAAM,CAACC,IAAPD,CAAYsB,OAAZtB,CAAP;IACF;EACD,CAdyB;EAe1BuB,eAAe,EAAE,yBAACC,MAAD,EAA8B;IAC7C,OAAOT,YAAY,CAACd,IAAbc,GAAoBU,MAApBV,CAA2B,UAACnB,GAAD,EAAI;MAAA,OAAKA,GAAG,CAAC8B,UAAJ9B,CAAe4B,MAAf5B,CAAL;IAA2B,CAA1DmB,CAAP;EACF;AAjB0B,CAArB;AAoBP,IAAIY,mBAAJ;;AAEA,SAASC,iBAAT,GAA6B;EAC3B,IAAID,mBAAJ,EAAyB;IACvB,OAAOA,mBAAP;EACF;;EACA,IAAI;IACF;IACAb,MAAM,CAACe,cAAPf,CAAsBE,OAAtBF,CAA8BJ,QAA9BI,EAAwCH,YAAxCG;;IACA,IAAIH,YAAY,KAAKG,MAAM,CAACe,cAAPf,CAAsBG,OAAtBH,CAA8BJ,QAA9BI,CAArB,EAA8D;MAC5D,MAAM,IAAII,KAAJ,CAAU,0BAAV,CAAN;IACF;;IACAJ,MAAM,CAACe,cAAPf,CAAsBK,UAAtBL,CAAiCJ,QAAjCI;IACAa,mBAAmB,GAAGb,MAAM,CAACe,cAA7BF;EACD,CARD,CAQE,OAAOP,CAAP,EAAU;IACVO,mBAAmB,GAAG,IAAIlC,aAAJ,EAAtBkC;EACF;;EACA,OAAOA,mBAAP;AACF;;AAEA,OAAO,IAAME,cAAc,GAAG;EAC5Bb,OAAO,EAAE,iBAACpB,GAAD,EAAcQ,GAAd,EAAyB;IAAA,OAAKwB,iBAAiB,GAAGZ,OAApBY,CAA4BhC,GAA5BgC,EAAiCxB,GAAjCwB,CAAL;EAA0C,CADhD;EAE5BX,OAAO,EAAE,iBAACrB,GAAD,EAAY;IAAA,OAAKgC,iBAAiB,GAAGX,OAApBW,CAA4BhC,GAA5BgC,CAAL;EAAqC,CAF9B;EAG5BT,UAAU,EAAE,oBAACvB,GAAD,EAAY;IAAA,OAAKgC,iBAAiB,GAAGT,UAApBS,CAA+BhC,GAA/BgC,CAAL;EAAwC,CAHpC;EAI5BP,KAAK,EAAE;IAAA,OAAMO,iBAAiB,GAAGP,KAApBO,EAAN;EAAiC,CAJZ;EAK5BpB,MAAM,EAAE;IAAA,OAAMoB,iBAAiB,GAAGpB,MAA1B;EAAgC,CALZ;EAM5BZ,GAAG,EAAE,aAACa,KAAD,EAAc;IAAA,OAAKmB,iBAAiB,GAAGhC,GAApBgC,CAAwBnB,KAAxBmB,CAAL;EAAmC,CAN1B;EAO5B3B,IAAI,kBAAa;IACf,IAAMqB,OAAO,GAAGM,iBAAiB,EAAjC;;IACA,IAAIN,OAAO,YAAY7B,aAAvB,EAAsC;MACpC,OAAO6B,OAAO,CAACrB,IAARqB,EAAP;IACD,CAFD,MAEO;MACL,OAAOtB,MAAM,CAACC,IAAPD,CAAYsB,OAAZtB,CAAP;IACF;EACD,CAd2B;EAe5BuB,eAAe,EAAE,yBAACC,MAAD,EAA8B;IAC7C,OAAOK,cAAc,CAAC5B,IAAf4B,GAAsBJ,MAAtBI,CAA6B,UAACjC,GAAD,EAAI;MAAA,OAAKA,GAAG,CAAC8B,UAAJ9B,CAAe4B,MAAf5B,CAAL;IAA2B,CAA5DiC,CAAP;EACF;AAjB4B,CAAvB","names":["CustomStorage","_classCallCheck","_defineProperty","key","_this","data","hasOwnProperty","Object","keys","_createClass","value","val","String","id","get","length","index","dummyKey","dummyContent","ls","getLocalStorage","window","localStorage","setItem","getItem","Error","removeItem","e","clear","storage","getPrefixedKeys","prefix","filter","startsWith","sessionStorageCache","getSessionStorage","sessionStorage"],"sources":["/Users/pitus_anonimous/Desktop/youth_bit_hack/youth_bit_vk/node_modules/@vkontakte/vkjs/src/storage.ts"],"sourcesContent":["import { Dictionary } from './types';\n\nclass CustomStorage {\n  private data: Dictionary<string> = {};\n\n  public setItem(key: string, val: string) {\n    this.data[key] = String(val);\n  }\n\n  public getItem = (key: string) => (this.data.hasOwnProperty(key) ? this.data[key] : null);\n\n  public removeItem(id: string) {\n    delete this.data[id];\n  }\n\n  public clear() {\n    this.data = {};\n  }\n\n  public get length() {\n    return Object.keys(this.data).length;\n  }\n\n  public key(index: number): string | null {\n    return Object.keys(this.data)[index];\n  }\n\n  public keys = (): string[] => Object.keys(this.data);\n}\n\nconst dummyKey = 'vk-ls-dummy';\nconst dummyContent = 'test';\n\nlet ls: CustomStorage | Storage;\n\nfunction getLocalStorage() {\n  if (ls) {\n    return ls;\n  }\n  try {\n    // Проверяем, нет ли в FF или Safari cross domain security restrictions\n    window.localStorage.setItem(dummyKey, dummyContent);\n    if (dummyContent !== window.localStorage.getItem(dummyKey)) {\n      throw new Error('localStorage is broken');\n    }\n    window.localStorage.removeItem(dummyKey);\n    ls = window.localStorage;\n  } catch (e) {\n    ls = new CustomStorage();\n  }\n  return ls;\n}\n\n/**\n * Обертка над localStorage для кода, который может использоваться на других сайтах\n * Firefox блокирует доступ к localStorage для скриптов с других доменов\n */\nexport const localStorage = {\n  setItem: (key: string, val: string) => getLocalStorage().setItem(key, val),\n  getItem: (key: string) => getLocalStorage().getItem(key),\n  removeItem: (key: string) => getLocalStorage().removeItem(key),\n  clear: () => getLocalStorage().clear(),\n  length: () => getLocalStorage().length,\n  key: (index: number) => getLocalStorage().key(index),\n  keys(): string[] {\n    const storage = getLocalStorage();\n    if (storage instanceof CustomStorage) {\n      return storage.keys();\n    } else {\n      return Object.keys(storage);\n    }\n  },\n  getPrefixedKeys: (prefix: string): string[] => {\n    return localStorage.keys().filter((key) => key.startsWith(prefix));\n  },\n};\n\nlet sessionStorageCache: CustomStorage | Storage;\n\nfunction getSessionStorage() {\n  if (sessionStorageCache) {\n    return sessionStorageCache;\n  }\n  try {\n    // Проверяем, нет ли в FF или Safari cross domain security restrictions\n    window.sessionStorage.setItem(dummyKey, dummyContent);\n    if (dummyContent !== window.sessionStorage.getItem(dummyKey)) {\n      throw new Error('sessionStorage is broken');\n    }\n    window.sessionStorage.removeItem(dummyKey);\n    sessionStorageCache = window.sessionStorage;\n  } catch (e) {\n    sessionStorageCache = new CustomStorage();\n  }\n  return sessionStorageCache;\n}\n\nexport const sessionStorage = {\n  setItem: (key: string, val: string) => getSessionStorage().setItem(key, val),\n  getItem: (key: string) => getSessionStorage().getItem(key),\n  removeItem: (key: string) => getSessionStorage().removeItem(key),\n  clear: () => getSessionStorage().clear(),\n  length: () => getSessionStorage().length,\n  key: (index: number) => getSessionStorage().key(index),\n  keys(): string[] {\n    const storage = getSessionStorage();\n    if (storage instanceof CustomStorage) {\n      return storage.keys();\n    } else {\n      return Object.keys(storage);\n    }\n  },\n  getPrefixedKeys: (prefix: string): string[] => {\n    return sessionStorage.keys().filter((key) => key.startsWith(prefix));\n  },\n};\n"]},"metadata":{},"sourceType":"module"}