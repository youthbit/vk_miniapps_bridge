{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport * as React from 'react';\nimport { useBooleanState } from './useBooleanState';\nimport { useGlobalEventListener } from './useGlobalEventListener';\nimport { useDOM } from '../lib/dom';\nexport function useDateInput(_ref) {\n  var maxElement = _ref.maxElement,\n      refs = _ref.refs,\n      autoFocus = _ref.autoFocus,\n      disabled = _ref.disabled,\n      elementsConfig = _ref.elementsConfig,\n      onChange = _ref.onChange,\n      onInternalValueChange = _ref.onInternalValueChange,\n      getInternalValue = _ref.getInternalValue,\n      value = _ref.value;\n\n  var _useDOM = useDOM(),\n      document = _useDOM.document;\n\n  var _useBooleanState = useBooleanState(false),\n      open = _useBooleanState.value,\n      openCalendar = _useBooleanState.setTrue,\n      closeCalendar = _useBooleanState.setFalse;\n\n  var rootRef = React.useRef(null);\n  var calendarRef = React.useRef(null);\n\n  var _React$useState = React.useState([]),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      internalValue = _React$useState2[0],\n      setInternalValue = _React$useState2[1];\n\n  var _React$useState3 = React.useState(null),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      focusedElement = _React$useState4[0],\n      setFocusedElement = _React$useState4[1];\n\n  var _useDOM2 = useDOM(),\n      window = _useDOM2.window;\n\n  var removeFocusFromField = React.useCallback(function () {\n    if (open) {\n      var _getSelection;\n\n      setFocusedElement(null);\n      closeCalendar();\n      (_getSelection = window.getSelection()) === null || _getSelection === void 0 ? void 0 : _getSelection.removeAllRanges();\n      setInternalValue(getInternalValue(value));\n    }\n  }, [closeCalendar, getInternalValue, open, value, window]);\n  var handleClickOutside = React.useCallback(function (e) {\n    var _rootRef$current, _calendarRef$current;\n\n    if (!((_rootRef$current = rootRef.current) !== null && _rootRef$current !== void 0 && _rootRef$current.contains(e.target)) && !((_calendarRef$current = calendarRef.current) !== null && _calendarRef$current !== void 0 && _calendarRef$current.contains(e.target))) {\n      removeFocusFromField();\n    }\n  }, [removeFocusFromField]);\n  var selectFirst = React.useCallback(function () {\n    setFocusedElement(0);\n  }, []);\n  useGlobalEventListener(document, 'click', handleClickOutside, {\n    capture: true\n  });\n  React.useEffect(function () {\n    setInternalValue(getInternalValue(value));\n  }, [getInternalValue, value]);\n  React.useEffect(function () {\n    if (autoFocus) {\n      selectFirst();\n    }\n  }, [autoFocus, selectFirst]);\n  React.useEffect(function () {\n    if (disabled || focusedElement === null) {\n      return;\n    }\n\n    var range = window.document.createRange();\n    var element = refs[focusedElement].current;\n\n    if (element) {\n      element.focus();\n      openCalendar();\n      range.selectNodeContents(element);\n      var selection = window.getSelection();\n      selection === null || selection === void 0 ? void 0 : selection.removeAllRanges();\n      selection === null || selection === void 0 ? void 0 : selection.addRange(range);\n    }\n  }, [disabled, focusedElement, openCalendar, refs, window]);\n  var clear = React.useCallback(function () {\n    onChange === null || onChange === void 0 ? void 0 : onChange(undefined);\n    selectFirst();\n  }, [onChange, selectFirst]);\n  var handleFieldEnter = React.useCallback(function () {\n    if (!open) {\n      selectFirst();\n    }\n  }, [open, selectFirst]);\n  var handleKeyDown = React.useCallback(function (e) {\n    if (focusedElement === null) {\n      return;\n    }\n\n    var _value = _toConsumableArray(internalValue);\n\n    var config = elementsConfig(focusedElement);\n\n    if (/^\\d+$/.test(e.key)) {\n      if (_value[focusedElement].length >= config.length) {\n        _value[focusedElement] = e.key;\n      } else {\n        _value[focusedElement] += e.key;\n\n        if (_value[focusedElement].length >= config.length && focusedElement < maxElement) {\n          setFocusedElement(focusedElement + 1);\n        }\n      }\n    } else if (e.key === 'Backspace') {\n      if (!_value[focusedElement]) {\n        setFocusedElement(focusedElement <= 0 ? maxElement : focusedElement - 1);\n      } else {\n        _value[focusedElement] = _value[focusedElement].slice(0, -1);\n      }\n    } else if (e.key === 'ArrowDown' || e.key === 'Down') {\n      var currentValue = Number(_value[focusedElement]);\n      _value[focusedElement] = String(currentValue <= config.min ? config.max : currentValue - 1).padStart(config.length, '0');\n    } else if (e.key === 'ArrowUp' || e.key === 'Up') {\n      var _currentValue = Number(_value[focusedElement]);\n\n      _value[focusedElement] = String(_currentValue >= config.max ? config.min : _currentValue + 1).padStart(config.length, '0');\n    } else if (e.key === 'Enter' || e.key === 'Tab' && focusedElement === maxElement || e.key === 'Tab' && e.shiftKey && focusedElement === 0) {\n      removeFocusFromField();\n      return;\n    } else if (e.key === 'ArrowLeft' || e.key === 'Left' || e.key === 'Tab' && e.shiftKey) {\n      setFocusedElement(focusedElement <= 0 ? maxElement : focusedElement - 1);\n    } else if (e.key === 'ArrowRight' || e.key === 'Right' || e.key === 'Tab') {\n      setFocusedElement(focusedElement >= maxElement ? 0 : focusedElement + 1);\n    } else if (e.key === 'Delete' || e.key === 'Del') {\n      _value[focusedElement] = '';\n    } else {\n      return;\n    }\n\n    e.preventDefault();\n    setInternalValue(_value);\n    onInternalValueChange(_value);\n  }, [elementsConfig, focusedElement, internalValue, maxElement, onInternalValueChange, removeFocusFromField]);\n  return {\n    rootRef: rootRef,\n    calendarRef: calendarRef,\n    open: open,\n    openCalendar: openCalendar,\n    closeCalendar: closeCalendar,\n    internalValue: internalValue,\n    focusedElement: focusedElement,\n    setFocusedElement: setFocusedElement,\n    handleKeyDown: handleKeyDown,\n    clear: clear,\n    handleFieldEnter: handleFieldEnter,\n    removeFocusFromField: removeFocusFromField\n  };\n}","map":{"version":3,"mappings":"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","names":["React","useBooleanState","useGlobalEventListener","useDOM","useDateInput","_ref","maxElement","refs","autoFocus","disabled","elementsConfig","onChange","onInternalValueChange","getInternalValue","value","document","open","openCalendar","setTrue","closeCalendar","setFalse","rootRef","useRef","calendarRef","useState","_React$useState2","internalValue","setInternalValue","_React$useState4","focusedElement","setFocusedElement","window","removeFocusFromField","useCallback","getSelection","_getSelection","removeAllRanges","handleClickOutside","e","current","_rootRef$current","contains","target","_calendarRef$current","selectFirst","capture","useEffect","range","createRange","element","focus","selectNodeContents","selection","addRange","clear","undefined","handleFieldEnter","handleKeyDown","_value","config","test","key","length","slice","currentValue","Number","String","min","max","padStart","shiftKey","preventDefault"],"sources":["/Users/pitus_anonimous/Desktop/youth_bit_hack/youth_bit_vk/node_modules/@vkontakte/vkui/src/hooks/useDateInput.ts"],"sourcesContent":["import * as React from 'react';\nimport { useBooleanState } from './useBooleanState';\nimport { useGlobalEventListener } from './useGlobalEventListener';\nimport { useDOM } from '../lib/dom';\n\nexport interface UseDateInputDependencies<T, D> {\n  maxElement: number;\n  refs: Array<React.RefObject<T>>;\n  autoFocus?: boolean;\n  disabled?: boolean;\n  value?: D;\n  elementsConfig(index: number): {\n    length: number;\n    min: number;\n    max: number;\n  };\n  onInternalValueChange(value: string[]): void;\n  getInternalValue(value?: D | undefined): string[];\n  onChange?(value?: D | undefined): void;\n}\n\nexport function useDateInput<T extends HTMLElement, D>({\n  maxElement,\n  refs,\n  autoFocus,\n  disabled,\n  elementsConfig,\n  onChange,\n  onInternalValueChange,\n  getInternalValue,\n  value,\n}: UseDateInputDependencies<T, D>) {\n  const { document } = useDOM();\n  const { value: open, setTrue: openCalendar, setFalse: closeCalendar } = useBooleanState(false);\n  const rootRef = React.useRef<HTMLDivElement>(null);\n  const calendarRef = React.useRef<HTMLDivElement>(null);\n  const [internalValue, setInternalValue] = React.useState<string[]>([]);\n  const [focusedElement, setFocusedElement] = React.useState<number | null>(null);\n  const { window } = useDOM();\n\n  const removeFocusFromField = React.useCallback(() => {\n    if (open) {\n      setFocusedElement(null);\n      closeCalendar();\n      window!.getSelection()?.removeAllRanges();\n      setInternalValue(getInternalValue(value));\n    }\n  }, [closeCalendar, getInternalValue, open, value, window]);\n\n  const handleClickOutside = React.useCallback(\n    (e: MouseEvent) => {\n      if (\n        !rootRef.current?.contains(e.target as Node | null) &&\n        !calendarRef.current?.contains(e.target as Node | null)\n      ) {\n        removeFocusFromField();\n      }\n    },\n    [removeFocusFromField],\n  );\n\n  const selectFirst = React.useCallback(() => {\n    setFocusedElement(0);\n  }, []);\n\n  useGlobalEventListener(document, 'click', handleClickOutside, {\n    capture: true,\n  });\n\n  React.useEffect(() => {\n    setInternalValue(getInternalValue(value));\n  }, [getInternalValue, value]);\n\n  React.useEffect(() => {\n    if (autoFocus) {\n      selectFirst();\n    }\n  }, [autoFocus, selectFirst]);\n\n  React.useEffect(() => {\n    if (disabled || focusedElement === null) {\n      return;\n    }\n\n    const range = window!.document.createRange();\n\n    let element = refs[focusedElement].current;\n\n    if (element) {\n      element.focus();\n      openCalendar();\n      range.selectNodeContents(element as Node);\n\n      const selection = window!.getSelection();\n      selection?.removeAllRanges();\n      selection?.addRange(range);\n    }\n  }, [disabled, focusedElement, openCalendar, refs, window]);\n\n  const clear = React.useCallback(() => {\n    onChange?.(undefined);\n    selectFirst();\n  }, [onChange, selectFirst]);\n\n  const handleFieldEnter = React.useCallback(() => {\n    if (!open) {\n      selectFirst();\n    }\n  }, [open, selectFirst]);\n\n  const handleKeyDown = React.useCallback(\n    (e: React.KeyboardEvent<HTMLSpanElement>) => {\n      if (focusedElement === null) {\n        return;\n      }\n\n      const _value = [...internalValue];\n      const config = elementsConfig(focusedElement);\n\n      if (/^\\d+$/.test(e.key)) {\n        if (_value[focusedElement].length >= config.length) {\n          _value[focusedElement] = e.key;\n        } else {\n          _value[focusedElement] += e.key;\n          if (_value[focusedElement].length >= config.length && focusedElement < maxElement) {\n            setFocusedElement(focusedElement + 1);\n          }\n        }\n      } else if (e.key === 'Backspace') {\n        if (!_value[focusedElement]) {\n          setFocusedElement(focusedElement <= 0 ? maxElement : focusedElement - 1);\n        } else {\n          _value[focusedElement] = _value[focusedElement].slice(0, -1);\n        }\n      } else if (e.key === 'ArrowDown' || e.key === 'Down') {\n        let currentValue = Number(_value[focusedElement]);\n        _value[focusedElement] = String(\n          currentValue <= config.min ? config.max : currentValue - 1,\n        ).padStart(config.length, '0');\n      } else if (e.key === 'ArrowUp' || e.key === 'Up') {\n        let currentValue = Number(_value[focusedElement]);\n        _value[focusedElement] = String(\n          currentValue >= config.max ? config.min : currentValue + 1,\n        ).padStart(config.length, '0');\n      } else if (\n        e.key === 'Enter' ||\n        (e.key === 'Tab' && focusedElement === maxElement) ||\n        (e.key === 'Tab' && e.shiftKey && focusedElement === 0)\n      ) {\n        removeFocusFromField();\n        return;\n      } else if (e.key === 'ArrowLeft' || e.key === 'Left' || (e.key === 'Tab' && e.shiftKey)) {\n        setFocusedElement(focusedElement <= 0 ? maxElement : focusedElement - 1);\n      } else if (e.key === 'ArrowRight' || e.key === 'Right' || e.key === 'Tab') {\n        setFocusedElement(focusedElement >= maxElement ? 0 : focusedElement + 1);\n      } else if (e.key === 'Delete' || e.key === 'Del') {\n        _value[focusedElement] = '';\n      } else {\n        return;\n      }\n\n      e.preventDefault();\n      setInternalValue(_value);\n      onInternalValueChange(_value);\n    },\n    [\n      elementsConfig,\n      focusedElement,\n      internalValue,\n      maxElement,\n      onInternalValueChange,\n      removeFocusFromField,\n    ],\n  );\n\n  return {\n    rootRef,\n    calendarRef,\n    open,\n    openCalendar,\n    closeCalendar,\n    internalValue,\n    focusedElement,\n    setFocusedElement,\n    handleKeyDown,\n    clear,\n    handleFieldEnter,\n    removeFocusFromField,\n  };\n}\n"]},"metadata":{},"sourceType":"module"}