{"ast":null,"code":"import _createForOfIteratorHelper from \"@babel/runtime/helpers/createForOfIteratorHelper\";\nimport { getTitleFromChildren } from './utils';\n\nvar findAllIncludes = function findAllIncludes() {\n  var target = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  var search = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var includes = [];\n  var i = target.indexOf(search);\n\n  while (i !== -1) {\n    includes.push(i);\n    i = target.indexOf(search, i + 1);\n  }\n\n  return includes;\n};\n\nvar letterRegexp; // На момент написания флаг u не поддерживался рядом браузеров, поэтому добавили фоллбэк.\n\ntry {\n  letterRegexp = new RegExp('\\\\p{L}', 'u');\n} catch (e) {}\n\nvar _getOptionLabel = function _getOptionLabel(option) {\n  return getTitleFromChildren(option.label);\n};\n\nexport var defaultFilterFn = function defaultFilterFn() {\n  var _getOptionLabel2;\n\n  var query = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  var option = arguments.length > 1 ? arguments[1] : undefined;\n  var getOptionLabel = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _getOptionLabel;\n  query = query.toLocaleLowerCase();\n  var label = (_getOptionLabel2 = getOptionLabel(option)) === null || _getOptionLabel2 === void 0 ? void 0 : _getOptionLabel2.toLocaleLowerCase();\n\n  if (label !== null && label !== void 0 && label.startsWith(query)) {\n    return true;\n  }\n\n  var includes = findAllIncludes(label, query); // Ищем вхождение перед началом которого не буква\n\n  if (letterRegexp && label) {\n    var _iterator = _createForOfIteratorHelper(includes),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var _index = _step.value;\n\n        if (!letterRegexp.test(label[_index - 1])) {\n          return true;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  } else {\n    // если regexp не поддерживается, то ищем любое вхождение\n    return includes.length > 0;\n  }\n\n  return false;\n};\nexport var getFormFieldModeFromSelectType = function getFormFieldModeFromSelectType() {\n  var selectType = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'default';\n  return selectType === 'default' ? 'default' : 'plain';\n};","map":{"version":3,"mappings":";AACA,SAASA,oBAAT,QAAqC,SAArC;;AAQA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,GAA8B;EAAA,IAA7BC,MAAM,uEAAG,EAAoB;EAAlB,IAAEC,MAAM,uEAAG,EAAX;EAClC,IAAMC,QAAQ,GAAG,EAAjB;EAEA,IAAIC,CAAC,GAAGH,MAAM,CAACI,OAAPJ,CAAeC,MAAfD,CAAR;;EACA,OAAOG,CAAC,KAAK,CAAC,CAAd,EAAiB;IACfD,QAAQ,CAACG,IAATH,CAAcC,CAAdD;IACAC,CAAC,GAAGH,MAAM,CAACI,OAAPJ,CAAeC,MAAfD,EAAuBG,CAAC,GAAG,CAA3BH,CAAJG;EACF;;EAEA,OAAOD,QAAP;AACD,CAVD;;AAYA,IAAII,YAAJ,C,CAEA;;AACA,IAAI;EACFA,YAAY,GAAG,IAAIC,MAAJ,CAAW,QAAX,EAAqB,GAArB,CAAfD;AACD,CAFD,CAEE,OAAOE,CAAP,EAAU,CAAC;;AAIb,IAAMC,eAA+B,GAAG,SAAlCA,eAAkC,CAACC,MAAD,EAAO;EAAA,OAAKZ,oBAAoB,CAACY,MAAM,CAACC,KAAR,CAAzB;AAAuC,CAAtF;;AAEA,OAAO,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,GAI1B;EAAA;;EAAA,IAHHC,KAAK,uEAAG,EAGL;EAHO,IACVH,MAAc,kDADJ;EACI,IACdI,cAA8B,uEAAGL,eADnB;EAGdI,KAAK,GAAGA,KAAK,CAACE,iBAANF,EAARA;EACA,IAAIF,KAAK,uBAAGG,cAAc,CAACJ,MAAD,CAAjB,MAAyB,IAAzB,IAAyBM,2BAAzB,GAAyB,MAAzB,GAAGA,iBAAwBD,iBAAxB,EAAZ;;EAEA,IAAIJ,KAAK,SAALA,SAAK,WAALA,SAAK,CAAEM,UAAPN,CAAkBE,KAAlBF,CAAJ,EAA8B;IAC5B,OAAO,IAAP;EACF;;EAEA,IAAMT,QAAQ,GAAGH,eAAe,CAACY,KAAD,EAAQE,KAAR,CAAhC,CARG,CAUH;;EACA,IAAIP,YAAY,IAAIK,KAApB,EAA2B;IAAA,2CACLT,QADK;IAAA,IACGgB,KADH;;IACG;MAA5B,oDAA8B;QAAA,IAAnBC,MAAK,cAAc;;QAC5B,IAAI,CAACb,YAAY,CAACc,IAAbd,CAAkBK,KAAK,CAACQ,MAAK,GAAG,CAAT,CAAvBb,CAAL,EAA0C;UACxC,OAAO,IAAP;QACF;MACF;IAAC,CAJ2B,CAI3B;MAAAe;IAAA,CAJ2B,SAI3B;MAAAA;IAAA;EACF,CAND,MAMO;IACL;IACA,OAAOnB,QAAQ,CAACoB,MAATpB,GAAkB,CAAzB;EACF;;EAEA,OAAO,KAAP;AACD,CA3BM;AA6BP,OAAO,IAAMqB,8BAA8B,GAAG,SAAjCA,8BAAiC,GAAwC;EAAA,IAAvCC,UAAsB,uEAAG,SAAc;EACpF,OAAOA,UAAU,KAAK,SAAfA,GAA2B,SAA3BA,GAAuC,OAA9C;AACD,CAFM","names":["getTitleFromChildren","findAllIncludes","target","search","includes","i","indexOf","push","letterRegexp","RegExp","e","_getOptionLabel","option","label","defaultFilterFn","query","getOptionLabel","toLocaleLowerCase","_getOptionLabel2","startsWith","_step","index","test","_iterator","length","getFormFieldModeFromSelectType","selectType"],"sources":["/Users/pitus_anonimous/Desktop/youth_bit_hack/youth_bit_vk/node_modules/@vkontakte/vkui/src/lib/select.ts"],"sourcesContent":["import * as React from 'react';\nimport { getTitleFromChildren } from './utils';\nimport { SelectType } from '../components/Select/Select';\n\ntype Option = {\n  label?: React.ReactElement | string;\n  [index: string]: any;\n};\n\nconst findAllIncludes = (target = '', search = '') => {\n  const includes = [];\n\n  let i = target.indexOf(search);\n  while (i !== -1) {\n    includes.push(i);\n    i = target.indexOf(search, i + 1);\n  }\n\n  return includes;\n};\n\nlet letterRegexp: RegExp;\n\n// На момент написания флаг u не поддерживался рядом браузеров, поэтому добавили фоллбэк.\ntry {\n  letterRegexp = new RegExp('\\\\p{L}', 'u');\n} catch (e) {}\n\ntype GetOptionLabel = (option: Option) => string | undefined;\n\nconst _getOptionLabel: GetOptionLabel = (option) => getTitleFromChildren(option.label);\n\nexport const defaultFilterFn = (\n  query = '',\n  option: Option,\n  getOptionLabel: GetOptionLabel = _getOptionLabel,\n) => {\n  query = query.toLocaleLowerCase();\n  let label = getOptionLabel(option)?.toLocaleLowerCase();\n\n  if (label?.startsWith(query)) {\n    return true;\n  }\n\n  const includes = findAllIncludes(label, query);\n\n  // Ищем вхождение перед началом которого не буква\n  if (letterRegexp && label) {\n    for (const index of includes) {\n      if (!letterRegexp.test(label[index - 1])) {\n        return true;\n      }\n    }\n  } else {\n    // если regexp не поддерживается, то ищем любое вхождение\n    return includes.length > 0;\n  }\n\n  return false;\n};\n\nexport const getFormFieldModeFromSelectType = (selectType: SelectType = 'default') => {\n  return selectType === 'default' ? 'default' : 'plain';\n};\n"]},"metadata":{},"sourceType":"module"}