{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"children\", \"className\", \"header\", \"text\", \"style\", \"iosCloseItem\", \"popupDirection\", \"popupOffsetDistance\"];\nimport * as React from 'react';\nimport { PopoutWrapper } from '../PopoutWrapper/PopoutWrapper';\nimport { Platform } from '../../lib/platform';\nimport { ActionSheetDropdownDesktop } from './ActionSheetDropdownDesktop';\nimport { ActionSheetDropdown } from './ActionSheetDropdown';\nimport { noop } from '@vkontakte/vkjs';\nimport { ActionSheetContext } from './ActionSheetContext';\nimport { Footnote } from '../Typography/Footnote/Footnote';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { useAdaptivityWithJSMediaQueries } from '../../hooks/useAdaptivityWithJSMediaQueries';\nimport { useObjectMemo } from '../../hooks/useObjectMemo';\nimport { useScrollLock } from '../AppRoot/ScrollContext';\n/**\n * @see https://vkcom.github.io/VKUI/#/ActionSheet\n */\n\nexport var ActionSheet = function ActionSheet(_ref) {\n  var children = _ref.children,\n      className = _ref.className,\n      header = _ref.header,\n      text = _ref.text,\n      style = _ref.style,\n      iosCloseItem = _ref.iosCloseItem,\n      _ref$popupDirection = _ref.popupDirection,\n      popupDirection = _ref$popupDirection === void 0 ? 'bottom' : _ref$popupDirection,\n      popupOffsetDistance = _ref.popupOffsetDistance,\n      restProps = _objectWithoutProperties(_ref, _excluded);\n\n  var platform = usePlatform();\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      closing = _React$useState2[0],\n      setClosing = _React$useState2[1];\n\n  var onClose = function onClose() {\n    return setClosing(true);\n  };\n\n  var _action = React.useRef(noop);\n\n  var afterClose = function afterClose() {\n    restProps.onClose();\n\n    _action.current();\n\n    _action.current = noop;\n  };\n\n  var _useAdaptivityWithJSM = useAdaptivityWithJSMediaQueries(),\n      isDesktop = _useAdaptivityWithJSM.isDesktop;\n\n  useScrollLock(!isDesktop);\n  var timeout = platform === Platform.IOS ? 300 : 200;\n\n  if (isDesktop) {\n    timeout = 0;\n  }\n\n  var fallbackTransitionFinish = useTimeout(afterClose, timeout);\n  React.useEffect(function () {\n    if (closing) {\n      fallbackTransitionFinish.set();\n    } else {\n      fallbackTransitionFinish.clear();\n    }\n  }, [closing, fallbackTransitionFinish]);\n  var onItemClick = React.useCallback(function (action, immediateAction, autoClose) {\n    return function (event) {\n      event.persist();\n      immediateAction && immediateAction(event);\n\n      if (autoClose) {\n        _action.current = function () {\n          return action && action(event);\n        };\n\n        setClosing(true);\n      } else {\n        action && action(event);\n      }\n    };\n  }, []);\n  var contextValue = useObjectMemo({\n    onItemClick: onItemClick,\n    isDesktop: isDesktop\n  });\n  var DropdownComponent = isDesktop ? ActionSheetDropdownDesktop : ActionSheetDropdown;\n  var dropdownProps = isDesktop ? Object.assign(restProps, {\n    popupOffsetDistance: popupOffsetDistance,\n    popupDirection: popupDirection\n  }) : restProps;\n  var actionSheet = /*#__PURE__*/React.createElement(ActionSheetContext.Provider, {\n    value: contextValue\n  }, /*#__PURE__*/React.createElement(DropdownComponent, _extends({\n    closing: closing,\n    timeout: timeout\n  }, dropdownProps, {\n    onClose: onClose,\n    className: isDesktop ? className : undefined,\n    style: isDesktop ? style : undefined\n  }), (header || text) && /*#__PURE__*/React.createElement(\"header\", {\n    className: \"vkuiActionSheet__header\"\n  }, header && /*#__PURE__*/React.createElement(Footnote, {\n    weight: \"2\",\n    className: \"vkuiActionSheet__title\"\n  }, header), text && /*#__PURE__*/React.createElement(Footnote, {\n    className: \"vkuiActionSheet__text\"\n  }, text)), children, platform === Platform.IOS && !isDesktop && iosCloseItem));\n\n  if (isDesktop) {\n    return actionSheet;\n  }\n\n  return /*#__PURE__*/React.createElement(PopoutWrapper, {\n    closing: closing,\n    alignY: \"bottom\",\n    className: className,\n    style: style,\n    onClick: onClose,\n    hasMask: true,\n    fixed: true\n  }, actionSheet);\n};","map":{"version":3,"mappings":";;;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,aAAT,QAA8B,gCAA9B;AACA,SAASC,QAAT,QAAyB,oBAAzB;AACA,SAASC,0BAAT,QAA2C,8BAA3C;AACA,SAASC,mBAAT,QAAoC,uBAApC;AACA,SAASC,IAAT,QAAqB,iBAArB;AACA,SAASC,kBAAT,QAAqD,sBAArD;AACA,SAASC,QAAT,QAAyB,iCAAzB;AACA,SAASC,WAAT,QAA4B,yBAA5B;AACA,SAASC,UAAT,QAA2B,wBAA3B;AACA,SAASC,+BAAT,QAAgD,6CAAhD;AACA,SAASC,aAAT,QAA8B,2BAA9B;AAEA,SAASC,aAAT,QAA8B,0BAA9B;AAkBA;AACA;AACA;;AACA,OAAO,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAAHC,IAAG,EAUH;EAAA,IATtBC,QAAQ,QAARA,QASsB;EAAA,IARtBC,SAAS,QAATA,SAQsB;EAAA,IAPtBC,MAAM,QAANA,MAOsB;EAAA,IANtBC,IAAI,QAAJA,IAMsB;EAAA,IALtBC,KAAK,QAALA,KAKsB;EAAA,IAJtBC,YAAY,QAAZA,YAIsB;EAAA,IAJVC,2BACZC,cAGsB;EAAA,IAHtBA,cAAc,oCAAG,QAAH,GAAWD,mBAGH;EAAA,IAFtBE,mBAAmB,QAAnBA,mBAEsB;EAAA,IADnBC,SAAS,4CACU;;EACtB,IAAMC,QAAQ,GAAGjB,WAAW,EAA5B;;EACA,sBAA8BR,KAAK,CAAC0B,QAAN1B,CAAe,KAAfA,CAA9B;EAAA,IAAmD2B,qDAAnD;EAAA,IAAOC,OAAO,sBAAd;EAAA,IAAgBC,UAAU,sBAA1B;;EACA,IAAMC,OAAO,GAAG,SAAVA,OAAU,GAAH;IAAA,OAASD,UAAU,CAAC,IAAD,CAAnB;EAAyB,CAAtC;;EACA,IAAME,OAAO,GAAG/B,KAAK,CAACgC,MAANhC,CAAaK,IAAbL,CAAhB;;EAEA,IAAMiC,UAAU,GAAG,SAAbA,UAAa,GAAM;IACvBT,SAAS,CAACM,OAAVN;;IACAO,OAAO,CAACG,OAARH;;IACAA,OAAO,CAACG,OAARH,GAAkB1B,IAAlB0B;EACD,CAJD;;EAMA,4BAAsBrB,+BAA+B,EAArD;EAAA,IAAQyB,SAAS,yBAATA,SAAR;;EAEAvB,aAAa,CAAC,CAACuB,SAAF,CAAbvB;EAEA,IAAIwB,OAAO,GAAGX,QAAQ,KAAKvB,QAAQ,CAACmC,GAAtBZ,GAA4B,GAA5BA,GAAkC,GAAhD;;EAEA,IAAIU,SAAJ,EAAe;IACbC,OAAO,GAAG,CAAVA;EACF;;EAEA,IAAME,wBAAwB,GAAG7B,UAAU,CAACwB,UAAD,EAAaG,OAAb,CAA3C;EACApC,KAAK,CAACuC,SAANvC,CAAgB,YAAM;IACpB,IAAI4B,OAAJ,EAAa;MACXU,wBAAwB,CAACE,GAAzBF;IACD,CAFD,MAEO;MACLA,wBAAwB,CAACG,KAAzBH;IACF;EACD,CANDtC,EAMG,CAAC4B,OAAD,EAAUU,wBAAV,CANHtC;EAQA,IAAM0C,WAAW,GAAG1C,KAAK,CAAC2C,WAAN3C,CAClB,UAAC4C,MAAD,EAASC,eAAT,EAA0BC,SAA1B,EAAmC;IAAA,OAAK,UAACC,KAAD,EAAW;MACjDA,KAAK,CAACC,OAAND;MACAF,eAAe,IAAIA,eAAe,CAACE,KAAD,CAAlCF;;MACA,IAAIC,SAAJ,EAAe;QACbf,OAAO,CAACG,OAARH,GAAkB;UAAA,OAAMa,MAAM,IAAIA,MAAM,CAACG,KAAD,CAAtB;QAA6B,CAA/ChB;;QACAF,UAAU,CAAC,IAAD,CAAVA;MACD,CAHD,MAGO;QACLe,MAAM,IAAIA,MAAM,CAACG,KAAD,CAAhBH;MACF;IACD,CATkC;EASlC,CAViB5C,EAWlB,EAXkBA,CAApB;EAaA,IAAMiD,YAAY,GAAGtC,aAAa,CAAC;IAAE+B,WAAW,EAAXA,WAAF;IAAeP,SAAS,EAATA;EAAf,CAAD,CAAlC;EAEA,IAAMe,iBAAiB,GAAGf,SAAS,GAAGhC,0BAAH,GAAgCC,mBAAnE;EAEA,IAAM+C,aAAa,GAAGhB,SAAS,GAC3BiB,MAAM,CAACC,MAAPD,CAAc5B,SAAd4B,EAAyB;IAAE7B,mBAAmB,EAAnBA,mBAAF;IAAuBD,cAAc,EAAdA;EAAvB,CAAzB8B,CAD2B,GAE3B5B,SAFJ;EAIA,IAAM8B,WAAW,gBACftD,oBAACM,kBAAkB,CAACiD,QAApB,EAA4B;IAACC,KAAK,EAAEP;EAAR,CAA5B,EAAiD,aAC/CjD,oBAACkD,iBAAD,EAAkBO;IAChB7B,OAAO,EAAEA,OADO;IAEhBQ,OAAO,EAAEA;EAFO,GAGZe,aAHY,EAGC;IACjBrB,OAAO,EAAEA,OADQ;IAEjBd,SAAS,EAAEmB,SAAS,GAAGnB,SAAH,GAAe0C,SAFlB;IAGjBvC,KAAK,EAAEgB,SAAS,GAAGhB,KAAH,GAAWuC;EAHV,CAHD,CAAlB,EAQG,CAACzC,MAAM,IAAIC,IAAX,KAAe,aACdlB;IAAQgB,SAAS;EAAjB,GACGC,MAAM,iBACLjB,oBAACO,QAAD,EAAS;IAACoD,MAAM,EAAC,GAAR;IAAY3C,SAAS;EAArB,CAAT,EACGC,MADH,CAFJ,EAMGC,IAAI,iBAAIlB,oBAACO,QAAD,EAAS;IAACS,SAAS;EAAV,CAAT,EAAmDE,IAAnD,CANX,CATJ,EAkBGH,QAlBH,EAmBGU,QAAQ,KAAKvB,QAAQ,CAACmC,GAAtBZ,IAA6B,CAACU,SAA9BV,IAA2CL,YAnB9C,CADF,CADF;;EA0BA,IAAIe,SAAJ,EAAe;IACb,OAAOmB,WAAP;EACF;;EAEA,oBACEtD,oBAACC,aAAD,EAAc;IACZ2B,OAAO,EAAEA,OADG;IAEZgC,MAAM,EAAC,QAFK;IAGZ5C,SAAS,EAAEA,SAHC;IAIZG,KAAK,EAAEA,KAJK;IAKZ0C,OAAO,EAAE/B,OALG;IAMZgC,OAAO,MANK;IAOZC,KAAK;EAPO,CAAd,EASGT,WATH,CADF;AAaD,CAzGM","names":["React","PopoutWrapper","Platform","ActionSheetDropdownDesktop","ActionSheetDropdown","noop","ActionSheetContext","Footnote","usePlatform","useTimeout","useAdaptivityWithJSMediaQueries","useObjectMemo","useScrollLock","ActionSheet","_ref","children","className","header","text","style","iosCloseItem","_ref$popupDirection","popupDirection","popupOffsetDistance","restProps","platform","useState","_React$useState2","closing","setClosing","onClose","_action","useRef","afterClose","current","isDesktop","timeout","IOS","fallbackTransitionFinish","useEffect","set","clear","onItemClick","useCallback","action","immediateAction","autoClose","event","persist","contextValue","DropdownComponent","dropdownProps","Object","assign","actionSheet","Provider","value","_extends","undefined","weight","alignY","onClick","hasMask","fixed"],"sources":["/Users/pitus_anonimous/Desktop/youth_bit_hack/youth_bit_vk/node_modules/@vkontakte/vkui/src/components/ActionSheet/ActionSheet.tsx"],"sourcesContent":["import * as React from 'react';\nimport { PopoutWrapper } from '../PopoutWrapper/PopoutWrapper';\nimport { Platform } from '../../lib/platform';\nimport { ActionSheetDropdownDesktop } from './ActionSheetDropdownDesktop';\nimport { ActionSheetDropdown } from './ActionSheetDropdown';\nimport { noop } from '@vkontakte/vkjs';\nimport { ActionSheetContext, ItemClickHandler } from './ActionSheetContext';\nimport { Footnote } from '../Typography/Footnote/Footnote';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { useAdaptivityWithJSMediaQueries } from '../../hooks/useAdaptivityWithJSMediaQueries';\nimport { useObjectMemo } from '../../hooks/useObjectMemo';\nimport { SharedDropdownProps } from './types';\nimport { useScrollLock } from '../AppRoot/ScrollContext';\nimport styles from './ActionSheet.module.css';\n\nexport interface ActionSheetProps\n  extends Pick<SharedDropdownProps, 'toggleRef' | 'popupDirection' | 'popupOffsetDistance'>,\n    React.HTMLAttributes<HTMLDivElement> {\n  header?: React.ReactNode;\n  text?: React.ReactNode;\n  /**\n   * Закрыть попап по клику снаружи.\n   */\n  onClose: VoidFunction;\n  /**\n   * Только iOS.\n   */\n  iosCloseItem: React.ReactNode;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/ActionSheet\n */\nexport const ActionSheet = ({\n  children,\n  className,\n  header,\n  text,\n  style,\n  iosCloseItem,\n  popupDirection = 'bottom',\n  popupOffsetDistance,\n  ...restProps\n}: ActionSheetProps) => {\n  const platform = usePlatform();\n  const [closing, setClosing] = React.useState(false);\n  const onClose = () => setClosing(true);\n  const _action = React.useRef(noop);\n\n  const afterClose = () => {\n    restProps.onClose();\n    _action.current();\n    _action.current = noop;\n  };\n\n  const { isDesktop } = useAdaptivityWithJSMediaQueries();\n\n  useScrollLock(!isDesktop);\n\n  let timeout = platform === Platform.IOS ? 300 : 200;\n\n  if (isDesktop) {\n    timeout = 0;\n  }\n\n  const fallbackTransitionFinish = useTimeout(afterClose, timeout);\n  React.useEffect(() => {\n    if (closing) {\n      fallbackTransitionFinish.set();\n    } else {\n      fallbackTransitionFinish.clear();\n    }\n  }, [closing, fallbackTransitionFinish]);\n\n  const onItemClick = React.useCallback<ItemClickHandler>(\n    (action, immediateAction, autoClose) => (event) => {\n      event.persist();\n      immediateAction && immediateAction(event);\n      if (autoClose) {\n        _action.current = () => action && action(event);\n        setClosing(true);\n      } else {\n        action && action(event);\n      }\n    },\n    [],\n  );\n  const contextValue = useObjectMemo({ onItemClick, isDesktop });\n\n  const DropdownComponent = isDesktop ? ActionSheetDropdownDesktop : ActionSheetDropdown;\n\n  const dropdownProps = isDesktop\n    ? Object.assign(restProps, { popupOffsetDistance, popupDirection })\n    : restProps;\n\n  const actionSheet = (\n    <ActionSheetContext.Provider value={contextValue}>\n      <DropdownComponent\n        closing={closing}\n        timeout={timeout}\n        {...dropdownProps}\n        onClose={onClose}\n        className={isDesktop ? className : undefined}\n        style={isDesktop ? style : undefined}\n      >\n        {(header || text) && (\n          <header className={styles['ActionSheet__header']}>\n            {header && (\n              <Footnote weight=\"2\" className={styles['ActionSheet__title']}>\n                {header}\n              </Footnote>\n            )}\n            {text && <Footnote className={styles['ActionSheet__text']}>{text}</Footnote>}\n          </header>\n        )}\n        {children}\n        {platform === Platform.IOS && !isDesktop && iosCloseItem}\n      </DropdownComponent>\n    </ActionSheetContext.Provider>\n  );\n\n  if (isDesktop) {\n    return actionSheet;\n  }\n\n  return (\n    <PopoutWrapper\n      closing={closing}\n      alignY=\"bottom\"\n      className={className}\n      style={style}\n      onClick={onClose}\n      hasMask\n      fixed\n    >\n      {actionSheet}\n    </PopoutWrapper>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}