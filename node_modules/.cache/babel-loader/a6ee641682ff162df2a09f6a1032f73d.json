{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _createForOfIteratorHelper from \"@babel/runtime/helpers/createForOfIteratorHelper\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"children\", \"targetRef\", \"scrollBoxRef\", \"placement\", \"fetching\", \"onPlacementChange\", \"offsetDistance\", \"sameWidth\", \"forcePortal\", \"autoHideScrollbar\", \"autoHideScrollbarDelay\", \"observableRefs\", \"className\"];\nimport * as React from 'react';\nimport { CustomScrollView } from '../CustomScrollView/CustomScrollView';\nimport { classNames, noop } from '@vkontakte/vkjs';\nimport { Popper } from '../Popper/Popper';\nimport { Spinner } from '../Spinner/Spinner';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\n\nvar calcIsTop = function calcIsTop(placement) {\n  return placement === null || placement === void 0 ? void 0 : placement.includes('top');\n};\n\nfunction getObserverModifier(element) {\n  return {\n    name: 'customSelectChildrenChange',\n    enabled: true,\n    phase: 'main',\n    fn: noop,\n    effect: function effect(_ref) {\n      var instance = _ref.instance;\n      var observer = new MutationObserver(instance.forceUpdate);\n      observer.observe(element, {\n        childList: true,\n        subtree: true\n      });\n      return function () {\n        observer.disconnect();\n      };\n    }\n  };\n}\n\nexport var CustomSelectDropdown = function CustomSelectDropdown(_ref2) {\n  var children = _ref2.children,\n      targetRef = _ref2.targetRef,\n      scrollBoxRef = _ref2.scrollBoxRef,\n      placement = _ref2.placement,\n      fetching = _ref2.fetching,\n      parentOnPlacementChange = _ref2.onPlacementChange,\n      _ref2$offsetDistance = _ref2.offsetDistance,\n      offsetDistance = _ref2$offsetDistance === void 0 ? 0 : _ref2$offsetDistance,\n      _ref2$sameWidth = _ref2.sameWidth,\n      sameWidth = _ref2$sameWidth === void 0 ? true : _ref2$sameWidth,\n      _ref2$forcePortal = _ref2.forcePortal,\n      forcePortal = _ref2$forcePortal === void 0 ? true : _ref2$forcePortal,\n      autoHideScrollbar = _ref2.autoHideScrollbar,\n      autoHideScrollbarDelay = _ref2.autoHideScrollbarDelay,\n      observableRefs = _ref2.observableRefs,\n      className = _ref2.className,\n      restProps = _objectWithoutProperties(_ref2, _excluded);\n\n  var _React$useState = React.useState(function () {\n    return calcIsTop(placement);\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      isTop = _React$useState2[0],\n      setIsTop = _React$useState2[1];\n\n  var _React$useState3 = React.useState([]),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      customModifiers = _React$useState4[0],\n      setCustomModifiers = _React$useState4[1];\n\n  useIsomorphicLayoutEffect(function () {\n    if (!observableRefs) {\n      return;\n    }\n\n    var customModifiers = [];\n\n    if (Array.isArray(observableRefs)) {\n      var _iterator = _createForOfIteratorHelper(observableRefs),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var ref = _step.value;\n\n          if (ref !== null && ref !== void 0 && ref.current) {\n            customModifiers.push(getObserverModifier(ref.current));\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    } else if (observableRefs.current) {\n      customModifiers.push(getObserverModifier(observableRefs.current));\n    }\n\n    setCustomModifiers(customModifiers);\n  }, [observableRefs]);\n  var onPlacementChange = React.useCallback(function (_ref3) {\n    var placement = _ref3.placement;\n    setIsTop(calcIsTop(placement));\n    parentOnPlacementChange === null || parentOnPlacementChange === void 0 ? void 0 : parentOnPlacementChange(placement);\n  }, [parentOnPlacementChange, setIsTop]);\n  return /*#__PURE__*/React.createElement(Popper, _extends({\n    targetRef: targetRef,\n    offsetDistance: offsetDistance,\n    sameWidth: sameWidth,\n    onPlacementChange: onPlacementChange,\n    placement: placement,\n    className: classNames(\"vkuiCustomSelectDropdown\", offsetDistance === 0 && (isTop ? \"vkuiCustomSelectDropdown--top\" : \"vkuiCustomSelectDropdown--bottom\"), sameWidth && \"vkuiCustomSelectDropdown--wide\", className),\n    forcePortal: forcePortal,\n    customModifiers: customModifiers\n  }, restProps), /*#__PURE__*/React.createElement(CustomScrollView, {\n    boxRef: scrollBoxRef,\n    className: \"vkuiCustomSelectDropdown__in\",\n    autoHideScrollbar: autoHideScrollbar,\n    autoHideScrollbarDelay: autoHideScrollbarDelay\n  }, fetching ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiCustomSelectDropdown__fetching\"\n  }, /*#__PURE__*/React.createElement(Spinner, {\n    size: \"small\"\n  })) : children));\n};","map":{"version":3,"mappings":"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","names":["React","CustomScrollView","classNames","noop","Popper","Spinner","useIsomorphicLayoutEffect","calcIsTop","placement","includes","getObserverModifier","element","name","enabled","phase","fn","effect","instance","observer","MutationObserver","forceUpdate","observe","childList","subtree","disconnect","CustomSelectDropdown","_ref2","children","targetRef","scrollBoxRef","fetching","parentOnPlacementChange","onPlacementChange","_ref2$offsetDistance","offsetDistance","_ref2$sameWidth","sameWidth","_ref2$forcePortal","forcePortal","autoHideScrollbar","autoHideScrollbarDelay","observableRefs","className","restProps","useState","_React$useState2","isTop","setIsTop","_React$useState4","customModifiers","setCustomModifiers","Array","isArray","_step","ref","current","push","_iterator","useCallback","_extends","boxRef","size"],"sources":["/Users/pitus_anonimous/Desktop/youth_bit_hack/youth_bit_vk/node_modules/@vkontakte/vkui/src/components/CustomSelectDropdown/CustomSelectDropdown.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Modifier } from 'react-popper';\nimport { CustomScrollView } from '../CustomScrollView/CustomScrollView';\nimport { TrackerOptionsProps } from '../CustomScrollView/useTrackerVisibility';\nimport { classNames, noop } from '@vkontakte/vkjs';\nimport { Popper, Placement } from '../Popper/Popper';\nimport { Spinner } from '../Spinner/Spinner';\nimport { HasRef } from '../../types';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nimport styles from './CustomSelectDropdown.module.css';\n\nexport interface CustomSelectDropdownProps\n  extends React.HTMLAttributes<HTMLElement>,\n    HasRef<HTMLDivElement>,\n    TrackerOptionsProps {\n  targetRef: React.RefObject<HTMLElement>;\n  placement?: Placement;\n  scrollBoxRef?: React.Ref<HTMLDivElement>;\n  observableRefs?: Array<React.RefObject<HTMLElement>> | React.RefObject<HTMLElement>;\n  fetching?: boolean;\n  offsetDistance?: number;\n  sameWidth?: boolean;\n  forcePortal?: boolean;\n  onPlacementChange?: (placement?: Placement) => void;\n}\n\nconst calcIsTop = (placement?: Placement) => placement?.includes('top');\n\nfunction getObserverModifier<T extends HTMLElement>(element: T): Modifier<string> {\n  return {\n    name: 'customSelectChildrenChange',\n    enabled: true,\n    phase: 'main',\n    fn: noop,\n    effect: ({ instance }) => {\n      const observer = new MutationObserver(instance.forceUpdate);\n\n      observer.observe(element, {\n        childList: true,\n        subtree: true,\n      });\n\n      return () => {\n        observer.disconnect();\n      };\n    },\n  };\n}\n\nexport const CustomSelectDropdown = ({\n  children,\n  targetRef,\n  scrollBoxRef,\n  placement,\n  fetching,\n  onPlacementChange: parentOnPlacementChange,\n  offsetDistance = 0,\n  sameWidth = true,\n  forcePortal = true,\n  autoHideScrollbar,\n  autoHideScrollbarDelay,\n  observableRefs,\n  className,\n  ...restProps\n}: CustomSelectDropdownProps) => {\n  const [isTop, setIsTop] = React.useState(() => calcIsTop(placement));\n  const [customModifiers, setCustomModifiers] = React.useState<Array<Modifier<string>>>([]);\n\n  useIsomorphicLayoutEffect(() => {\n    if (!observableRefs) {\n      return;\n    }\n    const customModifiers: Array<Modifier<string>> = [];\n\n    if (Array.isArray(observableRefs)) {\n      for (const ref of observableRefs) {\n        if (ref?.current) {\n          customModifiers.push(getObserverModifier(ref.current));\n        }\n      }\n    } else if (observableRefs.current) {\n      customModifiers.push(getObserverModifier(observableRefs.current));\n    }\n\n    setCustomModifiers(customModifiers);\n  }, [observableRefs]);\n\n  const onPlacementChange = React.useCallback(\n    ({ placement }: { placement?: Placement }) => {\n      setIsTop(calcIsTop(placement));\n      parentOnPlacementChange?.(placement);\n    },\n    [parentOnPlacementChange, setIsTop],\n  );\n\n  return (\n    <Popper\n      targetRef={targetRef}\n      offsetDistance={offsetDistance}\n      sameWidth={sameWidth}\n      onPlacementChange={onPlacementChange}\n      placement={placement}\n      className={classNames(\n        styles['CustomSelectDropdown'],\n        offsetDistance === 0 &&\n          (isTop ? styles['CustomSelectDropdown--top'] : styles['CustomSelectDropdown--bottom']),\n        sameWidth && styles['CustomSelectDropdown--wide'],\n        className,\n      )}\n      forcePortal={forcePortal}\n      customModifiers={customModifiers}\n      {...restProps}\n    >\n      <CustomScrollView\n        boxRef={scrollBoxRef}\n        className={styles['CustomSelectDropdown__in']}\n        autoHideScrollbar={autoHideScrollbar}\n        autoHideScrollbarDelay={autoHideScrollbarDelay}\n      >\n        {fetching ? (\n          <div className={styles['CustomSelectDropdown__fetching']}>\n            <Spinner size=\"small\" />\n          </div>\n        ) : (\n          children\n        )}\n      </CustomScrollView>\n    </Popper>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}