{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/objectSpread2\";\nimport * as React from 'react';\nimport { noop } from '@vkontakte/vkjs';\nimport { canUseDOM } from '../lib/dom';\nimport { useIsomorphicLayoutEffect } from '../lib/useIsomorphicLayoutEffect';\nexport function useEventListener(event, _cb, _options) {\n  var cbRef = React.useRef(_cb);\n  useIsomorphicLayoutEffect(function () {\n    cbRef.current = _cb;\n  }, [_cb]);\n  var cb = React.useCallback(function (e) {\n    return cbRef.current && cbRef.current(e);\n  }, []);\n  var detach = React.useRef(noop);\n  var remove = React.useCallback(function () {\n    detach.current();\n    detach.current = noop;\n  }, []);\n  var add = React.useCallback(function (el) {\n    if (!canUseDOM) {\n      return;\n    }\n\n    remove();\n\n    if (!el) {\n      return;\n    }\n\n    var options = _objectSpread({}, _options);\n\n    el.addEventListener(event, cb, options);\n\n    detach.current = function () {\n      return el.removeEventListener(event, cb, options);\n    };\n  }, [_options, cb, event, remove]);\n  React.useEffect(function () {\n    return remove;\n  }, [remove]);\n  return React.useMemo(function () {\n    return {\n      add: add,\n      remove: remove\n    };\n  }, [add, remove]);\n}","map":{"version":3,"mappings":";AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,IAAT,QAAqB,iBAArB;AACA,SAASC,SAAT,QAA0B,YAA1B;AACA,SAASC,yBAAT,QAA0C,kCAA1C;AAiBA,OAAO,SAASC,gBAAT,CACLC,KADK,EAELC,GAFK,EAGLC,QAHK,EAIgB;EACrB,IAAMC,KAAK,GAAGR,KAAK,CAACS,MAANT,CAAaM,GAAbN,CAAd;EACAG,yBAAyB,CAAC,YAAM;IAC9BK,KAAK,CAACE,OAANF,GAAgBF,GAAhBE;EACD,CAFwB,EAEtB,CAACF,GAAD,CAFsB,CAAzBH;EAGA,IAAMQ,EAAE,GAAGX,KAAK,CAACY,WAANZ,CAAkB,UAACa,CAAD,EAAO;IAAA,OAAKL,KAAK,CAACE,OAANF,IAAiBA,KAAK,CAACE,OAANF,CAAcK,CAAdL,CAAtB;EAAsC,CAA/DR,EAAiE,EAAjEA,CAAX;EAEA,IAAMc,MAAM,GAAGd,KAAK,CAACS,MAANT,CAAaC,IAAbD,CAAf;EACA,IAAMe,MAAM,GAAGf,KAAK,CAACY,WAANZ,CAAkB,YAAM;IACrCc,MAAM,CAACJ,OAAPI;IACAA,MAAM,CAACJ,OAAPI,GAAiBb,IAAjBa;EACD,CAHcd,EAGZ,EAHYA,CAAf;EAIA,IAAMgB,GAAG,GAAGhB,KAAK,CAACY,WAANZ,CACV,UAACiB,EAAD,EAAyC;IACvC,IAAI,CAACf,SAAL,EAAgB;MACd;IACF;;IACAa,MAAM;;IACN,IAAI,CAACE,EAAL,EAAS;MACP;IACF;;IACA,IAAMC,OAAO,qBAAQX,QAAR,CAAb;;IACAU,EAAE,CAACE,gBAAHF,CAAoBZ,KAApBY,EAA2BN,EAA3BM,EAA+BC,OAA/BD;;IACAH,MAAM,CAACJ,OAAPI,GAAiB;MAAA,OAAMG,EAAE,CAACG,mBAAHH,CAAuBZ,KAAvBY,EAA8BN,EAA9BM,EAAkCC,OAAlCD,CAAN;IAAgD,CAAjEH;EACD,CAZSd,EAaV,CAACO,QAAD,EAAWI,EAAX,EAAeN,KAAf,EAAsBU,MAAtB,CAbUf,CAAZ;EAeAA,KAAK,CAACqB,SAANrB,CAAgB;IAAA,OAAMe,MAAN;EAAY,CAA5Bf,EAA8B,CAACe,MAAD,CAA9Bf;EAEA,OAAOA,KAAK,CAACsB,OAANtB,CAAc;IAAA,OAAO;MAAEgB,GAAG,EAAHA,GAAF;MAAOD,MAAM,EAANA;IAAP,CAAP;EAAuB,CAArCf,EAAuC,CAACgB,GAAD,EAAMD,MAAN,CAAvCf,CAAP;AACF","names":["React","noop","canUseDOM","useIsomorphicLayoutEffect","useEventListener","event","_cb","_options","cbRef","useRef","current","cb","useCallback","e","detach","remove","add","el","options","addEventListener","removeEventListener","useEffect","useMemo"],"sources":["/Users/pitus_anonimous/Desktop/youth_bit_hack/youth_bit_vk/node_modules/@vkontakte/vkui/src/hooks/useEventListener.ts"],"sourcesContent":["import * as React from 'react';\nimport { noop } from '@vkontakte/vkjs';\nimport { canUseDOM } from '../lib/dom';\nimport { useIsomorphicLayoutEffect } from '../lib/useIsomorphicLayoutEffect';\n\ninterface EventListenerHandle {\n  add: (el: HTMLElement | Document | Window) => void;\n  remove: () => void;\n}\n\nexport function useEventListener<K extends keyof GlobalEventHandlersEventMap>(\n  event: K,\n  _cb: false | null | undefined | ((ev: GlobalEventHandlersEventMap[K]) => void),\n  _options?: AddEventListenerOptions,\n): EventListenerHandle;\nexport function useEventListener<E extends Event>(\n  event: string,\n  _cb: false | null | undefined | ((ev: E) => void),\n  _options?: AddEventListenerOptions,\n): EventListenerHandle;\nexport function useEventListener<E extends Event, K extends keyof GlobalEventHandlersEventMap>(\n  event: string | K,\n  _cb: false | null | undefined | ((ev: E) => void),\n  _options?: AddEventListenerOptions,\n): EventListenerHandle {\n  const cbRef = React.useRef(_cb);\n  useIsomorphicLayoutEffect(() => {\n    cbRef.current = _cb;\n  }, [_cb]);\n  const cb = React.useCallback((e: any) => cbRef.current && cbRef.current(e), []);\n\n  const detach = React.useRef(noop);\n  const remove = React.useCallback(() => {\n    detach.current();\n    detach.current = noop;\n  }, []);\n  const add = React.useCallback(\n    (el: HTMLElement | Document | Window) => {\n      if (!canUseDOM) {\n        return;\n      }\n      remove();\n      if (!el) {\n        return;\n      }\n      const options = { ..._options };\n      el.addEventListener(event, cb, options);\n      detach.current = () => el.removeEventListener(event, cb, options);\n    },\n    [_options, cb, event, remove],\n  );\n  React.useEffect(() => remove, [remove]);\n\n  return React.useMemo(() => ({ add, remove }), [add, remove]);\n}\n"]},"metadata":{},"sourceType":"module"}