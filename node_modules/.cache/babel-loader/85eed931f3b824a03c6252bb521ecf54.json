{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"action\", \"shown\", \"showDelay\", \"hideDelay\", \"offsetDistance\", \"content\", \"children\", \"style\", \"className\", \"getRef\", \"onShownChange\"];\nimport * as React from 'react';\nimport { useDOM } from '../../lib/dom';\nimport { classNames } from '@vkontakte/vkjs';\nimport { Popper } from '../Popper/Popper';\nimport { FocusTrap } from '../FocusTrap/FocusTrap';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { useExternRef } from '../../hooks/useExternRef';\nimport { useEventListener } from '../../hooks/useEventListener';\nimport { useGlobalEventListener } from '../../hooks/useGlobalEventListener';\nimport { usePatchChildrenRef } from '../../hooks/usePatchChildrenRef';\n/**\n * @see https://vkcom.github.io/VKUI/#/Popover\n */\n\nexport var Popover = function Popover(_ref) {\n  var _ref$action = _ref.action,\n      action = _ref$action === void 0 ? 'click' : _ref$action,\n      shownProp = _ref.shown,\n      _ref$showDelay = _ref.showDelay,\n      showDelay = _ref$showDelay === void 0 ? 150 : _ref$showDelay,\n      _ref$hideDelay = _ref.hideDelay,\n      hideDelay = _ref$hideDelay === void 0 ? 150 : _ref$hideDelay,\n      _ref$offsetDistance = _ref.offsetDistance,\n      offsetDistance = _ref$offsetDistance === void 0 ? 8 : _ref$offsetDistance,\n      content = _ref.content,\n      children = _ref.children,\n      styleProp = _ref.style,\n      className = _ref.className,\n      getRef = _ref.getRef,\n      onShownChange = _ref.onShownChange,\n      restProps = _objectWithoutProperties(_ref, _excluded);\n\n  var _useDOM = useDOM(),\n      document = _useDOM.document;\n\n  var hoverable = action === 'hover';\n  var hovered = React.useRef(false);\n\n  var _React$useState = React.useState(shownProp || false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      computedShown = _React$useState2[0],\n      setComputedShown = _React$useState2[1];\n\n  var _React$useState3 = React.useState(null),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      dropdownNode = _React$useState4[0],\n      setPopperNode = _React$useState4[1];\n\n  var shown = typeof shownProp === 'boolean' ? shownProp : computedShown;\n  var patchedPopperRef = useExternRef(setPopperNode, getRef);\n\n  var _usePatchChildrenRef = usePatchChildrenRef(children),\n      _usePatchChildrenRef2 = _slicedToArray(_usePatchChildrenRef, 2),\n      childRef = _usePatchChildrenRef2[0],\n      child = _usePatchChildrenRef2[1];\n\n  var setShown = function setShown(value) {\n    if (typeof shownProp !== 'boolean') {\n      setComputedShown(value);\n    }\n\n    typeof onShownChange === 'function' && onShownChange(value);\n  };\n\n  var showTimeout = useTimeout(function () {\n    return setShown(true);\n  }, showDelay);\n  var hideTimeout = useTimeout(function () {\n    return setShown(false);\n  }, hideDelay);\n\n  var handleTargetEnter = function handleTargetEnter() {\n    hovered.current = true;\n    hideTimeout.clear();\n    showTimeout.set();\n  };\n\n  var handleTargetClick = function handleTargetClick() {\n    if (hovered.current && shown) {\n      return;\n    }\n\n    setShown(!shown);\n  };\n\n  var handleTargetLeave = function handleTargetLeave() {\n    hovered.current = false;\n    showTimeout.clear();\n    hideTimeout.set();\n  };\n\n  var handleContentKeyDownEscape = function handleContentKeyDownEscape() {\n    setShown(false);\n  };\n\n  var handleOutsideClick = function handleOutsideClick(e) {\n    var _childRef$current;\n\n    if (dropdownNode && !((_childRef$current = childRef.current) !== null && _childRef$current !== void 0 && _childRef$current.contains(e.target)) && !dropdownNode.contains(e.target)) {\n      setShown(false);\n    }\n  };\n\n  useGlobalEventListener(document, 'click', handleOutsideClick);\n  var targetEnterListener = useEventListener('mouseenter', handleTargetEnter);\n  var targetClickEvent = useEventListener('click', handleTargetClick);\n  var targetLeaveListener = useEventListener('mouseleave', handleTargetLeave);\n  React.useEffect(function () {\n    if (!childRef.current) {\n      return;\n    }\n\n    targetClickEvent.add(childRef.current);\n  }, [childRef, targetClickEvent]);\n  React.useEffect(function () {\n    if (!childRef.current) {\n      return;\n    }\n\n    if (hoverable) {\n      targetEnterListener.add(childRef.current);\n      targetLeaveListener.add(childRef.current);\n    }\n\n    return function () {\n      targetEnterListener.remove();\n      targetLeaveListener.remove();\n    };\n  }, [childRef, hoverable, targetEnterListener, targetLeaveListener]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, child, shown && /*#__PURE__*/React.createElement(Popper, _extends({}, restProps, {\n    className: classNames(\"vkuiPopover\", className),\n    targetRef: childRef,\n    getRef: patchedPopperRef,\n    offsetDistance: offsetDistance,\n    style: // Reason: Typescript ругается на CSS Custom Properties в объекте\n    // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n    _objectSpread(_objectSpread({}, styleProp), {}, {\n      '--vkui_internal--popover_safe_zone_padding': \"\".concat(offsetDistance, \"px\")\n    }),\n    renderContent: function renderContent(_ref2) {\n      var wrapperClassName = _ref2.className;\n      return /*#__PURE__*/React.createElement(FocusTrap, {\n        className: wrapperClassName,\n        onClose: handleContentKeyDownEscape\n      }, content);\n    },\n    onMouseOver: hoverable ? hideTimeout.clear : undefined,\n    onMouseOut: hoverable ? handleTargetLeave : undefined\n  })));\n};","map":{"version":3,"mappings":"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","names":["React","useDOM","classNames","Popper","FocusTrap","useTimeout","useExternRef","useEventListener","useGlobalEventListener","usePatchChildrenRef","Popover","_ref","action","_ref$action","shownProp","shown","_ref$showDelay","showDelay","_ref$hideDelay","hideDelay","_ref$offsetDistance","offsetDistance","content","children","styleProp","style","className","getRef","onShownChange","restProps","document","hoverable","hovered","useRef","useState","_React$useState2","computedShown","setComputedShown","_React$useState4","dropdownNode","setPopperNode","patchedPopperRef","_usePatchChildrenRef2","childRef","child","setShown","value","showTimeout","hideTimeout","handleTargetEnter","current","clear","set","handleTargetClick","handleTargetLeave","handleContentKeyDownEscape","handleOutsideClick","e","_childRef$current","contains","target","targetEnterListener","targetClickEvent","targetLeaveListener","useEffect","add","remove","Fragment","_extends","targetRef","_objectSpread","renderContent","wrapperClassName","onClose","onMouseOver","undefined","onMouseOut"],"sources":["/Users/pitus_anonimous/Desktop/youth_bit_hack/youth_bit_vk/node_modules/@vkontakte/vkui/src/components/Popover/Popover.tsx"],"sourcesContent":["import * as React from 'react';\nimport { useDOM } from '../../lib/dom';\nimport { classNames } from '@vkontakte/vkjs';\nimport { PopperCommonProps, Popper } from '../Popper/Popper';\nimport { FocusTrap } from '../FocusTrap/FocusTrap';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { useExternRef } from '../../hooks/useExternRef';\nimport { useEventListener } from '../../hooks/useEventListener';\nimport { useGlobalEventListener } from '../../hooks/useGlobalEventListener';\nimport { usePatchChildrenRef } from '../../hooks/usePatchChildrenRef';\nimport styles from './Popover.module.css';\n\nexport interface PopoverProps extends Omit<PopperCommonProps, 'arrow' | 'arrowClassName'> {\n  /**\n   * Механика вызова всплывающего окна.\n   *\n   * - `\"click\"` – показывается/скрывается только при нажатии.\n   * - `\"hover\"` – помимо нажатия, будет показываться/скрывается при наведении/отведении мыши.\n   *\n   * > ⚠️`\"hover\"` на тач-устройствах будет работать как `\"click\"`, с одним лишь нюансом, что не будет закрываться\n   * > при повторном нажатии на целевой элемент. Для закрытия необходимо нажать на область вне целевого элемента\n   * > и выпадающего окна.\n   */\n  action?: 'click' | 'hover';\n  /**\n   * Если передан, то всплывающее окно будет показан/скрыт в зависимости от значения свойства.\n   */\n  shown?: boolean;\n  /**\n   * Количество миллисекунд, после которых произойдёт показ всплывающего окна.\n   *\n   * > Используется только для `action=\"hover\"` при наведении/отведении мыши.\n   */\n  showDelay?: number;\n  /**\n   * Количество миллисекунд, после которых произойдёт скрытие всплывающего окна.\n   *\n   * > Используется только для `action=\"hover\"` при наведении/отведении мыши.\n   */\n  hideDelay?: number;\n  /**\n   * Содержимое всплывающего окна.\n   */\n  content?: React.ReactNode;\n  /**\n   * Целевой элемент. Всплывающее окно появится возле него.\n   *\n   * > ⚠️ Если это пользовательский компонент, то он должен предоставлять параметры либо `getRootRef`, либо `ref` для получения ссылки на DOM-узел.\n   */\n  children?: React.ReactElement;\n  /**\n   * Вызывается при каждом изменении видимости всплывающего окна.\n   */\n  onShownChange?(shown: boolean): void;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Popover\n */\nexport const Popover = ({\n  action = 'click',\n  shown: shownProp,\n  showDelay = 150,\n  hideDelay = 150,\n  offsetDistance = 8,\n  content,\n  children,\n  style: styleProp,\n  className,\n  getRef,\n  onShownChange,\n  ...restProps\n}: PopoverProps) => {\n  const { document } = useDOM();\n\n  const hoverable = action === 'hover';\n  const hovered = React.useRef(false);\n  const [computedShown, setComputedShown] = React.useState(shownProp || false);\n  const [dropdownNode, setPopperNode] = React.useState<HTMLElement | null>(null);\n\n  const shown = typeof shownProp === 'boolean' ? shownProp : computedShown;\n\n  const patchedPopperRef = useExternRef<HTMLDivElement>(setPopperNode, getRef);\n\n  const [childRef, child] = usePatchChildrenRef(children);\n\n  const setShown = (value: boolean) => {\n    if (typeof shownProp !== 'boolean') {\n      setComputedShown(value);\n    }\n    typeof onShownChange === 'function' && onShownChange(value);\n  };\n\n  const showTimeout = useTimeout(() => setShown(true), showDelay);\n\n  const hideTimeout = useTimeout(() => setShown(false), hideDelay);\n\n  const handleTargetEnter = () => {\n    hovered.current = true;\n    hideTimeout.clear();\n    showTimeout.set();\n  };\n\n  const handleTargetClick = () => {\n    if (hovered.current && shown) {\n      return;\n    }\n    setShown(!shown);\n  };\n\n  const handleTargetLeave = () => {\n    hovered.current = false;\n    showTimeout.clear();\n    hideTimeout.set();\n  };\n\n  const handleContentKeyDownEscape = () => {\n    setShown(false);\n  };\n\n  const handleOutsideClick = (e: MouseEvent) => {\n    if (\n      dropdownNode &&\n      !childRef.current?.contains(e.target as Node) &&\n      !dropdownNode.contains(e.target as Node)\n    ) {\n      setShown(false);\n    }\n  };\n\n  useGlobalEventListener(document, 'click', handleOutsideClick);\n  const targetEnterListener = useEventListener('mouseenter', handleTargetEnter);\n  const targetClickEvent = useEventListener('click', handleTargetClick);\n  const targetLeaveListener = useEventListener('mouseleave', handleTargetLeave);\n\n  React.useEffect(() => {\n    if (!childRef.current) {\n      return;\n    }\n\n    targetClickEvent.add(childRef.current);\n  }, [childRef, targetClickEvent]);\n\n  React.useEffect(() => {\n    if (!childRef.current) {\n      return;\n    }\n\n    if (hoverable) {\n      targetEnterListener.add(childRef.current);\n      targetLeaveListener.add(childRef.current);\n    }\n\n    return () => {\n      targetEnterListener.remove();\n      targetLeaveListener.remove();\n    };\n  }, [childRef, hoverable, targetEnterListener, targetLeaveListener]);\n\n  return (\n    <React.Fragment>\n      {child}\n      {shown && (\n        <Popper\n          {...restProps}\n          className={classNames(styles['Popover'], className)}\n          targetRef={childRef}\n          getRef={patchedPopperRef}\n          offsetDistance={offsetDistance}\n          style={\n            // Reason: Typescript ругается на CSS Custom Properties в объекте\n            // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n            {\n              ...styleProp,\n              '--vkui_internal--popover_safe_zone_padding': `${offsetDistance}px`,\n            } as React.CSSProperties\n          }\n          renderContent={({ className: wrapperClassName }) => (\n            <FocusTrap className={wrapperClassName} onClose={handleContentKeyDownEscape}>\n              {content}\n            </FocusTrap>\n          )}\n          onMouseOver={hoverable ? hideTimeout.clear : undefined}\n          onMouseOut={hoverable ? handleTargetLeave : undefined}\n        />\n      )}\n    </React.Fragment>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}