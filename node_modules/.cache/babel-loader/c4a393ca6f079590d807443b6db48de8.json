{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"children\", \"layout\", \"action\", \"before\", \"after\", \"duration\", \"onActionClick\", \"onClose\", \"mode\", \"className\", \"subtitle\"];\nimport * as React from 'react';\nimport { Touch } from '../Touch/Touch';\nimport { classNames } from '@vkontakte/vkjs';\nimport { Platform } from '../../lib/platform';\nimport { rubber } from '../../lib/touch';\nimport { ViewWidth } from '../../lib/adaptivity';\nimport { Paragraph } from '../Typography/Paragraph/Paragraph';\nimport { Subhead } from '../Typography/Subhead/Subhead';\nimport { Button } from '../Button/Button';\nimport { AppRootPortal } from '../AppRoot/AppRootPortal';\nimport { useWaitTransitionFinish } from '../../hooks/useWaitTransitionFinish';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useAdaptivityWithJSMediaQueries } from '../../hooks/useAdaptivityWithJSMediaQueries';\nimport { useTimeout } from '../../hooks/useTimeout';\n/**\n * @see https://vkcom.github.io/VKUI/#/Snackbar\n */\n\nexport var Snackbar = function Snackbar(_ref) {\n  var children = _ref.children,\n      _ref$layout = _ref.layout,\n      layoutProps = _ref$layout === void 0 ? 'horizontal' : _ref$layout,\n      action = _ref.action,\n      before = _ref.before,\n      after = _ref.after,\n      _ref$duration = _ref.duration,\n      duration = _ref$duration === void 0 ? 4000 : _ref$duration,\n      onActionClick = _ref.onActionClick,\n      onClose = _ref.onClose,\n      _ref$mode = _ref.mode,\n      mode = _ref$mode === void 0 ? 'default' : _ref$mode,\n      className = _ref.className,\n      subtitle = _ref.subtitle,\n      restProps = _objectWithoutProperties(_ref, _excluded);\n\n  var platform = usePlatform();\n\n  var _useAdaptivityWithJSM = useAdaptivityWithJSMediaQueries(),\n      viewWidth = _useAdaptivityWithJSM.viewWidth;\n\n  var isDesktop = viewWidth >= ViewWidth.SMALL_TABLET;\n\n  var _useWaitTransitionFin = useWaitTransitionFinish(),\n      waitTransitionFinish = _useWaitTransitionFin.waitTransitionFinish;\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      closing = _React$useState2[0],\n      setClosing = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      touched = _React$useState4[0],\n      setTouched = _React$useState4[1];\n\n  var shiftXPercentRef = React.useRef(0);\n  var shiftXCurrentRef = React.useRef(0);\n  var bodyElRef = React.useRef(null);\n  var innerElRef = React.useRef(null);\n  var animationFrameRef = React.useRef(null);\n  var transitionFinishDurationFallback = platform === Platform.IOS ? 320 : 400;\n\n  var close = function close() {\n    setClosing(true);\n    waitTransitionFinish(innerElRef.current, function () {\n      onClose();\n    }, transitionFinishDurationFallback);\n  };\n\n  var handleActionClick = function handleActionClick(e) {\n    close();\n\n    if (action && typeof onActionClick === 'function') {\n      onActionClick(e);\n    }\n  };\n\n  var closeTimeout = useTimeout(close, duration);\n\n  var setBodyTransform = function setBodyTransform(percent) {\n    if (animationFrameRef.current !== null) {\n      cancelAnimationFrame(animationFrameRef.current);\n    }\n\n    animationFrameRef.current = requestAnimationFrame(function () {\n      if (bodyElRef.current) {\n        bodyElRef.current.style.transform = \"translate3d(\".concat(percent, \"%, 0, 0)\");\n      }\n    });\n  };\n\n  var onTouchStart = closeTimeout.clear;\n\n  var onTouchMoveX = function onTouchMoveX(event) {\n    var _bodyElRef$current$of, _bodyElRef$current;\n\n    var shiftX = event.shiftX,\n        originalEvent = event.originalEvent;\n    originalEvent.preventDefault();\n\n    if (!touched) {\n      setTouched(true);\n    }\n\n    shiftXPercentRef.current = shiftX / ((_bodyElRef$current$of = (_bodyElRef$current = bodyElRef.current) === null || _bodyElRef$current === void 0 ? void 0 : _bodyElRef$current.offsetWidth) !== null && _bodyElRef$current$of !== void 0 ? _bodyElRef$current$of : 0) * 100;\n    shiftXCurrentRef.current = rubber(shiftXPercentRef.current, 72, 1.2, platform !== Platform.IOS);\n    setBodyTransform(shiftXCurrentRef.current);\n  };\n\n  var onTouchEnd = function onTouchEnd(e) {\n    var callback;\n\n    if (touched) {\n      var shiftXCurrent = shiftXCurrentRef.current;\n      var expectTranslateY = shiftXCurrent / e.duration * 240 * 0.6;\n      shiftXCurrent = shiftXCurrent + expectTranslateY;\n\n      if (isDesktop && shiftXCurrent <= -50) {\n        closeTimeout.clear();\n        waitTransitionFinish(bodyElRef.current, function () {\n          onClose();\n        }, transitionFinishDurationFallback);\n        setBodyTransform(-120);\n      } else if (!isDesktop && shiftXCurrent >= 50) {\n        closeTimeout.clear();\n        waitTransitionFinish(bodyElRef.current, function () {\n          onClose();\n        }, transitionFinishDurationFallback);\n        setBodyTransform(120);\n      } else {\n        callback = function callback() {\n          closeTimeout.set();\n          setBodyTransform(0);\n        };\n      }\n    } else {\n      closeTimeout.set();\n    }\n\n    setTouched(false);\n    callback && requestAnimationFrame(callback);\n  };\n\n  React.useEffect(function () {\n    return closeTimeout.set();\n  }, [closeTimeout]);\n  var layout = after || isDesktop || subtitle ? 'vertical' : layoutProps;\n  return /*#__PURE__*/React.createElement(AppRootPortal, null, /*#__PURE__*/React.createElement(\"div\", _extends({}, restProps, {\n    className: classNames(\"vkuiSnackbar\", platform === Platform.IOS && \"vkuiSnackbar--ios\", styles[\"Snackbar--layout-\".concat(layout)], styles[\"Snackbar--mode-\".concat(mode)], closing && \"vkuiSnackbar--closing\", touched && \"vkuiSnackbar--touched\", isDesktop && \"vkuiSnackbar--desktop\", className)\n  }), /*#__PURE__*/React.createElement(Touch, {\n    className: \"vkuiSnackbar__in\",\n    getRootRef: innerElRef,\n    onStart: onTouchStart,\n    onMoveX: onTouchMoveX,\n    onEnd: onTouchEnd\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiSnackbar__body\",\n    ref: bodyElRef\n  }, before && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiSnackbar__before\"\n  }, before), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiSnackbar__content\"\n  }, /*#__PURE__*/React.createElement(Paragraph, {\n    className: \"vkuiSnackbar__content-text\"\n  }, children), subtitle && !action && /*#__PURE__*/React.createElement(Subhead, {\n    className: \"vkuiSnackbar__content-subtitle\"\n  }, subtitle), action && !subtitle && /*#__PURE__*/React.createElement(Button, {\n    align: \"left\",\n    mode: \"link\",\n    appearance: mode === 'dark' ? 'overlay' : 'accent',\n    size: \"s\",\n    className: \"vkuiSnackbar__action\",\n    onClick: handleActionClick\n  }, action)), after && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"vkuiSnackbar__after\"\n  }, after)))));\n};\nvar styles = {\n  \"Snackbar--layout-vertical\": \"vkuiSnackbar--layout-vertical\",\n  \"Snackbar--layout-horizontal\": \"vkuiSnackbar--layout-horizontal\",\n  \"Snackbar--mode-dark\": \"vkuiSnackbar--mode-dark\",\n  \"Snackbar--mode-default\": \"vkuiSnackbar--mode-default\"\n};","map":{"version":3,"mappings":"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","names":["React","Touch","classNames","Platform","rubber","ViewWidth","Paragraph","Subhead","Button","AppRootPortal","useWaitTransitionFinish","usePlatform","useAdaptivityWithJSMediaQueries","useTimeout","Snackbar","_ref","children","_ref$layout","layout","layoutProps","action","before","after","_ref$duration","duration","onActionClick","onClose","_ref$mode","mode","className","subtitle","restProps","platform","viewWidth","isDesktop","SMALL_TABLET","waitTransitionFinish","useState","_React$useState2","closing","setClosing","_React$useState4","touched","setTouched","shiftXPercentRef","useRef","shiftXCurrentRef","bodyElRef","innerElRef","animationFrameRef","transitionFinishDurationFallback","IOS","close","current","handleActionClick","e","closeTimeout","setBodyTransform","percent","cancelAnimationFrame","requestAnimationFrame","style","transform","onTouchStart","clear","onTouchMoveX","event","shiftX","originalEvent","preventDefault","_bodyElRef$current","offsetWidth","_bodyElRef$current$of","onTouchEnd","callback","shiftXCurrent","expectTranslateY","set","useEffect","styles","getRootRef","onStart","onMoveX","onEnd","ref","align","appearance","size","onClick"],"sources":["/Users/pitus_anonimous/Desktop/youth_bit_hack/youth_bit_vk/node_modules/@vkontakte/vkui/src/components/Snackbar/Snackbar.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Touch, TouchEvent } from '../Touch/Touch';\nimport { classNames } from '@vkontakte/vkjs';\nimport { Platform } from '../../lib/platform';\nimport { rubber } from '../../lib/touch';\nimport { ViewWidth } from '../../lib/adaptivity';\nimport { Paragraph } from '../Typography/Paragraph/Paragraph';\nimport { Subhead } from '../Typography/Subhead/Subhead';\nimport { Button } from '../Button/Button';\nimport { AppRootPortal } from '../AppRoot/AppRootPortal';\nimport { useWaitTransitionFinish } from '../../hooks/useWaitTransitionFinish';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useAdaptivityWithJSMediaQueries } from '../../hooks/useAdaptivityWithJSMediaQueries';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport styles from './Snackbar.module.css';\n\nexport interface SnackbarProps extends React.HTMLAttributes<HTMLElement> {\n  /**\n   * Название кнопки действия в уведомлении\n   * Не может использоваться одновременно с `subtitle`\n   */\n  action?: React.ReactNode;\n\n  /**\n   * Будет вызвано при клике на кнопку действия\n   */\n  onActionClick?: (e: React.MouseEvent) => void;\n\n  /**\n   * Цветная иконка 24x24 пикселя\n   */\n  before?: React.ReactNode;\n  /**\n   * Контент в правой части, может быть `<Avatar size={32} />`\n   */\n  after?: React.ReactNode;\n  /**\n   * Варианты расположения кнопки действия\n   * Игнорируется на десктопах и при наличии элементов `after` или `subtitle`\n   */\n  layout?: 'vertical' | 'horizontal';\n  /**\n   * Время в миллисекундах, через которое плашка скроется\n   */\n  duration?: number;\n  /**\n   * Обработчик закрытия уведомления\n   */\n  onClose: () => void;\n  /**\n   * Задает стиль снекбара\n   */\n  mode?: 'default' | 'dark';\n  /**\n   * Дополнительная строка текста под `children`.\n   * Не может использоваться одновременно с `action`\n   */\n  subtitle?: React.ReactNode;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Snackbar\n */\nexport const Snackbar = ({\n  children,\n  layout: layoutProps = 'horizontal',\n  action,\n  before,\n  after,\n  duration = 4000,\n  onActionClick,\n  onClose,\n  mode = 'default',\n  className,\n  subtitle,\n  ...restProps\n}: SnackbarProps) => {\n  const platform = usePlatform();\n  const { viewWidth } = useAdaptivityWithJSMediaQueries();\n  const isDesktop = viewWidth >= ViewWidth.SMALL_TABLET;\n  const { waitTransitionFinish } = useWaitTransitionFinish();\n\n  const [closing, setClosing] = React.useState(false);\n  const [touched, setTouched] = React.useState(false);\n\n  const shiftXPercentRef = React.useRef<number>(0);\n  const shiftXCurrentRef = React.useRef<number>(0);\n\n  const bodyElRef = React.useRef<HTMLDivElement | null>(null);\n  const innerElRef = React.useRef<HTMLDivElement | null>(null);\n\n  const animationFrameRef = React.useRef<ReturnType<typeof requestAnimationFrame> | null>(null);\n\n  const transitionFinishDurationFallback = platform === Platform.IOS ? 320 : 400;\n\n  const close = () => {\n    setClosing(true);\n    waitTransitionFinish(\n      innerElRef.current,\n      () => {\n        onClose();\n      },\n      transitionFinishDurationFallback,\n    );\n  };\n\n  const handleActionClick: React.MouseEventHandler<HTMLElement> = (e) => {\n    close();\n\n    if (action && typeof onActionClick === 'function') {\n      onActionClick(e);\n    }\n  };\n\n  const closeTimeout = useTimeout(close, duration);\n\n  const setBodyTransform = (percent: number) => {\n    if (animationFrameRef.current !== null) {\n      cancelAnimationFrame(animationFrameRef.current);\n    }\n    animationFrameRef.current = requestAnimationFrame(() => {\n      if (bodyElRef.current) {\n        bodyElRef.current.style.transform = `translate3d(${percent}%, 0, 0)`;\n      }\n    });\n  };\n\n  const onTouchStart = closeTimeout.clear;\n\n  const onTouchMoveX = (event: TouchEvent) => {\n    const { shiftX, originalEvent } = event;\n    originalEvent.preventDefault();\n\n    if (!touched) {\n      setTouched(true);\n    }\n\n    shiftXPercentRef.current = (shiftX / (bodyElRef.current?.offsetWidth ?? 0)) * 100;\n    shiftXCurrentRef.current = rubber(shiftXPercentRef.current, 72, 1.2, platform !== Platform.IOS);\n\n    setBodyTransform(shiftXCurrentRef.current);\n  };\n\n  const onTouchEnd = (e: TouchEvent) => {\n    let callback: VoidFunction | undefined;\n\n    if (touched) {\n      let shiftXCurrent = shiftXCurrentRef.current;\n      const expectTranslateY = (shiftXCurrent / e.duration) * 240 * 0.6;\n      shiftXCurrent = shiftXCurrent + expectTranslateY;\n\n      if (isDesktop && shiftXCurrent <= -50) {\n        closeTimeout.clear();\n        waitTransitionFinish(\n          bodyElRef.current,\n          () => {\n            onClose();\n          },\n          transitionFinishDurationFallback,\n        );\n        setBodyTransform(-120);\n      } else if (!isDesktop && shiftXCurrent >= 50) {\n        closeTimeout.clear();\n        waitTransitionFinish(\n          bodyElRef.current,\n          () => {\n            onClose();\n          },\n          transitionFinishDurationFallback,\n        );\n        setBodyTransform(120);\n      } else {\n        callback = () => {\n          closeTimeout.set();\n          setBodyTransform(0);\n        };\n      }\n    } else {\n      closeTimeout.set();\n    }\n\n    setTouched(false);\n    callback && requestAnimationFrame(callback);\n  };\n\n  React.useEffect(() => closeTimeout.set(), [closeTimeout]);\n\n  const layout = after || isDesktop || subtitle ? 'vertical' : layoutProps;\n\n  return (\n    <AppRootPortal>\n      <div\n        {...restProps}\n        className={classNames(\n          styles['Snackbar'],\n          platform === Platform.IOS && styles['Snackbar--ios'],\n          styles[`Snackbar--layout-${layout}`],\n          styles[`Snackbar--mode-${mode}`],\n          closing && styles['Snackbar--closing'],\n          touched && styles['Snackbar--touched'],\n          isDesktop && styles['Snackbar--desktop'],\n          className,\n        )}\n      >\n        <Touch\n          className={styles['Snackbar__in']}\n          getRootRef={innerElRef}\n          onStart={onTouchStart}\n          onMoveX={onTouchMoveX}\n          onEnd={onTouchEnd}\n        >\n          <div className={styles['Snackbar__body']} ref={bodyElRef}>\n            {before && <div className={styles['Snackbar__before']}>{before}</div>}\n\n            <div className={styles['Snackbar__content']}>\n              <Paragraph className={styles['Snackbar__content-text']}>{children}</Paragraph>\n              {subtitle && !action && (\n                <Subhead className={styles['Snackbar__content-subtitle']}>{subtitle}</Subhead>\n              )}\n\n              {action && !subtitle && (\n                <Button\n                  align=\"left\"\n                  mode=\"link\"\n                  appearance={mode === 'dark' ? 'overlay' : 'accent'}\n                  size=\"s\"\n                  className={styles['Snackbar__action']}\n                  onClick={handleActionClick}\n                >\n                  {action}\n                </Button>\n              )}\n            </div>\n\n            {after && <div className={styles['Snackbar__after']}>{after}</div>}\n          </div>\n        </Touch>\n      </div>\n    </AppRootPortal>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}