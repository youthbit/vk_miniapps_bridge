"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Replacer = void 0;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _regexp = require("../regexp");
var Replacer = /*#__PURE__*/function () {
  function Replacer(map) {
    (0, _classCallCheck2["default"])(this, Replacer);
    (0, _defineProperty2["default"])(this, "regexp", void 0);
    (0, _defineProperty2["default"])(this, "map", void 0);
    this.map = map;
  }
  (0, _createClass2["default"])(Replacer, [{
    key: "build",
    value: function build() {
      if (this.regexp) {
        return;
      }
      var groups = Object.keys(this.map).map(_regexp.escapeRegExp).sort(function (a, b) {
        return b.length - a.length;
      });
      var pattern = "(?:".concat(groups.join('|'), ")");
      this.regexp = new RegExp(pattern, 'g');
    }
  }, {
    key: "replace",
    value: function replace(string) {
      var _this = this;
      if (!string) {
        return '';
      }
      this.build();
      return string.replace(this.regexp, function (substring) {
        return _this.map[substring];
      });
    }
  }]);
  return Replacer;
}();
exports.Replacer = Replacer;
//# sourceMappingURL=replacer.js.map