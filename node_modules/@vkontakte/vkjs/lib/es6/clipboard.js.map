{"version":3,"file":"clipboard.js","names":["copyWithNavigator","text","navigator","clipboard","writeText","then","copyWithFakeElement","Promise","resolve","reject","textareaEl","document","createElement","range","createRange","value","style","position","contentEditable","body","appendChild","focus","select","selectNodeContents","selection","window","getSelection","removeAllRanges","addRange","setSelectionRange","successful","execCommand","Error","error","removeChild","copyTextToClipboard"],"sources":["../../src/clipboard.ts"],"sourcesContent":["function copyWithNavigator(text: string): Promise<boolean> {\n  return navigator.clipboard.writeText(text).then(() => true);\n}\n\nfunction copyWithFakeElement(text: string): Promise<boolean> {\n  return new Promise((resolve, reject) => {\n    const textareaEl = document.createElement('textarea');\n    const range = document.createRange();\n\n    textareaEl.value = text;\n    textareaEl.style.position = 'fixed'; // Avoid scrolling to bottom\n    textareaEl.contentEditable = 'true';\n\n    document.body.appendChild(textareaEl);\n\n    textareaEl.focus();\n    textareaEl.select();\n\n    range.selectNodeContents(textareaEl);\n\n    const selection = window.getSelection();\n    if (selection) {\n      selection.removeAllRanges();\n      selection.addRange(range);\n    }\n\n    textareaEl.setSelectionRange(0, 999999);\n\n    try {\n      const successful = document.execCommand('copy');\n      if (successful) {\n        resolve(true);\n      } else {\n        reject(new Error('copy failed'));\n      }\n    } catch (error) {\n      reject(error);\n    }\n\n    if (selection) {\n      selection.removeAllRanges();\n    }\n\n    document.body.removeChild(textareaEl);\n  });\n}\n\nexport function copyTextToClipboard(text: string): Promise<boolean> {\n  if (navigator.clipboard) {\n    return copyWithNavigator(text);\n  } else {\n    return copyWithFakeElement(text);\n  }\n}\n"],"mappings":"AAAA,SAASA,iBAAiB,CAACC,IAAY,EAAoB;EACzD,OAAOC,SAAS,CAACC,SAAS,CAACC,SAAS,CAACH,IAAI,CAAC,CAACI,IAAI,CAAC;IAAA,OAAM,IAAI;EAAA,EAAC;AAC7D;AAEA,SAASC,mBAAmB,CAACL,IAAY,EAAoB;EAC3D,OAAO,IAAIM,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;IACtC,IAAMC,UAAU,GAAGC,QAAQ,CAACC,aAAa,CAAC,UAAU,CAAC;IACrD,IAAMC,KAAK,GAAGF,QAAQ,CAACG,WAAW,EAAE;IAEpCJ,UAAU,CAACK,KAAK,GAAGd,IAAI;IACvBS,UAAU,CAACM,KAAK,CAACC,QAAQ,GAAG,OAAO,CAAC,CAAC;IACrCP,UAAU,CAACQ,eAAe,GAAG,MAAM;IAEnCP,QAAQ,CAACQ,IAAI,CAACC,WAAW,CAACV,UAAU,CAAC;IAErCA,UAAU,CAACW,KAAK,EAAE;IAClBX,UAAU,CAACY,MAAM,EAAE;IAEnBT,KAAK,CAACU,kBAAkB,CAACb,UAAU,CAAC;IAEpC,IAAMc,SAAS,GAAGC,MAAM,CAACC,YAAY,EAAE;IACvC,IAAIF,SAAS,EAAE;MACbA,SAAS,CAACG,eAAe,EAAE;MAC3BH,SAAS,CAACI,QAAQ,CAACf,KAAK,CAAC;IAC3B;IAEAH,UAAU,CAACmB,iBAAiB,CAAC,CAAC,EAAE,MAAM,CAAC;IAEvC,IAAI;MACF,IAAMC,UAAU,GAAGnB,QAAQ,CAACoB,WAAW,CAAC,MAAM,CAAC;MAC/C,IAAID,UAAU,EAAE;QACdtB,OAAO,CAAC,IAAI,CAAC;MACf,CAAC,MAAM;QACLC,MAAM,CAAC,IAAIuB,KAAK,CAAC,aAAa,CAAC,CAAC;MAClC;IACF,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdxB,MAAM,CAACwB,KAAK,CAAC;IACf;IAEA,IAAIT,SAAS,EAAE;MACbA,SAAS,CAACG,eAAe,EAAE;IAC7B;IAEAhB,QAAQ,CAACQ,IAAI,CAACe,WAAW,CAACxB,UAAU,CAAC;EACvC,CAAC,CAAC;AACJ;AAEA,OAAO,SAASyB,mBAAmB,CAAClC,IAAY,EAAoB;EAClE,IAAIC,SAAS,CAACC,SAAS,EAAE;IACvB,OAAOH,iBAAiB,CAACC,IAAI,CAAC;EAChC,CAAC,MAAM;IACL,OAAOK,mBAAmB,CAACL,IAAI,CAAC;EAClC;AACF"}