import _classCallCheck from "@babel/runtime/helpers/classCallCheck";
import _createClass from "@babel/runtime/helpers/createClass";
import _defineProperty from "@babel/runtime/helpers/defineProperty";
import { escapeRegExp } from '../regexp';
export var Replacer = /*#__PURE__*/function () {
  function Replacer(map) {
    _classCallCheck(this, Replacer);
    _defineProperty(this, "regexp", void 0);
    _defineProperty(this, "map", void 0);
    this.map = map;
  }
  _createClass(Replacer, [{
    key: "build",
    value: function build() {
      if (this.regexp) {
        return;
      }
      var groups = Object.keys(this.map).map(escapeRegExp).sort(function (a, b) {
        return b.length - a.length;
      });
      var pattern = "(?:".concat(groups.join('|'), ")");
      this.regexp = new RegExp(pattern, 'g');
    }
  }, {
    key: "replace",
    value: function replace(string) {
      var _this = this;
      if (!string) {
        return '';
      }
      this.build();
      return string.replace(this.regexp, function (substring) {
        return _this.map[substring];
      });
    }
  }]);
  return Replacer;
}();
//# sourceMappingURL=replacer.js.map