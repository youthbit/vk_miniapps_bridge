{"version":3,"file":"useCalendar.js","names":["React","subMonths","addMonths","isSameDay","isBefore","endOfDay","isAfter","startOfDay","useCalendar","value","disablePast","disableFuture","shouldDisableDate","onHeaderChange","onNextMonth","onPrevMonth","useState","Array","isArray","Date","viewDate","setViewDate","focusedDay","setFocusedDay","setPrevMonth","useCallback","setNextMonth","handleSetViewDate","isDayFocused","day","Boolean","isDayDisabled","now","disabled","resetSelectedDay","undefined"],"sources":["../../src/hooks/useCalendar.ts"],"sourcesContent":["import * as React from 'react';\nimport {\n  subMonths,\n  addMonths,\n  isSameDay,\n  isBefore,\n  endOfDay,\n  isAfter,\n  startOfDay,\n} from '../lib/date';\nimport { CalendarProps } from '../components/Calendar/Calendar';\n\nexport interface UseCalendarDependencies\n  extends Pick<CalendarProps, 'onHeaderChange' | 'onNextMonth' | 'onPrevMonth'> {\n  value?: Array<Date | null> | Date;\n  disablePast?: boolean;\n  disableFuture?: boolean;\n  shouldDisableDate?(value: Date): boolean;\n}\n\nexport function useCalendar({\n  value,\n  disablePast,\n  disableFuture,\n  shouldDisableDate,\n  onHeaderChange,\n  onNextMonth,\n  onPrevMonth,\n}: UseCalendarDependencies) {\n  const [viewDate, setViewDate] = React.useState(\n    (Array.isArray(value) ? value[0] : value) ?? new Date(),\n  );\n  const [focusedDay, setFocusedDay] = React.useState<Date>();\n\n  const setPrevMonth = React.useCallback(() => {\n    onPrevMonth?.();\n    setViewDate(subMonths(viewDate, 1));\n  }, [viewDate, onPrevMonth]);\n  const setNextMonth = React.useCallback(() => {\n    onNextMonth?.();\n    setViewDate(addMonths(viewDate, 1));\n  }, [viewDate, onNextMonth]);\n\n  const handleSetViewDate = React.useCallback(\n    (value: Date) => {\n      onHeaderChange?.(value);\n      setViewDate(value);\n    },\n    [onHeaderChange],\n  );\n\n  const isDayFocused = React.useCallback(\n    (day: Date) => Boolean(focusedDay && isSameDay(day, focusedDay)),\n    [focusedDay],\n  );\n\n  const isDayDisabled = React.useCallback(\n    (day: Date) => {\n      const now = new Date();\n      let disabled = false;\n      if (disablePast) {\n        disabled = isBefore(endOfDay(day), now);\n      }\n      if (disableFuture) {\n        disabled = isAfter(startOfDay(day), now);\n      }\n      if (shouldDisableDate) {\n        disabled = shouldDisableDate(day);\n      }\n\n      return disabled;\n    },\n    [disableFuture, disablePast, shouldDisableDate],\n  );\n\n  const resetSelectedDay = React.useCallback(() => {\n    setFocusedDay(undefined);\n  }, [setFocusedDay]);\n\n  return {\n    viewDate,\n    setViewDate: handleSetViewDate,\n    setPrevMonth,\n    setNextMonth,\n    focusedDay,\n    setFocusedDay,\n    isDayFocused,\n    isDayDisabled,\n    resetSelectedDay,\n  };\n}\n"],"mappings":";AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SACEC,SAAS,EACTC,SAAS,EACTC,SAAS,EACTC,QAAQ,EACRC,QAAQ,EACRC,OAAO,EACPC,UAAU,QACL,aAAa;AAWpB,OAAO,SAASC,WAAW,OAQC;EAAA;EAAA,IAP1BC,KAAK,QAALA,KAAK;IACLC,WAAW,QAAXA,WAAW;IACXC,aAAa,QAAbA,aAAa;IACbC,iBAAiB,QAAjBA,iBAAiB;IACjBC,cAAc,QAAdA,cAAc;IACdC,WAAW,QAAXA,WAAW;IACXC,WAAW,QAAXA,WAAW;EAEX,sBAAgCf,KAAK,CAACgB,QAAQ,UAC3CC,KAAK,CAACC,OAAO,CAACT,KAAK,CAAC,GAAGA,KAAK,CAAC,CAAC,CAAC,GAAGA,KAAK,yCAAK,IAAIU,IAAI,EAAE,CACxD;IAAA;IAFMC,QAAQ;IAAEC,WAAW;EAG5B,uBAAoCrB,KAAK,CAACgB,QAAQ,EAAQ;IAAA;IAAnDM,UAAU;IAAEC,aAAa;EAEhC,IAAMC,YAAY,GAAGxB,KAAK,CAACyB,WAAW,CAAC,YAAM;IAC3CV,WAAW,aAAXA,WAAW,uBAAXA,WAAW,EAAI;IACfM,WAAW,CAACpB,SAAS,CAACmB,QAAQ,EAAE,CAAC,CAAC,CAAC;EACrC,CAAC,EAAE,CAACA,QAAQ,EAAEL,WAAW,CAAC,CAAC;EAC3B,IAAMW,YAAY,GAAG1B,KAAK,CAACyB,WAAW,CAAC,YAAM;IAC3CX,WAAW,aAAXA,WAAW,uBAAXA,WAAW,EAAI;IACfO,WAAW,CAACnB,SAAS,CAACkB,QAAQ,EAAE,CAAC,CAAC,CAAC;EACrC,CAAC,EAAE,CAACA,QAAQ,EAAEN,WAAW,CAAC,CAAC;EAE3B,IAAMa,iBAAiB,GAAG3B,KAAK,CAACyB,WAAW,CACzC,UAAChB,KAAW,EAAK;IACfI,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAGJ,KAAK,CAAC;IACvBY,WAAW,CAACZ,KAAK,CAAC;EACpB,CAAC,EACD,CAACI,cAAc,CAAC,CACjB;EAED,IAAMe,YAAY,GAAG5B,KAAK,CAACyB,WAAW,CACpC,UAACI,GAAS;IAAA,OAAKC,OAAO,CAACR,UAAU,IAAInB,SAAS,CAAC0B,GAAG,EAAEP,UAAU,CAAC,CAAC;EAAA,GAChE,CAACA,UAAU,CAAC,CACb;EAED,IAAMS,aAAa,GAAG/B,KAAK,CAACyB,WAAW,CACrC,UAACI,GAAS,EAAK;IACb,IAAMG,GAAG,GAAG,IAAIb,IAAI,EAAE;IACtB,IAAIc,QAAQ,GAAG,KAAK;IACpB,IAAIvB,WAAW,EAAE;MACfuB,QAAQ,GAAG7B,QAAQ,CAACC,QAAQ,CAACwB,GAAG,CAAC,EAAEG,GAAG,CAAC;IACzC;IACA,IAAIrB,aAAa,EAAE;MACjBsB,QAAQ,GAAG3B,OAAO,CAACC,UAAU,CAACsB,GAAG,CAAC,EAAEG,GAAG,CAAC;IAC1C;IACA,IAAIpB,iBAAiB,EAAE;MACrBqB,QAAQ,GAAGrB,iBAAiB,CAACiB,GAAG,CAAC;IACnC;IAEA,OAAOI,QAAQ;EACjB,CAAC,EACD,CAACtB,aAAa,EAAED,WAAW,EAAEE,iBAAiB,CAAC,CAChD;EAED,IAAMsB,gBAAgB,GAAGlC,KAAK,CAACyB,WAAW,CAAC,YAAM;IAC/CF,aAAa,CAACY,SAAS,CAAC;EAC1B,CAAC,EAAE,CAACZ,aAAa,CAAC,CAAC;EAEnB,OAAO;IACLH,QAAQ,EAARA,QAAQ;IACRC,WAAW,EAAEM,iBAAiB;IAC9BH,YAAY,EAAZA,YAAY;IACZE,YAAY,EAAZA,YAAY;IACZJ,UAAU,EAAVA,UAAU;IACVC,aAAa,EAAbA,aAAa;IACbK,YAAY,EAAZA,YAAY;IACZG,aAAa,EAAbA,aAAa;IACbG,gBAAgB,EAAhBA;EACF,CAAC;AACH"}