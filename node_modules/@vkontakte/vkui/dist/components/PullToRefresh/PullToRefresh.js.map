{"version":3,"file":"PullToRefresh.js","names":["React","useDOM","classNames","Platform","runTapticImpactOccurred","useIsomorphicLayoutEffect","usePlatform","useGlobalEventListener","useScroll","Touch","FixedLayout","PullToRefreshSpinner","TouchRootContext","usePrevious","useTimeout","clamp","cancelEvent","event","originalEvent","preventDefault","cancelable","stopPropagation","TOUCH_MOVE_EVENT_PARAMS","passive","PullToRefresh","children","isFetching","onRefresh","className","restProps","platform","scroll","document","prevIsFetching","initParams","useMemo","start","IOS","max","maxY","refreshing","positionMultiplier","useState","spinnerY","setSpinnerY","watching","setWatching","setRefreshing","canRefresh","setCanRefresh","touchDown","setTouchDown","prevTouchDown","touchY","useRef","contentShift","setContentShift","spinnerProgress","setSpinnerProgress","onWindowTouchMove","resetRefreshingState","useCallback","onRefreshingFinish","setWaitFetchingTimeout","set","clearWaitFetchingTimeout","clear","undefined","runRefreshing","prevSpinnerY","onTouchStart","e","onTouchMove","isY","shiftY","pageYOffset","getScroll","y","shift","Math","current","currentY","progress","abs","onTouchEnd","spinnerTransform","contentTransform","transform","WebkitTransform","opacity"],"sources":["../../../src/components/PullToRefresh/PullToRefresh.tsx"],"sourcesContent":["import * as React from 'react';\nimport { AnyFunction } from '../../types';\nimport { DOMProps, useDOM } from '../../lib/dom';\nimport { classNames } from '@vkontakte/vkjs';\nimport { Platform } from '../../lib/platform';\nimport { runTapticImpactOccurred } from '../../lib/taptic';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useGlobalEventListener } from '../../hooks/useGlobalEventListener';\nimport { ScrollContextInterface, useScroll } from '../AppRoot/ScrollContext';\nimport { Touch, TouchEvent, TouchProps } from '../Touch/Touch';\nimport { FixedLayout } from '../FixedLayout/FixedLayout';\nimport { PullToRefreshSpinner } from './PullToRefreshSpinner';\nimport TouchRootContext from '../Touch/TouchContext';\nimport { usePrevious } from '../../hooks/usePrevious';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { clamp } from '../../helpers/math';\nimport styles from './PullToRefresh.module.css';\n\nfunction cancelEvent(event: any) {\n  if (!event) {\n    return false;\n  }\n  while (event.originalEvent) {\n    event = event.originalEvent;\n  }\n  if (event.preventDefault && event.cancelable) {\n    event.preventDefault();\n  }\n  if (event.stopPropagation) {\n    event.stopPropagation();\n  }\n  return false;\n}\n\nexport interface PullToRefreshProps extends DOMProps, TouchProps {\n  /**\n   * Будет вызвана для обновления контента (прим.: функция должна быть мемоизированным коллбэком)\n   */\n  onRefresh: AnyFunction;\n  /**\n   * Определяет, выполняется ли обновление. Для скрытия спиннера после получения контента необходимо передать `false`\n   */\n  isFetching?: boolean;\n  /** @ignore */\n  scroll?: ScrollContextInterface;\n  children?: React.ReactNode;\n}\n\nconst TOUCH_MOVE_EVENT_PARAMS = {\n  cancelable: true,\n  passive: false,\n};\n\n/**\n * @see https://vkcom.github.io/VKUI/#/PullToRefresh\n */\nexport const PullToRefresh = ({\n  children,\n  isFetching,\n  onRefresh,\n  className,\n  ...restProps\n}: PullToRefreshProps) => {\n  const platform = usePlatform();\n  const scroll = useScroll();\n  const { document } = useDOM();\n  const prevIsFetching = usePrevious(isFetching);\n\n  const initParams = React.useMemo(\n    () => ({\n      start: platform === Platform.IOS ? -10 : -45,\n      max: platform === Platform.IOS ? 50 : 80,\n      maxY: platform === Platform.IOS ? 400 : 80,\n      refreshing: platform === Platform.IOS ? 36 : 50,\n      positionMultiplier: platform === Platform.IOS ? 0.21 : 1,\n    }),\n    [platform],\n  );\n\n  const [spinnerY, setSpinnerY] = React.useState(initParams.start);\n  const [watching, setWatching] = React.useState(false);\n  const [refreshing, setRefreshing] = React.useState(false);\n  const [canRefresh, setCanRefresh] = React.useState(false);\n  const [touchDown, setTouchDown] = React.useState(false);\n  const prevTouchDown = usePrevious(touchDown);\n\n  const touchY = React.useRef(0);\n  const [contentShift, setContentShift] = React.useState(0);\n  const [spinnerProgress, setSpinnerProgress] = React.useState(0);\n\n  const onWindowTouchMove = (event: Event) => {\n    if (refreshing) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  };\n\n  useGlobalEventListener(document, 'touchmove', onWindowTouchMove, TOUCH_MOVE_EVENT_PARAMS);\n\n  const resetRefreshingState = React.useCallback(() => {\n    setWatching(false);\n    setCanRefresh(false);\n    setRefreshing(false);\n    setSpinnerY(initParams.start);\n    setSpinnerProgress(0);\n    setContentShift(0);\n  }, [initParams]);\n\n  const onRefreshingFinish = React.useCallback(() => {\n    if (!touchDown) {\n      resetRefreshingState();\n    }\n  }, [touchDown, resetRefreshingState]);\n\n  const { set: setWaitFetchingTimeout, clear: clearWaitFetchingTimeout } = useTimeout(\n    onRefreshingFinish,\n    1000,\n  );\n\n  useIsomorphicLayoutEffect(() => {\n    if (prevIsFetching !== undefined && prevIsFetching && !isFetching) {\n      onRefreshingFinish();\n    }\n  }, [prevIsFetching, isFetching, onRefreshingFinish]);\n\n  useIsomorphicLayoutEffect(() => {\n    if (prevIsFetching !== undefined && !prevIsFetching && isFetching) {\n      clearWaitFetchingTimeout();\n    }\n  }, [isFetching, prevIsFetching, clearWaitFetchingTimeout]);\n\n  const runRefreshing = React.useCallback(() => {\n    if (!refreshing && onRefresh) {\n      // cleanup if the consumer does not start fetching in 1s\n      setWaitFetchingTimeout();\n\n      setRefreshing(true);\n      setSpinnerY((prevSpinnerY) =>\n        platform === Platform.IOS ? prevSpinnerY : initParams.refreshing,\n      );\n\n      onRefresh();\n      runTapticImpactOccurred('light');\n    }\n  }, [refreshing, onRefresh, setWaitFetchingTimeout, platform, initParams.refreshing]);\n\n  useIsomorphicLayoutEffect(() => {\n    if (prevTouchDown !== undefined && prevTouchDown && !touchDown) {\n      if (!refreshing && canRefresh) {\n        runRefreshing();\n      } else if (refreshing && !isFetching) {\n        // only iOS can start refresh before gesture end\n        resetRefreshingState();\n      } else {\n        // refreshing && isFetching: refresh in progress\n        // OR !refreshing && !canRefresh: pull was not strong enough\n        setSpinnerY(refreshing ? initParams.refreshing : initParams.start);\n        setSpinnerProgress(0);\n        setContentShift(0);\n      }\n    }\n  }, [\n    initParams,\n    prevIsFetching,\n    isFetching,\n    onRefreshingFinish,\n    prevTouchDown,\n    touchDown,\n    refreshing,\n    canRefresh,\n    runRefreshing,\n  ]);\n\n  const onTouchStart = (e: TouchEvent) => {\n    if (refreshing) {\n      cancelEvent(e);\n    }\n    setTouchDown(true);\n  };\n\n  const onTouchMove = (e: TouchEvent) => {\n    const { isY, shiftY } = e;\n    const { start, max } = initParams;\n    const pageYOffset = scroll?.getScroll().y;\n\n    if (watching && touchDown) {\n      cancelEvent(e);\n\n      const { positionMultiplier, maxY } = initParams;\n\n      const shift = Math.max(0, shiftY - touchY.current);\n\n      const currentY = clamp(start + shift * positionMultiplier, start, maxY);\n      const progress = currentY > -10 ? Math.abs((currentY + 10) / max) * 80 : 0;\n\n      setSpinnerY(currentY);\n      setSpinnerProgress(clamp(progress, 0, 80));\n      setCanRefresh(progress > 80);\n      setContentShift((currentY + 10) * 2.3);\n\n      if (progress > 85 && !refreshing && platform === Platform.IOS) {\n        runRefreshing();\n      }\n    } else if (isY && pageYOffset === 0 && shiftY > 0 && !refreshing && touchDown) {\n      cancelEvent(e);\n\n      touchY.current = shiftY;\n      setWatching(true);\n      setSpinnerY(start);\n      setSpinnerProgress(0);\n    }\n  };\n\n  const onTouchEnd = () => {\n    setWatching(false);\n    setTouchDown(false);\n  };\n\n  const spinnerTransform = `translate3d(0, ${spinnerY}px, 0)`;\n  let contentTransform = '';\n\n  if (platform === Platform.IOS && refreshing && !touchDown) {\n    contentTransform = 'translate3d(0, 100px, 0)';\n  } else if (platform === Platform.IOS && (contentShift || refreshing)) {\n    contentTransform = `translate3d(0, ${contentShift}px, 0)`;\n  }\n\n  return (\n    <TouchRootContext.Provider value={true}>\n      <Touch\n        {...restProps}\n        onStart={onTouchStart}\n        onMove={onTouchMove}\n        onEnd={onTouchEnd}\n        className={classNames(\n          styles['PullToRefresh'],\n          platform === Platform.IOS && styles['PullToRefresh--ios'],\n          watching && styles['PullToRefresh--watching'],\n          refreshing && styles['PullToRefresh--refreshing'],\n          className,\n        )}\n      >\n        <FixedLayout className={styles['PullToRefresh__controls']}>\n          <PullToRefreshSpinner\n            style={{\n              transform: spinnerTransform,\n              WebkitTransform: spinnerTransform,\n              opacity: watching || refreshing || canRefresh ? 1 : 0,\n            }}\n            on={refreshing}\n            progress={refreshing ? undefined : spinnerProgress}\n          />\n        </FixedLayout>\n\n        <div\n          className={styles['PullToRefresh__content']}\n          style={{\n            transform: contentTransform,\n            WebkitTransform: contentTransform,\n          }}\n        >\n          {children}\n        </div>\n      </Touch>\n    </TouchRootContext.Provider>\n  );\n};\n"],"mappings":"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"}