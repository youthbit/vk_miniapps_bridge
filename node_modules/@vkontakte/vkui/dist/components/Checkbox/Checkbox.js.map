{"version":3,"file":"Checkbox.js","names":["React","ACTIVE_EFFECT_DELAY","Tappable","classNames","hasReactNode","Platform","Icon20CheckBoxOn","Icon24CheckBoxOn","Icon20CheckBoxOff","Icon24CheckBoxOff","Icon20CheckBoxIndetermanate","usePlatform","Footnote","getSizeYClassName","useAdaptivity","useExternRef","useAdaptivityConditionalRender","VisuallyHiddenInput","warnOnce","warn","Checkbox","children","className","style","getRootRef","getRef","description","indeterminate","defaultIndeterminate","onChange","restProps","inputRef","platform","sizeY","adaptiveSizeY","useEffect","indeterminateValue","undefined","current","Boolean","handleChange","useCallback","event","checked","process","env","NODE_ENV","defaultChecked","VKCOM","disabled","IOS","compact","regular"],"sources":["../../../src/components/Checkbox/Checkbox.tsx"],"sourcesContent":["import * as React from 'react';\nimport { ACTIVE_EFFECT_DELAY, Tappable } from '../Tappable/Tappable';\nimport { classNames, hasReactNode } from '@vkontakte/vkjs';\nimport { Platform } from '../../lib/platform';\nimport {\n  Icon20CheckBoxOn,\n  Icon24CheckBoxOn,\n  Icon20CheckBoxOff,\n  Icon24CheckBoxOff,\n  Icon20CheckBoxIndetermanate,\n} from '@vkontakte/icons';\nimport { HasRef, HasRootRef } from '../../types';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { Footnote } from '../Typography/Footnote/Footnote';\nimport { getSizeYClassName } from '../../helpers/getSizeYClassName';\nimport { useAdaptivity } from '../../hooks/useAdaptivity';\nimport { useExternRef } from '../../hooks/useExternRef';\nimport { useAdaptivityConditionalRender } from '../../hooks/useAdaptivityConditionalRender';\nimport { VisuallyHiddenInput } from '../VisuallyHiddenInput/VisuallyHiddenInput';\nimport { warnOnce } from '../../lib/warnOnce';\nimport styles from './Checkbox.module.css';\n\nexport interface CheckboxProps\n  extends React.InputHTMLAttributes<HTMLInputElement>,\n    HasRootRef<HTMLLabelElement>,\n    HasRef<HTMLInputElement> {\n  description?: React.ReactNode;\n  indeterminate?: boolean;\n  defaultIndeterminate?: boolean;\n}\n\nconst warn = warnOnce('Checkbox');\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Checkbox\n */\nexport const Checkbox = ({\n  children,\n  className,\n  style,\n  getRootRef,\n  getRef,\n  description,\n  indeterminate,\n  defaultIndeterminate,\n  onChange,\n  ...restProps\n}: CheckboxProps) => {\n  const inputRef = useExternRef(getRef);\n  const platform = usePlatform();\n  const { sizeY } = useAdaptivity();\n  const { sizeY: adaptiveSizeY } = useAdaptivityConditionalRender();\n\n  React.useEffect(() => {\n    const indeterminateValue = indeterminate === undefined ? defaultIndeterminate : indeterminate;\n\n    if (inputRef.current) {\n      inputRef.current.indeterminate = Boolean(indeterminateValue);\n    }\n  }, [defaultIndeterminate, indeterminate, inputRef]);\n\n  const handleChange: CheckboxProps['onChange'] = React.useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      if (\n        defaultIndeterminate !== undefined &&\n        indeterminate === undefined &&\n        restProps.checked === undefined &&\n        inputRef.current\n      ) {\n        inputRef.current.indeterminate = false;\n      }\n      if (indeterminate !== undefined && inputRef.current) {\n        inputRef.current.indeterminate = indeterminate;\n      }\n      onChange && onChange(event);\n    },\n    [defaultIndeterminate, indeterminate, restProps.checked, onChange, inputRef],\n  );\n\n  if (process.env.NODE_ENV === 'development') {\n    if (defaultIndeterminate && restProps.defaultChecked) {\n      warn('defaultIndeterminate и defaultChecked не могут быть true одновременно', 'error');\n    }\n\n    if (indeterminate && restProps.checked) {\n      warn('indeterminate и checked не могут быть true одновременно', 'error');\n    }\n\n    if (restProps.defaultChecked && restProps.checked) {\n      warn('defaultChecked и checked не могут быть true одновременно', 'error');\n    }\n  }\n\n  return (\n    <Tappable\n      Component=\"label\"\n      className={classNames(\n        styles['Checkbox'],\n        platform === Platform.VKCOM && styles['Checkbox--vkcom'],\n        getSizeYClassName(styles['Checkbox'], sizeY),\n        !(hasReactNode(children) || hasReactNode(description)) && styles['Checkbox--simple'],\n        className,\n      )}\n      style={style}\n      disabled={restProps.disabled}\n      activeEffectDelay={platform === Platform.IOS ? 100 : ACTIVE_EFFECT_DELAY}\n      getRootRef={getRootRef}\n    >\n      <VisuallyHiddenInput\n        {...restProps}\n        onChange={handleChange}\n        type=\"checkbox\"\n        className={styles['Checkbox__input']}\n        getRef={inputRef}\n      />\n      <div className={classNames(styles['Checkbox__icon'], styles['Checkbox__icon--on'])}>\n        {platform === Platform.VKCOM ? (\n          <Icon20CheckBoxOn />\n        ) : (\n          <React.Fragment>\n            {adaptiveSizeY.compact && (\n              <Icon20CheckBoxOn className={adaptiveSizeY.compact.className} />\n            )}\n            {adaptiveSizeY.regular && (\n              <Icon24CheckBoxOn className={adaptiveSizeY.regular.className} />\n            )}\n          </React.Fragment>\n        )}\n      </div>\n      <div className={classNames(styles['Checkbox__icon'], styles['Checkbox__icon--off'])}>\n        {platform === Platform.VKCOM ? (\n          <Icon20CheckBoxOff />\n        ) : (\n          <React.Fragment>\n            {adaptiveSizeY.compact && (\n              <Icon20CheckBoxOff className={adaptiveSizeY.compact.className} />\n            )}\n            {adaptiveSizeY.regular && (\n              <Icon24CheckBoxOff className={adaptiveSizeY.regular.className} />\n            )}\n          </React.Fragment>\n        )}\n      </div>\n      <div\n        className={classNames(styles['Checkbox__icon'], styles['Checkbox__icon--indeterminate'])}\n      >\n        {platform === Platform.VKCOM ? (\n          <Icon20CheckBoxIndetermanate width={20} height={20} />\n        ) : (\n          <React.Fragment>\n            {adaptiveSizeY.compact && (\n              <Icon20CheckBoxIndetermanate\n                className={adaptiveSizeY.compact.className}\n                width={20}\n                height={20}\n              />\n            )}\n            {adaptiveSizeY.regular && (\n              <Icon20CheckBoxIndetermanate\n                className={adaptiveSizeY.regular.className}\n                width={24}\n                height={24}\n              />\n            )}\n          </React.Fragment>\n        )}\n      </div>\n      <div className={styles['Checkbox__content']}>\n        <div className={styles['Checkbox__children']}>{children}</div>\n        {hasReactNode(description) && (\n          <Footnote className={styles['Checkbox__description']}>{description}</Footnote>\n        )}\n      </div>\n    </Tappable>\n  );\n};\n"],"mappings":"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"}