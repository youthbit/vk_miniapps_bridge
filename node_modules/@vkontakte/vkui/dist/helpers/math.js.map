{"version":3,"file":"math.js","names":["clamp","value","min","max","Math","precisionRound","number","precision","factor","pow","round","split","length","decimatedClamp","val","step","prec","decimatedOffset","decimatedRange","floor","rescale","from","to","options","scaled"],"sources":["../../src/helpers/math.ts"],"sourcesContent":["export const clamp = (value: number, min: number, max: number) =>\n  Math.max(min, Math.min(value, max));\n\nexport function precisionRound(number: number, precision = 1) {\n  let factor = Math.pow(10, precision);\n  return Math.round(number * factor) / factor;\n}\n\nfunction precision(number: number) {\n  return (`${number}`.split('.')[1] || '').length;\n}\n\nfunction decimatedClamp(val: number, min: number, max: number, step?: number) {\n  if (step == null || step <= 0) {\n    return clamp(val, min, max);\n  }\n  const prec = precision(step);\n  // Round value to nearest min + k1 * step\n  const decimatedOffset = precisionRound(Math.round((val - min) / step) * step, prec);\n  // Round range length _down_ to nearest min + k2 * step\n  const decimatedRange = precisionRound(Math.floor((max - min) / step) * step, prec);\n  return min + clamp(decimatedOffset, 0, decimatedRange);\n}\n\nexport function rescale(\n  value: number,\n  from: [number, number],\n  to: [number, number],\n  options: { step?: number } = {},\n) {\n  const scaled = ((value - from[0]) / (from[1] - from[0])) * (to[1] - to[0]) + to[0];\n  return decimatedClamp(scaled, to[0], to[1], options.step);\n}\n"],"mappings":"AAAA,OAAO,IAAMA,KAAK,GAAG,SAARA,KAAK,CAAIC,KAAa,EAAEC,GAAW,EAAEC,GAAW;EAAA,OAC3DC,IAAI,CAACD,GAAG,CAACD,GAAG,EAAEE,IAAI,CAACF,GAAG,CAACD,KAAK,EAAEE,GAAG,CAAC,CAAC;AAAA;AAErC,OAAO,SAASE,cAAc,CAACC,MAAc,EAAiB;EAAA,IAAfC,SAAS,uEAAG,CAAC;EAC1D,IAAIC,MAAM,GAAGJ,IAAI,CAACK,GAAG,CAAC,EAAE,EAAEF,SAAS,CAAC;EACpC,OAAOH,IAAI,CAACM,KAAK,CAACJ,MAAM,GAAGE,MAAM,CAAC,GAAGA,MAAM;AAC7C;AAEA,SAASD,SAAS,CAACD,MAAc,EAAE;EACjC,OAAO,CAAC,UAAGA,MAAM,EAAGK,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,EAAEC,MAAM;AACjD;AAEA,SAASC,cAAc,CAACC,GAAW,EAAEZ,GAAW,EAAEC,GAAW,EAAEY,IAAa,EAAE;EAC5E,IAAIA,IAAI,IAAI,IAAI,IAAIA,IAAI,IAAI,CAAC,EAAE;IAC7B,OAAOf,KAAK,CAACc,GAAG,EAAEZ,GAAG,EAAEC,GAAG,CAAC;EAC7B;EACA,IAAMa,IAAI,GAAGT,SAAS,CAACQ,IAAI,CAAC;EAC5B;EACA,IAAME,eAAe,GAAGZ,cAAc,CAACD,IAAI,CAACM,KAAK,CAAC,CAACI,GAAG,GAAGZ,GAAG,IAAIa,IAAI,CAAC,GAAGA,IAAI,EAAEC,IAAI,CAAC;EACnF;EACA,IAAME,cAAc,GAAGb,cAAc,CAACD,IAAI,CAACe,KAAK,CAAC,CAAChB,GAAG,GAAGD,GAAG,IAAIa,IAAI,CAAC,GAAGA,IAAI,EAAEC,IAAI,CAAC;EAClF,OAAOd,GAAG,GAAGF,KAAK,CAACiB,eAAe,EAAE,CAAC,EAAEC,cAAc,CAAC;AACxD;AAEA,OAAO,SAASE,OAAO,CACrBnB,KAAa,EACboB,IAAsB,EACtBC,EAAoB,EAEpB;EAAA,IADAC,OAA0B,uEAAG,CAAC,CAAC;EAE/B,IAAMC,MAAM,GAAI,CAACvB,KAAK,GAAGoB,IAAI,CAAC,CAAC,CAAC,KAAKA,IAAI,CAAC,CAAC,CAAC,GAAGA,IAAI,CAAC,CAAC,CAAC,CAAC,IAAKC,EAAE,CAAC,CAAC,CAAC,GAAGA,EAAE,CAAC,CAAC,CAAC,CAAC,GAAGA,EAAE,CAAC,CAAC,CAAC;EAClF,OAAOT,cAAc,CAACW,MAAM,EAAEF,EAAE,CAAC,CAAC,CAAC,EAAEA,EAAE,CAAC,CAAC,CAAC,EAAEC,OAAO,CAACR,IAAI,CAAC;AAC3D"}