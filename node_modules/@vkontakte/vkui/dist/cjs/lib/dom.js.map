{"version":3,"file":"dom.js","names":["getDOM","window","canUseDOM","undefined","document","DOMContext","React","createContext","useDOM","useContext","withDOM","Component","WithDOM","props","dom","blurActiveElement","activeElement","blur"],"sources":["../../../src/lib/dom.tsx"],"sourcesContent":["import * as React from 'react';\nimport { canUseDOM } from '@vkontakte/vkjs';\nexport { canUseDOM, canUseEventListeners, onDOMLoaded } from '@vkontakte/vkjs';\n\nexport interface DOMContextInterface {\n  /**\n   * @ignore\n   */\n  window?: Window;\n  /**\n   * @ignore\n   */\n  document?: Document;\n}\n\nexport type DOMProps = DOMContextInterface;\n\n/* eslint-disable no-restricted-globals */\nexport const getDOM = () => ({\n  window: canUseDOM ? window : undefined,\n  document: canUseDOM ? document : undefined,\n});\n/* eslint-enable no-restricted-globals */\n\nexport const DOMContext = React.createContext<DOMContextInterface>(getDOM());\n\nexport const useDOM = () => {\n  return React.useContext(DOMContext);\n};\n\nexport function withDOM<Props>(\n  Component: React.ComponentType<Props & DOMProps>,\n): React.ComponentType<Props> {\n  const WithDOM = (props: Props) => {\n    const dom = useDOM();\n    return <Component {...props} {...dom} />;\n  };\n  return WithDOM;\n}\n\nexport function blurActiveElement(document: Document | undefined) {\n  if (document && document.activeElement) {\n    (document.activeElement as HTMLElement).blur();\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAgBA;AACO,IAAMA,MAAM,GAAG,SAATA,MAAM;EAAA,OAAU;IAC3BC,MAAM,EAAEC,eAAS,GAAGD,MAAM,GAAGE,SAAS;IACtCC,QAAQ,EAAEF,eAAS,GAAGE,QAAQ,GAAGD;EACnC,CAAC;AAAA,CAAC;AACF;AAAA;AAEO,IAAME,UAAU,gBAAGC,KAAK,CAACC,aAAa,CAAsBP,MAAM,EAAE,CAAC;AAAC;AAEtE,IAAMQ,MAAM,GAAG,SAATA,MAAM,GAAS;EAC1B,OAAOF,KAAK,CAACG,UAAU,CAACJ,UAAU,CAAC;AACrC,CAAC;AAAC;AAEK,SAASK,OAAO,CACrBC,SAAgD,EACpB;EAC5B,IAAMC,OAAO,GAAG,SAAVA,OAAO,CAAIC,KAAY,EAAK;IAChC,IAAMC,GAAG,GAAGN,MAAM,EAAE;IACpB,oBAAO,oBAAC,SAAS,6BAAKK,KAAK,EAAMC,GAAG,EAAI;EAC1C,CAAC;EACD,OAAOF,OAAO;AAChB;AAEO,SAASG,iBAAiB,CAACX,QAA8B,EAAE;EAChE,IAAIA,QAAQ,IAAIA,QAAQ,CAACY,aAAa,EAAE;IACrCZ,QAAQ,CAACY,aAAa,CAAiBC,IAAI,EAAE;EAChD;AACF"}