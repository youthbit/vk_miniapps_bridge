{"version":3,"file":"browser.js","names":["System","memoized","computeBrowserInfo","userAgent","systemVersion","system","UNKNOWN","detectIOS","isIOS","iosMajor","iosMinor","IOS","major","minor","browserInfo","mediaQueryNull","query","matches","media","onchange","noop","addListener","removeListener","addEventListener","removeEventListener","dispatchEvent"],"sources":["../../../src/lib/browser.ts"],"sourcesContent":["import { detectIOS, noop } from '@vkontakte/vkjs';\nimport type { Version } from '../types';\n\nexport enum System {\n  IOS = 'ios',\n  UNKNOWN = '',\n}\n\nexport interface BrowserInfo {\n  userAgent: string;\n  system: System;\n  systemVersion: Version | null;\n}\n\nconst memoized: { [index: string]: BrowserInfo } = {};\n\nexport function computeBrowserInfo(userAgent = ''): BrowserInfo {\n  if (memoized[userAgent]) {\n    return memoized[userAgent];\n  }\n\n  let systemVersion: Version | null = null;\n  let system = System.UNKNOWN;\n\n  const { isIOS, iosMajor, iosMinor } = detectIOS(userAgent);\n\n  if (isIOS) {\n    system = System.IOS;\n    systemVersion = {\n      major: iosMajor,\n      minor: iosMinor,\n    };\n  }\n\n  const browserInfo: BrowserInfo = {\n    userAgent,\n    system,\n    systemVersion,\n  };\n\n  memoized[userAgent] = browserInfo;\n\n  return browserInfo;\n}\n\n/**\n * Эмуляция функции `window.matchMedia` для SSR.\n *\n * ⚠️ Желательно избегать использование этой эмуляции в SSR.\n */\nexport function mediaQueryNull(query: string): MediaQueryList {\n  return {\n    matches: false,\n    media: query,\n    onchange: noop,\n    addListener: noop,\n    removeListener: noop,\n    addEventListener: noop,\n    removeEventListener: noop,\n    dispatchEvent() {\n      return false;\n    },\n  };\n}\n"],"mappings":";;;;;;;;AAAA;AAAkD,IAGtCA,MAAM;AAAA;AAAA,WAANA,MAAM;EAANA,MAAM;EAANA,MAAM;AAAA,GAANA,MAAM,sBAANA,MAAM;AAWlB,IAAMC,QAA0C,GAAG,CAAC,CAAC;AAE9C,SAASC,kBAAkB,GAA8B;EAAA,IAA7BC,SAAS,uEAAG,EAAE;EAC/C,IAAIF,QAAQ,CAACE,SAAS,CAAC,EAAE;IACvB,OAAOF,QAAQ,CAACE,SAAS,CAAC;EAC5B;EAEA,IAAIC,aAA6B,GAAG,IAAI;EACxC,IAAIC,MAAM,GAAGL,MAAM,CAACM,OAAO;EAE3B,iBAAsC,IAAAC,eAAS,EAACJ,SAAS,CAAC;IAAlDK,KAAK,cAALA,KAAK;IAAEC,QAAQ,cAARA,QAAQ;IAAEC,QAAQ,cAARA,QAAQ;EAEjC,IAAIF,KAAK,EAAE;IACTH,MAAM,GAAGL,MAAM,CAACW,GAAG;IACnBP,aAAa,GAAG;MACdQ,KAAK,EAAEH,QAAQ;MACfI,KAAK,EAAEH;IACT,CAAC;EACH;EAEA,IAAMI,WAAwB,GAAG;IAC/BX,SAAS,EAATA,SAAS;IACTE,MAAM,EAANA,MAAM;IACND,aAAa,EAAbA;EACF,CAAC;EAEDH,QAAQ,CAACE,SAAS,CAAC,GAAGW,WAAW;EAEjC,OAAOA,WAAW;AACpB;;AAEA;AACA;AACA;AACA;AACA;AACO,SAASC,cAAc,CAACC,KAAa,EAAkB;EAC5D,OAAO;IACLC,OAAO,EAAE,KAAK;IACdC,KAAK,EAAEF,KAAK;IACZG,QAAQ,EAAEC,UAAI;IACdC,WAAW,EAAED,UAAI;IACjBE,cAAc,EAAEF,UAAI;IACpBG,gBAAgB,EAAEH,UAAI;IACtBI,mBAAmB,EAAEJ,UAAI;IACzBK,aAAa,2BAAG;MACd,OAAO,KAAK;IACd;EACF,CAAC;AACH"}