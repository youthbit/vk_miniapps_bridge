{"version":3,"file":"useTimeout.js","names":["useTimeout","cb","duration","options","React","useRef","useIsomorphicLayoutEffect","current","timeout","clear","useCallback","canUseDOM","clearTimeout","set","setTimeout"],"sources":["../../../src/hooks/useTimeout.ts"],"sourcesContent":["import * as React from 'react';\nimport { useIsomorphicLayoutEffect } from '../lib/useIsomorphicLayoutEffect';\nimport { canUseDOM } from '../lib/dom';\n\nexport function useTimeout(cb: () => any, duration: number) {\n  const options = React.useRef({ cb, duration });\n  useIsomorphicLayoutEffect(() => {\n    options.current.cb = cb;\n    options.current.duration = duration;\n  }, [cb, duration]);\n\n  const timeout = React.useRef<ReturnType<typeof setTimeout>>();\n  const clear = React.useCallback(() => {\n    if (canUseDOM && timeout?.current) {\n      clearTimeout(timeout.current);\n    }\n  }, []);\n  const set = React.useCallback(\n    (duration = options.current.duration) => {\n      clear();\n      if (canUseDOM) {\n        timeout.current = setTimeout(() => {\n          const { cb } = options.current;\n          typeof cb === 'function' && cb();\n        }, duration);\n      }\n    },\n    [clear],\n  );\n  useIsomorphicLayoutEffect(() => clear, []);\n\n  return { set, clear };\n}\n"],"mappings":";;;;;;;AAAA;AACA;AACA;AAEO,SAASA,UAAU,CAACC,EAAa,EAAEC,QAAgB,EAAE;EAC1D,IAAMC,OAAO,GAAGC,KAAK,CAACC,MAAM,CAAC;IAAEJ,EAAE,EAAFA,EAAE;IAAEC,QAAQ,EAARA;EAAS,CAAC,CAAC;EAC9C,IAAAI,oDAAyB,EAAC,YAAM;IAC9BH,OAAO,CAACI,OAAO,CAACN,EAAE,GAAGA,EAAE;IACvBE,OAAO,CAACI,OAAO,CAACL,QAAQ,GAAGA,QAAQ;EACrC,CAAC,EAAE,CAACD,EAAE,EAAEC,QAAQ,CAAC,CAAC;EAElB,IAAMM,OAAO,GAAGJ,KAAK,CAACC,MAAM,EAAiC;EAC7D,IAAMI,KAAK,GAAGL,KAAK,CAACM,WAAW,CAAC,YAAM;IACpC,IAAIC,cAAS,IAAIH,OAAO,aAAPA,OAAO,eAAPA,OAAO,CAAED,OAAO,EAAE;MACjCK,YAAY,CAACJ,OAAO,CAACD,OAAO,CAAC;IAC/B;EACF,CAAC,EAAE,EAAE,CAAC;EACN,IAAMM,GAAG,GAAGT,KAAK,CAACM,WAAW,CAC3B,YAAyC;IAAA,IAAxCR,QAAQ,uEAAGC,OAAO,CAACI,OAAO,CAACL,QAAQ;IAClCO,KAAK,EAAE;IACP,IAAIE,cAAS,EAAE;MACbH,OAAO,CAACD,OAAO,GAAGO,UAAU,CAAC,YAAM;QACjC,IAAQb,EAAE,GAAKE,OAAO,CAACI,OAAO,CAAtBN,EAAE;QACV,OAAOA,EAAE,KAAK,UAAU,IAAIA,EAAE,EAAE;MAClC,CAAC,EAAEC,QAAQ,CAAC;IACd;EACF,CAAC,EACD,CAACO,KAAK,CAAC,CACR;EACD,IAAAH,oDAAyB,EAAC;IAAA,OAAMG,KAAK;EAAA,GAAE,EAAE,CAAC;EAE1C,OAAO;IAAEI,GAAG,EAAHA,GAAG;IAAEJ,KAAK,EAALA;EAAM,CAAC;AACvB"}