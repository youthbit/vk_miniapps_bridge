{"version":3,"file":"useTodayDate.js","names":["useTodayDate","listenDayChangesForUpdate","React","useState","Date","todayDate","setTodayDate","useEffect","timeToDayChange","getMillisecondsToTomorrow","timeout","setTimeout","clearTimeout"],"sources":["../../../src/hooks/useTodayDate.ts"],"sourcesContent":["import React from 'react';\n\nimport { getMillisecondsToTomorrow } from '../lib/date';\n\n/**\n * Опционально обновляемая дата сегодняшнего дня\n *\n * Дата - сегодня (в соответствии с системным временем)\n *\n * Часы, минуты, секунды, миллисекунды - произвольные\n *\n * @param listenDayChangesForUpdate - флаг по которому определяется, будет ли создаваться подписка на смену календарного дня\n */\nexport function useTodayDate(listenDayChangesForUpdate = false) {\n  const [todayDate, setTodayDate] = React.useState(() => new Date());\n\n  React.useEffect(() => {\n    if (!listenDayChangesForUpdate) {\n      return;\n    }\n\n    const timeToDayChange = getMillisecondsToTomorrow(todayDate);\n\n    const timeout = setTimeout(() => {\n      setTodayDate(new Date());\n    }, timeToDayChange);\n\n    return () => {\n      clearTimeout(timeout);\n    };\n  }, [listenDayChangesForUpdate, todayDate]);\n\n  return todayDate;\n}\n"],"mappings":";;;;;;;;AAAA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASA,YAAY,GAAoC;EAAA,IAAnCC,yBAAyB,uEAAG,KAAK;EAC5D,sBAAkCC,cAAK,CAACC,QAAQ,CAAC;MAAA,OAAM,IAAIC,IAAI,EAAE;IAAA,EAAC;IAAA;IAA3DC,SAAS;IAAEC,YAAY;EAE9BJ,cAAK,CAACK,SAAS,CAAC,YAAM;IACpB,IAAI,CAACN,yBAAyB,EAAE;MAC9B;IACF;IAEA,IAAMO,eAAe,GAAG,IAAAC,+BAAyB,EAACJ,SAAS,CAAC;IAE5D,IAAMK,OAAO,GAAGC,UAAU,CAAC,YAAM;MAC/BL,YAAY,CAAC,IAAIF,IAAI,EAAE,CAAC;IAC1B,CAAC,EAAEI,eAAe,CAAC;IAEnB,OAAO,YAAM;MACXI,YAAY,CAACF,OAAO,CAAC;IACvB,CAAC;EACH,CAAC,EAAE,CAACT,yBAAyB,EAAEI,SAAS,CAAC,CAAC;EAE1C,OAAOA,SAAS;AAClB"}