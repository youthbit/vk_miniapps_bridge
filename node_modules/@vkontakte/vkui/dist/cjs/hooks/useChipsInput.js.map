{"version":3,"file":"useChipsInput.js","names":["useChipsInput","props","value","getOptionValue","onChange","onInputChange","getNewOptionData","React","useState","inputValue","fieldValue","setFieldValue","selectedOptions","setSelectedOptions","clearInput","useCallback","target","handleInputChange","e","toggleOption","newOption","newSelectedOptions","filter","option","push","addOption","addOptionFromInput","trimmedValue","trim","undefined","removeOption","useEffect"],"sources":["../../../src/hooks/useChipsInput.ts"],"sourcesContent":["import * as React from 'react';\nimport { ChipOption } from '../components/Chip/Chip';\nimport { ChipsInputBaseProps } from '../components/ChipsInputBase/ChipsInputBase';\n\nexport const useChipsInput = <Option extends ChipOption>(\n  props: Partial<ChipsInputBaseProps<Option>>,\n) => {\n  const { value, getOptionValue, onChange, onInputChange, getNewOptionData } = props;\n\n  const [fieldValue, setFieldValue] = React.useState(props.inputValue);\n  const [selectedOptions, setSelectedOptions] = React.useState(value ?? []);\n\n  const clearInput = React.useCallback(() => {\n    setFieldValue('');\n    onInputChange!({ target: { value: '' } } as any);\n  }, [onInputChange]);\n\n  const handleInputChange = React.useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setFieldValue(e.target.value);\n      onInputChange!(e);\n    },\n    [onInputChange],\n  );\n\n  const toggleOption = React.useCallback(\n    (newOption: Option, value?: boolean) => {\n      const newSelectedOptions = selectedOptions.filter(\n        (option: Option) => getOptionValue!(newOption) !== getOptionValue!(option),\n      );\n\n      if (value === true) {\n        newSelectedOptions.push(newOption);\n      }\n\n      setSelectedOptions(newSelectedOptions);\n      onChange!(newSelectedOptions);\n    },\n    [selectedOptions, getOptionValue, onChange],\n  );\n\n  const addOption = React.useCallback(\n    (newOption: Option) => toggleOption(newOption, true),\n    [toggleOption],\n  );\n  const addOptionFromInput = React.useCallback(() => {\n    const trimmedValue = fieldValue?.trim();\n\n    if (trimmedValue) {\n      addOption(getNewOptionData!(undefined, trimmedValue));\n      clearInput();\n    }\n  }, [addOption, clearInput, getNewOptionData, fieldValue]);\n  const removeOption = React.useCallback(\n    (value) => {\n      toggleOption(getNewOptionData!(undefined, value as string), false);\n    },\n    [toggleOption, getNewOptionData],\n  );\n\n  React.useEffect(() => {\n    setSelectedOptions(value as Option[]);\n\n    return () => setSelectedOptions([]);\n  }, [props.value, value]);\n\n  React.useEffect(() => {\n    setFieldValue(props.inputValue);\n\n    return () => setFieldValue('');\n  }, [props.inputValue]);\n\n  return {\n    fieldValue,\n    setFieldValue,\n    selectedOptions,\n    setSelectedOptions,\n    clearInput,\n    toggleOption,\n    addOption,\n    addOptionFromInput,\n    removeOption,\n    handleInputChange,\n  };\n};\n"],"mappings":"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"}