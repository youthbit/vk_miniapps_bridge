{"version":3,"file":"useCalendar.js","names":["useCalendar","value","disablePast","disableFuture","shouldDisableDate","onHeaderChange","onNextMonth","onPrevMonth","React","useState","Array","isArray","Date","viewDate","setViewDate","focusedDay","setFocusedDay","setPrevMonth","useCallback","subMonths","setNextMonth","addMonths","handleSetViewDate","isDayFocused","day","Boolean","isSameDay","isDayDisabled","now","disabled","isBefore","endOfDay","isAfter","startOfDay","resetSelectedDay","undefined"],"sources":["../../../src/hooks/useCalendar.ts"],"sourcesContent":["import * as React from 'react';\nimport {\n  subMonths,\n  addMonths,\n  isSameDay,\n  isBefore,\n  endOfDay,\n  isAfter,\n  startOfDay,\n} from '../lib/date';\nimport { CalendarProps } from '../components/Calendar/Calendar';\n\nexport interface UseCalendarDependencies\n  extends Pick<CalendarProps, 'onHeaderChange' | 'onNextMonth' | 'onPrevMonth'> {\n  value?: Array<Date | null> | Date;\n  disablePast?: boolean;\n  disableFuture?: boolean;\n  shouldDisableDate?(value: Date): boolean;\n}\n\nexport function useCalendar({\n  value,\n  disablePast,\n  disableFuture,\n  shouldDisableDate,\n  onHeaderChange,\n  onNextMonth,\n  onPrevMonth,\n}: UseCalendarDependencies) {\n  const [viewDate, setViewDate] = React.useState(\n    (Array.isArray(value) ? value[0] : value) ?? new Date(),\n  );\n  const [focusedDay, setFocusedDay] = React.useState<Date>();\n\n  const setPrevMonth = React.useCallback(() => {\n    onPrevMonth?.();\n    setViewDate(subMonths(viewDate, 1));\n  }, [viewDate, onPrevMonth]);\n  const setNextMonth = React.useCallback(() => {\n    onNextMonth?.();\n    setViewDate(addMonths(viewDate, 1));\n  }, [viewDate, onNextMonth]);\n\n  const handleSetViewDate = React.useCallback(\n    (value: Date) => {\n      onHeaderChange?.(value);\n      setViewDate(value);\n    },\n    [onHeaderChange],\n  );\n\n  const isDayFocused = React.useCallback(\n    (day: Date) => Boolean(focusedDay && isSameDay(day, focusedDay)),\n    [focusedDay],\n  );\n\n  const isDayDisabled = React.useCallback(\n    (day: Date) => {\n      const now = new Date();\n      let disabled = false;\n      if (disablePast) {\n        disabled = isBefore(endOfDay(day), now);\n      }\n      if (disableFuture) {\n        disabled = isAfter(startOfDay(day), now);\n      }\n      if (shouldDisableDate) {\n        disabled = shouldDisableDate(day);\n      }\n\n      return disabled;\n    },\n    [disableFuture, disablePast, shouldDisableDate],\n  );\n\n  const resetSelectedDay = React.useCallback(() => {\n    setFocusedDay(undefined);\n  }, [setFocusedDay]);\n\n  return {\n    viewDate,\n    setViewDate: handleSetViewDate,\n    setPrevMonth,\n    setNextMonth,\n    focusedDay,\n    setFocusedDay,\n    isDayFocused,\n    isDayDisabled,\n    resetSelectedDay,\n  };\n}\n"],"mappings":"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"}