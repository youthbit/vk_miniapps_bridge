{"version":3,"file":"useChipsSelect.js","names":["useChipsSelect","props","options","filterFn","getOptionLabel","getOptionValue","React","useState","opened","setOpened","focusedOptionIndex","setFocusedOptionIndex","focusedOption","setFocusedOption","useChipsInput","fieldValue","selectedOptions","chipsInputState","handleInputChange","e","filteredOptions","useMemo","filter","option","length","filteredSet","Set","selected","map","item","includes","delete"],"sources":["../../../src/hooks/useChipsSelect.ts"],"sourcesContent":["import * as React from 'react';\nimport { useChipsInput } from './useChipsInput';\nimport { ChipsSelectProps } from '../components/ChipsSelect/ChipsSelect';\nimport { ChipOption } from '../components/Chip/Chip';\n\nexport const useChipsSelect = <Option extends ChipOption>(\n  props: Partial<ChipsSelectProps<Option>>,\n) => {\n  const { options, filterFn, getOptionLabel, getOptionValue } = props;\n\n  const [opened, setOpened] = React.useState(false);\n  const [focusedOptionIndex, setFocusedOptionIndex] = React.useState<number | null>(0);\n  const [focusedOption, setFocusedOption] = React.useState<Option | null>(null);\n\n  const { fieldValue, selectedOptions, ...chipsInputState } = useChipsInput(props);\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement> | undefined) => {\n    if (!e) {\n      return;\n    }\n    chipsInputState.handleInputChange(e);\n\n    if (!opened) {\n      setOpened(true);\n      setFocusedOptionIndex(0);\n    }\n  };\n\n  let filteredOptions = React.useMemo(() => {\n    return filterFn\n      ? options!.filter((option) => filterFn(fieldValue, option, getOptionLabel))\n      : (options as Option[]);\n  }, [options, filterFn, fieldValue, getOptionLabel]);\n\n  filteredOptions = React.useMemo(() => {\n    if (!filteredOptions.length) {\n      return filteredOptions;\n    }\n\n    const filteredSet = new Set(filteredOptions);\n    const selected = selectedOptions.map((item) => getOptionValue!(item));\n\n    for (const item of filteredSet) {\n      if (selected.includes(getOptionValue!(item))) {\n        filteredSet.delete(item);\n      }\n    }\n\n    return [...filteredSet];\n  }, [filteredOptions, selectedOptions, getOptionValue]);\n\n  return {\n    ...chipsInputState,\n    fieldValue,\n    handleInputChange,\n    opened,\n    setOpened,\n    filteredOptions,\n    focusedOptionIndex,\n    setFocusedOptionIndex,\n    focusedOption,\n    setFocusedOption,\n    selectedOptions,\n  };\n};\n"],"mappings":";;;;;;;;;;;;;AAAA;AACA;AAAgD;AAIzC,IAAMA,cAAc,GAAG,SAAjBA,cAAc,CACzBC,KAAwC,EACrC;EACH,IAAQC,OAAO,GAA+CD,KAAK,CAA3DC,OAAO;IAAEC,QAAQ,GAAqCF,KAAK,CAAlDE,QAAQ;IAAEC,cAAc,GAAqBH,KAAK,CAAxCG,cAAc;IAAEC,cAAc,GAAKJ,KAAK,CAAxBI,cAAc;EAEzD,sBAA4BC,KAAK,CAACC,QAAQ,CAAC,KAAK,CAAC;IAAA;IAA1CC,MAAM;IAAEC,SAAS;EACxB,uBAAoDH,KAAK,CAACC,QAAQ,CAAgB,CAAC,CAAC;IAAA;IAA7EG,kBAAkB;IAAEC,qBAAqB;EAChD,uBAA0CL,KAAK,CAACC,QAAQ,CAAgB,IAAI,CAAC;IAAA;IAAtEK,aAAa;IAAEC,gBAAgB;EAEtC,qBAA4D,IAAAC,6BAAa,EAACb,KAAK,CAAC;IAAxEc,UAAU,kBAAVA,UAAU;IAAEC,eAAe,kBAAfA,eAAe;IAAKC,eAAe;EAEvD,IAAMC,iBAAiB,GAAG,SAApBA,iBAAiB,CAAIC,CAAkD,EAAK;IAChF,IAAI,CAACA,CAAC,EAAE;MACN;IACF;IACAF,eAAe,CAACC,iBAAiB,CAACC,CAAC,CAAC;IAEpC,IAAI,CAACX,MAAM,EAAE;MACXC,SAAS,CAAC,IAAI,CAAC;MACfE,qBAAqB,CAAC,CAAC,CAAC;IAC1B;EACF,CAAC;EAED,IAAIS,eAAe,GAAGd,KAAK,CAACe,OAAO,CAAC,YAAM;IACxC,OAAOlB,QAAQ,GACXD,OAAO,CAAEoB,MAAM,CAAC,UAACC,MAAM;MAAA,OAAKpB,QAAQ,CAACY,UAAU,EAAEQ,MAAM,EAAEnB,cAAc,CAAC;IAAA,EAAC,GACxEF,OAAoB;EAC3B,CAAC,EAAE,CAACA,OAAO,EAAEC,QAAQ,EAAEY,UAAU,EAAEX,cAAc,CAAC,CAAC;EAEnDgB,eAAe,GAAGd,KAAK,CAACe,OAAO,CAAC,YAAM;IACpC,IAAI,CAACD,eAAe,CAACI,MAAM,EAAE;MAC3B,OAAOJ,eAAe;IACxB;IAEA,IAAMK,WAAW,GAAG,IAAIC,GAAG,CAACN,eAAe,CAAC;IAC5C,IAAMO,QAAQ,GAAGX,eAAe,CAACY,GAAG,CAAC,UAACC,IAAI;MAAA,OAAKxB,cAAc,CAAEwB,IAAI,CAAC;IAAA,EAAC;IAAC,yDAEnDJ,WAAW;MAAA;IAAA;MAA9B,oDAAgC;QAAA,IAArBI,IAAI;QACb,IAAIF,QAAQ,CAACG,QAAQ,CAACzB,cAAc,CAAEwB,IAAI,CAAC,CAAC,EAAE;UAC5CJ,WAAW,CAACM,MAAM,CAACF,IAAI,CAAC;QAC1B;MACF;IAAC;MAAA;IAAA;MAAA;IAAA;IAED,wCAAWJ,WAAW;EACxB,CAAC,EAAE,CAACL,eAAe,EAAEJ,eAAe,EAAEX,cAAc,CAAC,CAAC;EAEtD,mEACKY,eAAe;IAClBF,UAAU,EAAVA,UAAU;IACVG,iBAAiB,EAAjBA,iBAAiB;IACjBV,MAAM,EAANA,MAAM;IACNC,SAAS,EAATA,SAAS;IACTW,eAAe,EAAfA,eAAe;IACfV,kBAAkB,EAAlBA,kBAAkB;IAClBC,qBAAqB,EAArBA,qBAAqB;IACrBC,aAAa,EAAbA,aAAa;IACbC,gBAAgB,EAAhBA,gBAAgB;IAChBG,eAAe,EAAfA;EAAe;AAEnB,CAAC;AAAC"}