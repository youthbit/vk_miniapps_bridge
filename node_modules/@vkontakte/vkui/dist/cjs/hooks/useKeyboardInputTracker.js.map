{"version":3,"file":"useKeyboardInputTracker.js","names":["ENABLE_KEYBOARD_INPUT_EVENT_NAME","DISABLE_KEYBOARD_INPUT_EVENT_NAME","useKeyboardInputTracker","useDOM","document","React","useState","isKeyboardInputActive","toggleKeyboardInput","enableKeyboardInput","useCallback","handleKeydown","e","pressedKey","Keys","TAB","disableKeyboardInput","eventOptions","passive","capture","useGlobalEventListener"],"sources":["../../../src/hooks/useKeyboardInputTracker.ts"],"sourcesContent":["import * as React from 'react';\nimport { Keys, pressedKey } from '../lib/accessibility';\nimport { useDOM } from '../lib/dom';\nimport { useGlobalEventListener } from './useGlobalEventListener';\n\nexport const ENABLE_KEYBOARD_INPUT_EVENT_NAME = 'enableKeyboardInput';\nexport const DISABLE_KEYBOARD_INPUT_EVENT_NAME = 'disableKeyboardInput';\n\nexport function useKeyboardInputTracker(): boolean {\n  const { document } = useDOM();\n\n  const [isKeyboardInputActive, toggleKeyboardInput] = React.useState<boolean>(false);\n\n  const enableKeyboardInput = React.useCallback(() => {\n    toggleKeyboardInput(true);\n  }, []);\n\n  const handleKeydown = React.useCallback(\n    (e: KeyboardEvent) => {\n      if (pressedKey(e) === Keys.TAB) {\n        enableKeyboardInput();\n      }\n    },\n    [enableKeyboardInput],\n  );\n\n  const disableKeyboardInput = React.useCallback(() => {\n    toggleKeyboardInput(false);\n  }, []);\n\n  const eventOptions = {\n    passive: true,\n    capture: true,\n  };\n\n  useGlobalEventListener(document, 'keydown', handleKeydown, eventOptions);\n  useGlobalEventListener(document, 'mousedown', disableKeyboardInput, eventOptions);\n  useGlobalEventListener(document, 'touchstart', disableKeyboardInput, eventOptions);\n  useGlobalEventListener(\n    document,\n    ENABLE_KEYBOARD_INPUT_EVENT_NAME,\n    enableKeyboardInput,\n    eventOptions,\n  );\n  useGlobalEventListener(\n    document,\n    DISABLE_KEYBOARD_INPUT_EVENT_NAME,\n    disableKeyboardInput,\n    eventOptions,\n  );\n\n  return isKeyboardInputActive;\n}\n"],"mappings":";;;;;;;;;;AAAA;AACA;AACA;AACA;AAEO,IAAMA,gCAAgC,GAAG,qBAAqB;AAAC;AAC/D,IAAMC,iCAAiC,GAAG,sBAAsB;AAAC;AAEjE,SAASC,uBAAuB,GAAY;EACjD,cAAqB,IAAAC,WAAM,GAAE;IAArBC,QAAQ,WAARA,QAAQ;EAEhB,sBAAqDC,KAAK,CAACC,QAAQ,CAAU,KAAK,CAAC;IAAA;IAA5EC,qBAAqB;IAAEC,mBAAmB;EAEjD,IAAMC,mBAAmB,GAAGJ,KAAK,CAACK,WAAW,CAAC,YAAM;IAClDF,mBAAmB,CAAC,IAAI,CAAC;EAC3B,CAAC,EAAE,EAAE,CAAC;EAEN,IAAMG,aAAa,GAAGN,KAAK,CAACK,WAAW,CACrC,UAACE,CAAgB,EAAK;IACpB,IAAI,IAAAC,yBAAU,EAACD,CAAC,CAAC,KAAKE,mBAAI,CAACC,GAAG,EAAE;MAC9BN,mBAAmB,EAAE;IACvB;EACF,CAAC,EACD,CAACA,mBAAmB,CAAC,CACtB;EAED,IAAMO,oBAAoB,GAAGX,KAAK,CAACK,WAAW,CAAC,YAAM;IACnDF,mBAAmB,CAAC,KAAK,CAAC;EAC5B,CAAC,EAAE,EAAE,CAAC;EAEN,IAAMS,YAAY,GAAG;IACnBC,OAAO,EAAE,IAAI;IACbC,OAAO,EAAE;EACX,CAAC;EAED,IAAAC,8CAAsB,EAAChB,QAAQ,EAAE,SAAS,EAAEO,aAAa,EAAEM,YAAY,CAAC;EACxE,IAAAG,8CAAsB,EAAChB,QAAQ,EAAE,WAAW,EAAEY,oBAAoB,EAAEC,YAAY,CAAC;EACjF,IAAAG,8CAAsB,EAAChB,QAAQ,EAAE,YAAY,EAAEY,oBAAoB,EAAEC,YAAY,CAAC;EAClF,IAAAG,8CAAsB,EACpBhB,QAAQ,EACRJ,gCAAgC,EAChCS,mBAAmB,EACnBQ,YAAY,CACb;EACD,IAAAG,8CAAsB,EACpBhB,QAAQ,EACRH,iCAAiC,EACjCe,oBAAoB,EACpBC,YAAY,CACb;EAED,OAAOV,qBAAqB;AAC9B"}