{"version":3,"file":"WriteBarIcon.js","names":["warn","warnOnce","IS_DEV","process","env","NODE_ENV","WriteBarIcon","mode","children","count","className","restProps","platform","usePlatform","icon","ariaLabel","undefined","Platform","IOS","classNames","styles","hasReactNode"],"sources":["../../../../src/components/WriteBarIcon/WriteBarIcon.tsx"],"sourcesContent":["import * as React from 'react';\nimport {\n  Icon24Send,\n  Icon28AddCircleOutline,\n  Icon28AttachOutline,\n  Icon28CheckCircleOutline,\n  Icon48WritebarDone,\n  Icon48WritebarSend,\n} from '@vkontakte/icons';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { classNames, hasReactNode } from '@vkontakte/vkjs';\nimport { Platform } from '../../lib/platform';\nimport { Counter } from '../Counter/Counter';\nimport { Tappable } from '../Tappable/Tappable';\nimport { warnOnce } from '../../lib/warnOnce';\nimport styles from './WriteBarIcon.module.css';\n\nexport interface WriteBarIconProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  /**\n   * Предустановленные типы кнопок в WriteBar для отрисовки иконки в зависимости от платформы.\n   * Если передать валидное значение для этого свойства, `children` игнорируется.\n   *\n   * - `attach` – иконка прикрепления.\n   * - `send` – иконка отправки.\n   * - `done` – иконка отправки в режиме редактирования.\n   */\n  mode?: 'attach' | 'send' | 'done';\n  /**\n   * Значение счётчика для кнопки. Например, для количества прикреплённых файлов.\n   */\n  count?: number;\n}\n\nconst warn = warnOnce('WriteBarIcon');\nconst IS_DEV = process.env.NODE_ENV === 'development';\n\n/**\n * @see https://vkcom.github.io/VKUI/#/WriteBarIcon\n */\nexport const WriteBarIcon = ({\n  mode,\n  children,\n  count,\n  className,\n  ...restProps\n}: WriteBarIconProps) => {\n  const platform = usePlatform();\n\n  let icon: React.ReactNode;\n  let ariaLabel: string | undefined = undefined;\n\n  switch (mode) {\n    case 'attach':\n      icon = platform === Platform.IOS ? <Icon28AddCircleOutline /> : <Icon28AttachOutline />;\n      ariaLabel = 'Прикрепить файл';\n      break;\n\n    case 'send':\n      icon = platform === Platform.IOS ? <Icon48WritebarSend /> : <Icon24Send />;\n      ariaLabel = 'Отправить';\n      break;\n\n    case 'done':\n      icon = platform === Platform.IOS ? <Icon48WritebarDone /> : <Icon28CheckCircleOutline />;\n      ariaLabel = 'Готово';\n      break;\n\n    default:\n      break;\n  }\n\n  if (IS_DEV && !restProps['aria-label'] && !ariaLabel) {\n    warn(\n      'a11y: У WriteBarIcon нет aria-label. Кнопка будет недоступной для части пользователей.',\n      'error',\n    );\n  }\n\n  return (\n    <Tappable\n      aria-label={ariaLabel}\n      {...restProps}\n      Component=\"button\"\n      hasHover={false}\n      activeMode={styles['WriteBarIcon__active']}\n      className={classNames(\n        styles['WriteBarIcon'],\n        platform === Platform.IOS && styles['WriteBarIcon--ios'],\n        mode && styles[`WriteBarIcon--mode-${mode}`],\n        className,\n      )}\n    >\n      <span className={styles['WriteBarIcon__in']}>{icon || children}</span>\n      {hasReactNode(count) && (\n        <Counter className={styles['WriteBarIcon__counter']} size=\"s\">\n          {count}\n        </Counter>\n      )}\n    </Tappable>\n  );\n};\n"],"mappings":";;;;;;;;;;AAAA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AAA8C;AAmB9C,IAAMA,IAAI,GAAG,IAAAC,kBAAQ,EAAC,cAAc,CAAC;AACrC,IAAMC,MAAM,GAAGC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa;;AAErD;AACA;AACA;AACO,IAAMC,YAAY,GAAG,SAAfA,YAAY,OAMA;EAAA,IALvBC,IAAI,QAAJA,IAAI;IACJC,QAAQ,QAARA,QAAQ;IACRC,KAAK,QAALA,KAAK;IACLC,SAAS,QAATA,SAAS;IACNC,SAAS;EAEZ,IAAMC,QAAQ,GAAG,IAAAC,wBAAW,GAAE;EAE9B,IAAIC,IAAqB;EACzB,IAAIC,SAA6B,GAAGC,SAAS;EAE7C,QAAQT,IAAI;IACV,KAAK,QAAQ;MACXO,IAAI,GAAGF,QAAQ,KAAKK,kBAAQ,CAACC,GAAG,gBAAG,oBAAC,6BAAsB,OAAG,gBAAG,oBAAC,0BAAmB,OAAG;MACvFH,SAAS,GAAG,iBAAiB;MAC7B;IAEF,KAAK,MAAM;MACTD,IAAI,GAAGF,QAAQ,KAAKK,kBAAQ,CAACC,GAAG,gBAAG,oBAAC,yBAAkB,OAAG,gBAAG,oBAAC,iBAAU,OAAG;MAC1EH,SAAS,GAAG,WAAW;MACvB;IAEF,KAAK,MAAM;MACTD,IAAI,GAAGF,QAAQ,KAAKK,kBAAQ,CAACC,GAAG,gBAAG,oBAAC,yBAAkB,OAAG,gBAAG,oBAAC,+BAAwB,OAAG;MACxFH,SAAS,GAAG,QAAQ;MACpB;IAEF;MACE;EAAM;EAGV,IAAIb,MAAM,IAAI,CAACS,SAAS,CAAC,YAAY,CAAC,IAAI,CAACI,SAAS,EAAE;IACpDf,IAAI,CACF,wFAAwF,EACxF,OAAO,CACR;EACH;EAEA,oBACE,oBAAC,kBAAQ;IACP,cAAYe;EAAU,GAClBJ,SAAS;IACb,SAAS,EAAC,QAAQ;IAClB,QAAQ,EAAE,KAAM;IAChB,UAAU,4BAAiC;IAC3C,SAAS,EAAE,IAAAQ,gBAAU,sBAEnBP,QAAQ,KAAKK,kBAAQ,CAACC,GAAG,2BAA+B,EACxDX,IAAI,IAAIa,MAAM,8BAAuBb,IAAI,EAAG,EAC5CG,SAAS;EACT,iBAEF;IAAM,SAAS;EAA6B,GAAEI,IAAI,IAAIN,QAAQ,CAAQ,EACrE,IAAAa,kBAAY,EAACZ,KAAK,CAAC,iBAClB,oBAAC,gBAAO;IAAC,SAAS,6BAAkC;IAAC,IAAI,EAAC;EAAG,GAC1DA,KAAK,CAET,CACQ;AAEf,CAAC;AAAC;AAAA;EAAA;EAAA;EAAA;AAAA"}