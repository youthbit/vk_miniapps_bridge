{"version":3,"file":"PullToRefresh.js","names":["cancelEvent","event","originalEvent","preventDefault","cancelable","stopPropagation","TOUCH_MOVE_EVENT_PARAMS","passive","PullToRefresh","children","isFetching","onRefresh","className","restProps","platform","usePlatform","scroll","useScroll","useDOM","document","prevIsFetching","usePrevious","initParams","React","useMemo","start","Platform","IOS","max","maxY","refreshing","positionMultiplier","useState","spinnerY","setSpinnerY","watching","setWatching","setRefreshing","canRefresh","setCanRefresh","touchDown","setTouchDown","prevTouchDown","touchY","useRef","contentShift","setContentShift","spinnerProgress","setSpinnerProgress","onWindowTouchMove","useGlobalEventListener","resetRefreshingState","useCallback","onRefreshingFinish","useTimeout","setWaitFetchingTimeout","set","clearWaitFetchingTimeout","clear","useIsomorphicLayoutEffect","undefined","runRefreshing","prevSpinnerY","runTapticImpactOccurred","onTouchStart","e","onTouchMove","isY","shiftY","pageYOffset","getScroll","y","shift","Math","current","currentY","clamp","progress","abs","onTouchEnd","spinnerTransform","contentTransform","classNames","transform","WebkitTransform","opacity"],"sources":["../../../../src/components/PullToRefresh/PullToRefresh.tsx"],"sourcesContent":["import * as React from 'react';\nimport { AnyFunction } from '../../types';\nimport { DOMProps, useDOM } from '../../lib/dom';\nimport { classNames } from '@vkontakte/vkjs';\nimport { Platform } from '../../lib/platform';\nimport { runTapticImpactOccurred } from '../../lib/taptic';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { useGlobalEventListener } from '../../hooks/useGlobalEventListener';\nimport { ScrollContextInterface, useScroll } from '../AppRoot/ScrollContext';\nimport { Touch, TouchEvent, TouchProps } from '../Touch/Touch';\nimport { FixedLayout } from '../FixedLayout/FixedLayout';\nimport { PullToRefreshSpinner } from './PullToRefreshSpinner';\nimport TouchRootContext from '../Touch/TouchContext';\nimport { usePrevious } from '../../hooks/usePrevious';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { clamp } from '../../helpers/math';\nimport styles from './PullToRefresh.module.css';\n\nfunction cancelEvent(event: any) {\n  if (!event) {\n    return false;\n  }\n  while (event.originalEvent) {\n    event = event.originalEvent;\n  }\n  if (event.preventDefault && event.cancelable) {\n    event.preventDefault();\n  }\n  if (event.stopPropagation) {\n    event.stopPropagation();\n  }\n  return false;\n}\n\nexport interface PullToRefreshProps extends DOMProps, TouchProps {\n  /**\n   * Будет вызвана для обновления контента (прим.: функция должна быть мемоизированным коллбэком)\n   */\n  onRefresh: AnyFunction;\n  /**\n   * Определяет, выполняется ли обновление. Для скрытия спиннера после получения контента необходимо передать `false`\n   */\n  isFetching?: boolean;\n  /** @ignore */\n  scroll?: ScrollContextInterface;\n  children?: React.ReactNode;\n}\n\nconst TOUCH_MOVE_EVENT_PARAMS = {\n  cancelable: true,\n  passive: false,\n};\n\n/**\n * @see https://vkcom.github.io/VKUI/#/PullToRefresh\n */\nexport const PullToRefresh = ({\n  children,\n  isFetching,\n  onRefresh,\n  className,\n  ...restProps\n}: PullToRefreshProps) => {\n  const platform = usePlatform();\n  const scroll = useScroll();\n  const { document } = useDOM();\n  const prevIsFetching = usePrevious(isFetching);\n\n  const initParams = React.useMemo(\n    () => ({\n      start: platform === Platform.IOS ? -10 : -45,\n      max: platform === Platform.IOS ? 50 : 80,\n      maxY: platform === Platform.IOS ? 400 : 80,\n      refreshing: platform === Platform.IOS ? 36 : 50,\n      positionMultiplier: platform === Platform.IOS ? 0.21 : 1,\n    }),\n    [platform],\n  );\n\n  const [spinnerY, setSpinnerY] = React.useState(initParams.start);\n  const [watching, setWatching] = React.useState(false);\n  const [refreshing, setRefreshing] = React.useState(false);\n  const [canRefresh, setCanRefresh] = React.useState(false);\n  const [touchDown, setTouchDown] = React.useState(false);\n  const prevTouchDown = usePrevious(touchDown);\n\n  const touchY = React.useRef(0);\n  const [contentShift, setContentShift] = React.useState(0);\n  const [spinnerProgress, setSpinnerProgress] = React.useState(0);\n\n  const onWindowTouchMove = (event: Event) => {\n    if (refreshing) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  };\n\n  useGlobalEventListener(document, 'touchmove', onWindowTouchMove, TOUCH_MOVE_EVENT_PARAMS);\n\n  const resetRefreshingState = React.useCallback(() => {\n    setWatching(false);\n    setCanRefresh(false);\n    setRefreshing(false);\n    setSpinnerY(initParams.start);\n    setSpinnerProgress(0);\n    setContentShift(0);\n  }, [initParams]);\n\n  const onRefreshingFinish = React.useCallback(() => {\n    if (!touchDown) {\n      resetRefreshingState();\n    }\n  }, [touchDown, resetRefreshingState]);\n\n  const { set: setWaitFetchingTimeout, clear: clearWaitFetchingTimeout } = useTimeout(\n    onRefreshingFinish,\n    1000,\n  );\n\n  useIsomorphicLayoutEffect(() => {\n    if (prevIsFetching !== undefined && prevIsFetching && !isFetching) {\n      onRefreshingFinish();\n    }\n  }, [prevIsFetching, isFetching, onRefreshingFinish]);\n\n  useIsomorphicLayoutEffect(() => {\n    if (prevIsFetching !== undefined && !prevIsFetching && isFetching) {\n      clearWaitFetchingTimeout();\n    }\n  }, [isFetching, prevIsFetching, clearWaitFetchingTimeout]);\n\n  const runRefreshing = React.useCallback(() => {\n    if (!refreshing && onRefresh) {\n      // cleanup if the consumer does not start fetching in 1s\n      setWaitFetchingTimeout();\n\n      setRefreshing(true);\n      setSpinnerY((prevSpinnerY) =>\n        platform === Platform.IOS ? prevSpinnerY : initParams.refreshing,\n      );\n\n      onRefresh();\n      runTapticImpactOccurred('light');\n    }\n  }, [refreshing, onRefresh, setWaitFetchingTimeout, platform, initParams.refreshing]);\n\n  useIsomorphicLayoutEffect(() => {\n    if (prevTouchDown !== undefined && prevTouchDown && !touchDown) {\n      if (!refreshing && canRefresh) {\n        runRefreshing();\n      } else if (refreshing && !isFetching) {\n        // only iOS can start refresh before gesture end\n        resetRefreshingState();\n      } else {\n        // refreshing && isFetching: refresh in progress\n        // OR !refreshing && !canRefresh: pull was not strong enough\n        setSpinnerY(refreshing ? initParams.refreshing : initParams.start);\n        setSpinnerProgress(0);\n        setContentShift(0);\n      }\n    }\n  }, [\n    initParams,\n    prevIsFetching,\n    isFetching,\n    onRefreshingFinish,\n    prevTouchDown,\n    touchDown,\n    refreshing,\n    canRefresh,\n    runRefreshing,\n  ]);\n\n  const onTouchStart = (e: TouchEvent) => {\n    if (refreshing) {\n      cancelEvent(e);\n    }\n    setTouchDown(true);\n  };\n\n  const onTouchMove = (e: TouchEvent) => {\n    const { isY, shiftY } = e;\n    const { start, max } = initParams;\n    const pageYOffset = scroll?.getScroll().y;\n\n    if (watching && touchDown) {\n      cancelEvent(e);\n\n      const { positionMultiplier, maxY } = initParams;\n\n      const shift = Math.max(0, shiftY - touchY.current);\n\n      const currentY = clamp(start + shift * positionMultiplier, start, maxY);\n      const progress = currentY > -10 ? Math.abs((currentY + 10) / max) * 80 : 0;\n\n      setSpinnerY(currentY);\n      setSpinnerProgress(clamp(progress, 0, 80));\n      setCanRefresh(progress > 80);\n      setContentShift((currentY + 10) * 2.3);\n\n      if (progress > 85 && !refreshing && platform === Platform.IOS) {\n        runRefreshing();\n      }\n    } else if (isY && pageYOffset === 0 && shiftY > 0 && !refreshing && touchDown) {\n      cancelEvent(e);\n\n      touchY.current = shiftY;\n      setWatching(true);\n      setSpinnerY(start);\n      setSpinnerProgress(0);\n    }\n  };\n\n  const onTouchEnd = () => {\n    setWatching(false);\n    setTouchDown(false);\n  };\n\n  const spinnerTransform = `translate3d(0, ${spinnerY}px, 0)`;\n  let contentTransform = '';\n\n  if (platform === Platform.IOS && refreshing && !touchDown) {\n    contentTransform = 'translate3d(0, 100px, 0)';\n  } else if (platform === Platform.IOS && (contentShift || refreshing)) {\n    contentTransform = `translate3d(0, ${contentShift}px, 0)`;\n  }\n\n  return (\n    <TouchRootContext.Provider value={true}>\n      <Touch\n        {...restProps}\n        onStart={onTouchStart}\n        onMove={onTouchMove}\n        onEnd={onTouchEnd}\n        className={classNames(\n          styles['PullToRefresh'],\n          platform === Platform.IOS && styles['PullToRefresh--ios'],\n          watching && styles['PullToRefresh--watching'],\n          refreshing && styles['PullToRefresh--refreshing'],\n          className,\n        )}\n      >\n        <FixedLayout className={styles['PullToRefresh__controls']}>\n          <PullToRefreshSpinner\n            style={{\n              transform: spinnerTransform,\n              WebkitTransform: spinnerTransform,\n              opacity: watching || refreshing || canRefresh ? 1 : 0,\n            }}\n            on={refreshing}\n            progress={refreshing ? undefined : spinnerProgress}\n          />\n        </FixedLayout>\n\n        <div\n          className={styles['PullToRefresh__content']}\n          style={{\n            transform: contentTransform,\n            WebkitTransform: contentTransform,\n          }}\n        >\n          {children}\n        </div>\n      </Touch>\n    </TouchRootContext.Provider>\n  );\n};\n"],"mappings":"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"}