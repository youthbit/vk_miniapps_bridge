{"version":3,"file":"View.js","names":["SWIPE_BACK_AREA","SwipeBackResults","scrollsCache","warn","warnOnce","View","activePanelProp","activePanel","history","nav","onTransition","onSwipeBack","onSwipeBackStart","onSwipeBackCancelProp","onSwipeBackCancel","children","className","restProps","scrolls","React","useRef","getNavId","id","afterTransition","noop","useEffect","current","panelNodes","useDOM","window","document","scroll","useScroll","configProvider","useConfigProvider","splitCol","useSplitCol","platform","usePlatform","useState","animated","setAnimated","visiblePanels","setVisiblePanels","setActivePanel","undefined","isBack","setIsBack","prevPanel","setPrevPanel","nextPanel","setNextPanel","swipingBack","setSwipingBack","swipeBackPrevented","setSwipeBackPrevented","swipeBackStartX","setSwipeBackStartX","swipeBackShift","setSwipeBackShift","swipeBackNextPanel","setSwipeBackNextPanel","swipeBackPrevPanel","setSwipeBackPrevPanel","swipeBackResult","setSwipeBackResult","browserSwipe","setBrowserSwipe","prevActivePanel","usePrevious","prevSwipingBack","prevBrowserSwipe","prevSwipeBackResult","prevSwipeBackPrevPanel","prevOnTransition","panels","Children","toArray","filter","panel","panelId","props","includes","disableAnimation","transitionMotionEnabled","animate","Platform","VKCOM","pickPanel","flushTransition","useCallback","isBackTransition","scrollTo","from","to","useIsomorphicLayoutEffect","transitionEndHandler","e","animationName","Boolean","useWaitTransitionFinish","waitTransitionFinish","animationFinishTimeout","useTimeout","IOS","onSwipeBackSuccess","swipingBackTransitionEndHandler","propertyName","target","fail","success","onMoveX","event","swipeBackExcluded","isWebView","startX","innerWidth","length","payload","blurActiveElement","getScroll","y","slice","shiftX","onEnd","speed","duration","calcPanelSwipeStyles","canUseDOM","isPrev","isNext","prevPanelTranslate","nextPanelTranslate","prevPanelShadow","boxShadow","transform","WebkitTransform","firstLayerId","map","find","animationEvent","supported","set","classNames","isTransitionTarget","compensateScroll","el","marginTop"],"sources":["../../../../src/components/View/View.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames, noop } from '@vkontakte/vkjs';\nimport { animationEvent } from '../../lib/supportEvents';\nimport { Platform } from '../../lib/platform';\nimport { Touch, TouchEvent } from '../Touch/Touch';\nimport { useConfigProvider } from '../ConfigProvider/ConfigProviderContext';\nimport { useSplitCol } from '../SplitCol/SplitCol';\nimport { canUseDOM, useDOM, blurActiveElement } from '../../lib/dom';\nimport { useScroll } from '../AppRoot/ScrollContext';\nimport { NavTransitionProvider } from '../NavTransitionContext/NavTransitionContext';\nimport { getNavId, NavIdProps } from '../../lib/getNavId';\nimport { warnOnce } from '../../lib/warnOnce';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { swipeBackExcluded } from './utils';\nimport { useWaitTransitionFinish } from '../../hooks/useWaitTransitionFinish';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { usePrevious } from '../../hooks/usePrevious';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nimport styles from './View.module.css';\nimport iosStyles from './ViewIOS.module.css';\n\nconst SWIPE_BACK_AREA = 70;\n\nenum SwipeBackResults {\n  fail = 1,\n  success,\n}\n\ninterface Scrolls {\n  [index: string]: number | undefined;\n}\n\ninterface ViewsScrolls {\n  [index: string]: Scrolls;\n}\n\nexport let scrollsCache: ViewsScrolls = {};\n\nexport interface ViewProps extends React.HTMLAttributes<HTMLElement>, NavIdProps {\n  activePanel: string;\n  onTransition?(params: { isBack: boolean; from: string; to: string }): void;\n  /**\n   * callback свайпа назад\n   */\n  onSwipeBack?(): void;\n  /**\n   * callback начала анимации свайпа назад.\n   *\n   * Чтобы остановить свайп назад, возвращайте `\"prevent\"`.\n   */\n  onSwipeBackStart?(activePanel: string | null): void | 'prevent';\n  /**\n   * callback завершения анимации отмененного пользователем свайпа\n   */\n  onSwipeBackCancel?(): void;\n  history?: string[];\n}\n\nexport interface ViewState {\n  animated: boolean;\n\n  visiblePanels: string[];\n  activePanel: string | null;\n  isBack: boolean | undefined;\n  prevPanel: string | null;\n  nextPanel: string | null;\n\n  swipingBack: boolean;\n  swipeBackStartX: number;\n  swipeBackShift: number;\n  swipeBackNextPanel: string | null;\n  swipeBackPrevPanel: string | null;\n  swipeBackResult: SwipeBackResults | null;\n\n  browserSwipe: boolean;\n}\n\nconst warn = warnOnce('View');\n\n/**\n * @see https://vkcom.github.io/VKUI/#/View\n */\nexport const View = ({\n  activePanel: activePanelProp,\n  history,\n  nav,\n  onTransition,\n  onSwipeBack,\n  onSwipeBackStart,\n  onSwipeBackCancel: onSwipeBackCancelProp,\n  children,\n  className,\n  ...restProps\n}: ViewProps) => {\n  const scrolls = React.useRef(scrollsCache[getNavId({ nav, id: restProps.id }) as string] || {});\n  const afterTransition = React.useRef(noop);\n\n  React.useEffect(() => () => {\n    const id = getNavId({ nav, id: restProps.id });\n    if (id) {\n      scrollsCache[id] = scrolls.current;\n    }\n  });\n\n  const panelNodes = React.useRef<{ [id: string]: HTMLDivElement | null }>({});\n\n  const { window, document } = useDOM();\n  const scroll = useScroll();\n  const configProvider = useConfigProvider();\n  const splitCol = useSplitCol();\n  const platform = usePlatform();\n\n  const [animated, setAnimated] = React.useState(false);\n\n  const [visiblePanels, setVisiblePanels] = React.useState([activePanelProp]);\n  const [activePanel, setActivePanel] = React.useState<string | null>(activePanelProp);\n  const [isBack, setIsBack] = React.useState<boolean | undefined>(undefined);\n  const [prevPanel, setPrevPanel] = React.useState<string | null>(null);\n  const [nextPanel, setNextPanel] = React.useState<string | null>(null);\n\n  const [swipingBack, setSwipingBack] = React.useState<boolean>(false);\n  const [swipeBackPrevented, setSwipeBackPrevented] = React.useState<boolean>(false);\n  const [swipeBackStartX, setSwipeBackStartX] = React.useState<number>(0);\n  const [swipeBackShift, setSwipeBackShift] = React.useState<number>(0);\n  const [swipeBackNextPanel, setSwipeBackNextPanel] = React.useState<string | null>(null);\n  const [swipeBackPrevPanel, setSwipeBackPrevPanel] = React.useState<string | null>(null);\n  const [swipeBackResult, setSwipeBackResult] = React.useState<SwipeBackResults | null>(null);\n\n  const [browserSwipe, setBrowserSwipe] = React.useState(false);\n\n  const prevActivePanel = usePrevious(activePanelProp);\n  const prevSwipingBack = usePrevious(swipingBack);\n  const prevBrowserSwipe = usePrevious(browserSwipe);\n  const prevSwipeBackResult = usePrevious(swipeBackResult);\n  const prevSwipeBackPrevPanel = usePrevious(swipeBackPrevPanel);\n  const prevOnTransition = usePrevious(onTransition);\n\n  const panels = (React.Children.toArray(children) as React.ReactElement[]).filter(\n    (panel: React.ReactElement) => {\n      const panelId = getNavId(panel.props, warn);\n\n      return (\n        (panelId !== undefined && visiblePanels.includes(panelId)) ||\n        panelId === swipeBackPrevPanel ||\n        panelId === swipeBackNextPanel\n      );\n    },\n  );\n\n  const disableAnimation =\n    configProvider?.transitionMotionEnabled === false ||\n    !splitCol?.animate ||\n    platform === Platform.VKCOM;\n\n  const pickPanel = (id: string | null) => {\n    if (id === null) {\n      return null;\n    }\n    return panelNodes.current[id];\n  };\n\n  const flushTransition = React.useCallback(\n    (prevPanel: string, isBackTransition: boolean) => {\n      if (isBackTransition) {\n        scrolls.current[prevPanel] = 0;\n      }\n      setPrevPanel(null);\n      setNextPanel(null);\n      setVisiblePanels([activePanelProp]);\n      setActivePanel(activePanelProp);\n      setAnimated(false);\n      setIsBack(undefined);\n\n      afterTransition.current = () => {\n        scroll?.scrollTo(0, isBackTransition ? scrolls.current[activePanelProp] : 0);\n        onTransition &&\n          onTransition({\n            isBack: isBackTransition,\n            from: prevPanel,\n            to: activePanelProp,\n          });\n      };\n    },\n    [activePanelProp, onTransition, scroll],\n  );\n\n  useIsomorphicLayoutEffect(() => {\n    afterTransition.current();\n    afterTransition.current = noop;\n  }, [afterTransition.current]);\n\n  const transitionEndHandler = React.useCallback(\n    (e?: React.AnimationEvent): void => {\n      if (\n        (!e ||\n          [\n            'vkui-animation-ios-next-forward',\n            'vkui-animation-ios-prev-back',\n            'vkui-animation-view-next-forward',\n            'vkui-animation-view-prev-back',\n          ].includes(e.animationName)) &&\n        prevPanel !== null\n      ) {\n        flushTransition(prevPanel, Boolean(isBack));\n      }\n    },\n    [flushTransition, isBack, prevPanel],\n  );\n\n  const { waitTransitionFinish } = useWaitTransitionFinish();\n  const animationFinishTimeout = useTimeout(\n    transitionEndHandler,\n    platform === Platform.IOS ? 600 : 300,\n  );\n\n  const onSwipeBackSuccess = React.useCallback(() => {\n    onSwipeBack && onSwipeBack();\n  }, [onSwipeBack]);\n\n  const onSwipeBackCancel = React.useCallback(() => {\n    onSwipeBackCancelProp && onSwipeBackCancelProp();\n    setSwipeBackPrevPanel(null);\n    setSwipeBackNextPanel(null);\n    setSwipingBack(false);\n    setSwipeBackResult(null);\n    setSwipeBackStartX(0);\n    setSwipeBackShift(0);\n  }, [onSwipeBackCancelProp]);\n\n  const swipingBackTransitionEndHandler = React.useCallback(\n    (e?: TransitionEvent): void => {\n      // indexOf because of vendor prefixes in old browsers\n      if (\n        !e ||\n        (e?.propertyName.includes('transform') && e?.target === pickPanel(swipeBackNextPanel))\n      ) {\n        switch (swipeBackResult) {\n          case SwipeBackResults.fail:\n            onSwipeBackCancel();\n            break;\n          case SwipeBackResults.success:\n            onSwipeBackSuccess();\n        }\n      }\n    },\n    [onSwipeBackCancel, onSwipeBackSuccess, swipeBackNextPanel, swipeBackResult],\n  );\n\n  const onMoveX = (event: TouchEvent): void => {\n    if (\n      platform !== Platform.IOS ||\n      swipeBackPrevented ||\n      swipeBackExcluded(event) ||\n      disableAnimation\n    ) {\n      return;\n    }\n\n    if (!configProvider?.isWebView) {\n      if (\n        (event.startX <= SWIPE_BACK_AREA || event.startX >= window!.innerWidth - SWIPE_BACK_AREA) &&\n        !browserSwipe\n      ) {\n        setBrowserSwipe(true);\n      }\n\n      return;\n    }\n\n    if (!onSwipeBack || (animated && event.startX <= SWIPE_BACK_AREA)) {\n      return;\n    }\n\n    if (!swipingBack && event.startX <= SWIPE_BACK_AREA && history && history.length > 1) {\n      // Начался свайп назад\n      if (onSwipeBackStart) {\n        const payload = onSwipeBackStart(activePanel);\n        if (payload === 'prevent') {\n          setSwipeBackPrevented(true);\n          return;\n        }\n      }\n\n      if (activePanel !== null) {\n        // Note: вызываем закрытие клавиатуры. В iOS это нативное поведение при свайпе.\n        blurActiveElement(document);\n        scrolls.current[activePanel] = scroll?.getScroll().y;\n      }\n\n      setSwipingBack(true);\n      setSwipeBackStartX(event.startX);\n      setSwipeBackPrevPanel(activePanel);\n      setSwipeBackNextPanel(history.slice(-2)[0]);\n    }\n\n    if (swipingBack) {\n      let swipeBackShift = 0;\n      if (event.shiftX < 0) {\n        swipeBackShift = 0;\n      } else if (event.shiftX > window!.innerWidth - swipeBackStartX) {\n        swipeBackShift = window!.innerWidth;\n      } else {\n        swipeBackShift = event.shiftX;\n      }\n      setSwipeBackShift(swipeBackShift);\n    }\n  };\n\n  const onEnd = React.useCallback(\n    (event: TouchEvent): void => {\n      if (swipingBack) {\n        const speed = (swipeBackShift / event.duration) * 1000;\n        if (swipeBackShift === 0) {\n          onSwipeBackCancel();\n        } else if (swipeBackShift >= (window!.innerWidth ?? 0)) {\n          onSwipeBackSuccess();\n        } else if (speed > 250 || swipeBackStartX + swipeBackShift > window!.innerWidth / 2) {\n          setSwipeBackResult(SwipeBackResults.success);\n        } else {\n          setSwipeBackResult(SwipeBackResults.fail);\n        }\n      }\n      if (swipeBackPrevented) {\n        setSwipeBackPrevented(false);\n      }\n    },\n    [\n      onSwipeBackCancel,\n      onSwipeBackSuccess,\n      swipeBackShift,\n      swipeBackStartX,\n      swipingBack,\n      swipeBackPrevented,\n      window,\n    ],\n  );\n\n  const calcPanelSwipeStyles = (panelId: string | undefined): React.CSSProperties => {\n    if (!canUseDOM || !window) {\n      return {};\n    }\n\n    const isPrev = panelId === swipeBackPrevPanel;\n    const isNext = panelId === swipeBackNextPanel;\n\n    if ((!isPrev && !isNext) || swipeBackResult) {\n      return {};\n    }\n\n    let prevPanelTranslate = `${swipeBackShift}px`;\n    let nextPanelTranslate = `${-50 + (swipeBackShift * 100) / window.innerWidth / 2}%`;\n    let prevPanelShadow = (0.3 * (window.innerWidth - swipeBackShift)) / window.innerWidth;\n\n    if (swipeBackResult) {\n      return isPrev ? { boxShadow: `-2px 0 12px rgba(0, 0, 0, ${prevPanelShadow})` } : {};\n    }\n\n    if (isNext) {\n      return {\n        transform: `translate3d(${nextPanelTranslate}, 0, 0)`,\n        WebkitTransform: `translate3d(${nextPanelTranslate}, 0, 0)`,\n      };\n    }\n    if (isPrev) {\n      return {\n        transform: `translate3d(${prevPanelTranslate}, 0, 0)`,\n        WebkitTransform: `translate3d(${prevPanelTranslate}, 0, 0)`,\n        boxShadow: `-2px 0 12px rgba(0, 0, 0, ${prevPanelShadow})`,\n      };\n    }\n\n    return {};\n  };\n\n  React.useEffect(() => {\n    // Нужен переход\n    if (\n      prevActivePanel &&\n      prevActivePanel !== activePanelProp &&\n      !prevSwipingBack &&\n      !prevBrowserSwipe\n    ) {\n      const firstLayerId = (React.Children.toArray(children) as React.ReactElement[])\n        .map((panel) => getNavId(panel.props, warn))\n        .find((id) => id === prevActivePanel || id === activePanelProp);\n\n      const isBackTransition = firstLayerId === activePanelProp;\n      scrolls.current[prevActivePanel] = scroll?.getScroll().y;\n\n      if (disableAnimation) {\n        flushTransition(prevActivePanel, isBackTransition);\n      } else {\n        blurActiveElement(document);\n\n        setVisiblePanels([prevActivePanel, activePanelProp]);\n        setPrevPanel(prevActivePanel);\n        setNextPanel(activePanelProp);\n        setActivePanel(null);\n        setAnimated(true);\n        setIsBack(isBackTransition);\n\n        // Фолбек анимации перехода\n        if (!animationEvent.supported) {\n          animationFinishTimeout.set();\n        }\n      }\n    }\n\n    // Закончилась анимация свайпа назад\n    if (prevActivePanel && prevActivePanel !== activePanelProp && prevSwipingBack) {\n      const nextPanel = activePanelProp;\n      const prevPanel = prevActivePanel;\n      if (prevSwipeBackPrevPanel) {\n        scrolls.current[prevSwipeBackPrevPanel] = 0;\n      }\n\n      setSwipeBackPrevPanel(null);\n      setSwipeBackNextPanel(null);\n      setSwipingBack(false);\n      setSwipeBackResult(null);\n      setSwipeBackStartX(0);\n      setSwipeBackShift(0);\n      setActivePanel(nextPanel);\n      setVisiblePanels([nextPanel]);\n\n      afterTransition.current = () => {\n        if (nextPanel !== null) {\n          scroll?.scrollTo(0, scrolls.current[nextPanel]);\n        }\n        prevOnTransition &&\n          prevOnTransition({\n            isBack: true,\n            from: prevPanel,\n            to: nextPanel,\n          });\n      };\n    }\n\n    // Началась анимация завершения свайпа назад.\n    if (!prevSwipeBackResult && swipeBackResult) {\n      waitTransitionFinish(\n        pickPanel(swipeBackNextPanel),\n        swipingBackTransitionEndHandler,\n        platform === Platform.IOS ? 600 : 300,\n      );\n    }\n\n    // Если свайп назад отменился (когда пользователь недостаточно сильно свайпнул)\n    if (prevSwipeBackResult === SwipeBackResults.fail && !swipeBackResult && activePanel !== null) {\n      scroll?.scrollTo(0, scrolls.current[activePanel]);\n    }\n\n    // Закончился Safari свайп\n    if (prevActivePanel !== activePanelProp && browserSwipe) {\n      setBrowserSwipe(false);\n      setNextPanel(null);\n      setPrevPanel(null);\n      setAnimated(false);\n      setVisiblePanels([activePanelProp]);\n      setActivePanel(activePanelProp);\n    }\n  }, [\n    activePanelProp,\n    activePanel,\n    animationFinishTimeout,\n    browserSwipe,\n    children,\n    disableAnimation,\n    document,\n    flushTransition,\n    onSwipeBackStart,\n    panels,\n    platform,\n    prevActivePanel,\n    prevBrowserSwipe,\n    prevOnTransition,\n    prevSwipeBackPrevPanel,\n    prevSwipeBackResult,\n    prevSwipingBack,\n    scroll,\n    swipeBackNextPanel,\n    swipeBackResult,\n    swipingBack,\n    swipingBackTransitionEndHandler,\n    waitTransitionFinish,\n  ]);\n\n  return (\n    <Touch\n      Component=\"section\"\n      {...restProps}\n      className={classNames(\n        styles['View'],\n        platform === Platform.IOS && iosStyles['View--ios'],\n        !disableAnimation && animated && styles['View--animated'],\n        !disableAnimation && swipingBack && styles['View--swiping-back'],\n        disableAnimation && styles['View--no-motion'],\n        className,\n      )}\n      onMoveX={onMoveX}\n      onEnd={onEnd}\n    >\n      <div className={styles['View__panels']}>\n        {panels.map((panel: React.ReactElement) => {\n          const panelId = getNavId(panel.props, warn);\n          const isPrev = panelId === prevPanel || panelId === swipeBackPrevPanel;\n          const isTransitionTarget = animated && panelId === (isBack ? prevPanel : nextPanel);\n          const compensateScroll =\n            isPrev || panelId === swipeBackNextPanel || (panelId === nextPanel && isBack);\n\n          return (\n            <div\n              className={classNames(\n                styles['View__panel'],\n                panelId === activePanel && iosStyles['View__panel--active'],\n                panelId === prevPanel && styles['View__panel--prev'],\n                panelId === nextPanel && styles['View__panel--next'],\n                panelId === swipeBackPrevPanel && iosStyles['View__panel--swipe-back-prev'],\n                panelId === swipeBackNextPanel && iosStyles['View__panel--swipe-back-next'],\n                swipeBackResult === SwipeBackResults.success &&\n                  iosStyles['View__panel--swipe-back-success'],\n                swipeBackResult === SwipeBackResults.fail &&\n                  iosStyles['View__panel--swipe-back-failed'],\n              )}\n              onAnimationEnd={isTransitionTarget ? transitionEndHandler : undefined}\n              ref={(el) => panelId !== undefined && (panelNodes.current[panelId] = el)}\n              style={calcPanelSwipeStyles(panelId)}\n              key={panelId}\n            >\n              <div\n                className={styles['View__panel-in']}\n                style={{\n                  marginTop: compensateScroll ? -(scrolls.current[panelId] ?? 0) : undefined,\n                }}\n              >\n                <NavTransitionProvider\n                  entering={panelId === nextPanel || panelId === swipeBackNextPanel}\n                >\n                  {panel}\n                </NavTransitionProvider>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </Touch>\n  );\n};\n"],"mappings":"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"}