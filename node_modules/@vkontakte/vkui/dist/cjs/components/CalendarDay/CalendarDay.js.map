{"version":3,"file":"CalendarDay.js","names":["CalendarDay","React","memo","day","today","selected","onChange","hidden","disabled","active","selectionStart","selectionEnd","focused","onEnter","onLeave","hinted","hintedSelectionStart","hintedSelectionEnd","sameMonth","size","className","props","useConfigProvider","locale","ref","useRef","onClick","useCallback","handleEnter","handleLeave","useEffect","current","dispatchEvent","Event","ENABLE_KEYBOARD_INPUT_EVENT_NAME","bubbles","focus","classNames","styles","Intl","DateTimeFormat","weekday","year","month","format","getDate","displayName"],"sources":["../../../../src/components/CalendarDay/CalendarDay.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { Tappable, TappableElementProps } from '../Tappable/Tappable';\nimport { ENABLE_KEYBOARD_INPUT_EVENT_NAME } from '../../hooks/useKeyboardInputTracker';\nimport { useConfigProvider } from '../ConfigProvider/ConfigProviderContext';\nimport styles from './CalendarDay.module.css';\n\nexport type CalendarDayElementProps = Omit<\n  TappableElementProps,\n  'onChange' | 'size' | 'disabled' | 'selected'\n>;\n\nexport interface CalendarDayProps extends CalendarDayElementProps {\n  day: Date;\n  today?: boolean;\n  selected?: boolean;\n  selectionStart?: boolean;\n  selectionEnd?: boolean;\n  hintedSelectionStart?: boolean;\n  hintedSelectionEnd?: boolean;\n  active?: boolean;\n  hidden?: boolean;\n  disabled?: boolean;\n  focused?: boolean;\n  hinted?: boolean;\n  sameMonth?: boolean;\n  size?: 's' | 'm';\n  onChange(value: Date): void;\n  onEnter?(value: Date): void;\n  onLeave?(value: Date): void;\n}\n\nexport const CalendarDay = React.memo(\n  ({\n    day,\n    today,\n    selected,\n    onChange,\n    hidden,\n    disabled,\n    active,\n    selectionStart,\n    selectionEnd,\n    focused,\n    onEnter,\n    onLeave,\n    hinted,\n    hintedSelectionStart,\n    hintedSelectionEnd,\n    sameMonth,\n    size,\n    className,\n    ...props\n  }: CalendarDayProps) => {\n    const { locale } = useConfigProvider();\n    const ref = React.useRef<HTMLElement>(null);\n    const onClick = React.useCallback(() => onChange(day), [day, onChange]);\n    const handleEnter = React.useCallback(() => onEnter?.(day), [day, onEnter]);\n    const handleLeave = React.useCallback(() => onLeave?.(day), [day, onLeave]);\n\n    React.useEffect(() => {\n      if (focused && ref.current) {\n        ref.current.dispatchEvent(new Event(ENABLE_KEYBOARD_INPUT_EVENT_NAME, { bubbles: true }));\n        ref.current.focus();\n      }\n    }, [focused]);\n\n    if (hidden) {\n      return <div className={styles['CalendarDay__hidden']}></div>;\n    }\n\n    return (\n      <Tappable\n        className={classNames(\n          styles['CalendarDay'],\n          size && styles[`CalendarDay--size-${size}`],\n          today && styles['CalendarDay--today'],\n          selected && !disabled && styles['CalendarDay--selected'],\n          active && !disabled && styles['CalendarDay--active'],\n          selectionStart && styles['CalendarDay--selection-start'],\n          selectionEnd && styles['CalendarDay--selection-end'],\n          disabled && styles['CalendarDay--disabled'],\n          !sameMonth && styles['CalendarDay--not-same-month'],\n          className,\n        )}\n        hoverMode={active ? styles['CalendarDay--active-hover'] : styles['CalendarDay--hover']}\n        hasActive={false}\n        onClick={onClick}\n        disabled={disabled}\n        aria-label={new Intl.DateTimeFormat(locale, {\n          weekday: 'long',\n          year: 'numeric',\n          month: 'long',\n          day: 'numeric',\n        }).format(day)}\n        tabIndex={-1}\n        getRootRef={ref}\n        focusVisibleMode={active ? 'outside' : 'inside'}\n        onEnter={handleEnter}\n        onLeave={handleLeave}\n        {...props}\n      >\n        <div\n          className={classNames(\n            styles['CalendarDay__hinted'],\n            hinted && styles['CalendarDay__hinted--active'],\n            hintedSelectionStart && styles['CalendarDay__hinted--selection-start'],\n            hintedSelectionEnd && styles['CalendarDay__hinted--selection-end'],\n          )}\n        >\n          <div\n            className={classNames(\n              styles['CalendarDay__inner'],\n              active && !disabled && styles['CalendarDay__inner--active'],\n            )}\n          >\n            <div className={styles['CalendarDay__day-number']}>{day.getDate()}</div>\n          </div>\n        </div>\n      </Tappable>\n    );\n  },\n);\n\nCalendarDay.displayName = 'CalendarDay';\n"],"mappings":"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"}