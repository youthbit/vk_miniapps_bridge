{"version":3,"file":"ConfigProvider.js","names":["ConfigProvider","props","parentConfig","useConfigProvider","children","webviewType","isWebView","transitionMotionEnabled","platform","locale","appearanceProp","appearance","onDetectAppearanceByBridge","noop","useAutoDetectAppearance","useDOM","document","useIsomorphicLayoutEffect","VKUITokensClassName","generateVKUITokensClassName","body","classList","add","remove","configContext","useObjectMemo"],"sources":["../../../../src/components/ConfigProvider/ConfigProvider.tsx"],"sourcesContent":["import * as React from 'react';\nimport {\n  ConfigProviderContext,\n  ConfigProviderContextInterface,\n  useConfigProvider,\n} from './ConfigProviderContext';\nimport { TokensClassProvider } from '../../lib/tokensClassProvider';\nimport { useObjectMemo } from '../../hooks/useObjectMemo';\nimport { generateVKUITokensClassName } from '../../helpers/generateVKUITokensClassName';\nimport { useAutoDetectAppearance } from '../../hooks/useAutoDetectAppearance';\nimport { noop } from '@vkontakte/vkjs';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nimport { useDOM } from '../../lib/dom';\n\nexport interface ConfigProviderProps extends Partial<ConfigProviderContextInterface> {\n  onDetectAppearanceByBridge?: () => void;\n  children: React.ReactNode;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/ConfigProvider\n */\nexport const ConfigProvider = (props: ConfigProviderProps) => {\n  const parentConfig = useConfigProvider();\n\n  const {\n    children,\n    webviewType,\n    isWebView,\n    transitionMotionEnabled,\n    platform,\n    locale,\n    appearance: appearanceProp,\n    onDetectAppearanceByBridge = noop,\n  } = {\n    ...parentConfig,\n    ...props,\n  };\n\n  const appearance = useAutoDetectAppearance(appearanceProp, onDetectAppearanceByBridge);\n\n  const { document } = useDOM();\n\n  useIsomorphicLayoutEffect(() => {\n    const VKUITokensClassName = generateVKUITokensClassName(platform, appearance);\n\n    // eslint-disable-next-line no-restricted-properties\n    document!.body.classList.add(VKUITokensClassName);\n\n    return () => {\n      // eslint-disable-next-line no-restricted-properties\n      document!.body.classList.remove(VKUITokensClassName);\n    };\n  }, [platform, appearance]);\n\n  const configContext = useObjectMemo({\n    webviewType,\n    isWebView,\n    transitionMotionEnabled,\n    platform,\n    locale,\n    appearance,\n  });\n\n  return (\n    <ConfigProviderContext.Provider value={configContext}>\n      <TokensClassProvider platform={platform} appearance={appearance}>\n        {children}\n      </TokensClassProvider>\n    </ConfigProviderContext.Provider>\n  );\n};\n"],"mappings":";;;;;;;;;AAAA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AAOA;AACA;AACA;AACO,IAAMA,cAAc,GAAG,SAAjBA,cAAc,CAAIC,KAA0B,EAAK;EAC5D,IAAMC,YAAY,GAAG,IAAAC,wCAAiB,GAAE;EAExC,sFAUKD,YAAY,GACZD,KAAK;IAVRG,QAAQ,uBAARA,QAAQ;IACRC,WAAW,uBAAXA,WAAW;IACXC,SAAS,uBAATA,SAAS;IACTC,uBAAuB,uBAAvBA,uBAAuB;IACvBC,QAAQ,uBAARA,QAAQ;IACRC,MAAM,uBAANA,MAAM;IACMC,cAAc,uBAA1BC,UAAU;IAAA,4CACVC,0BAA0B;IAA1BA,0BAA0B,sCAAGC,UAAI;EAMnC,IAAMF,UAAU,GAAG,IAAAG,gDAAuB,EAACJ,cAAc,EAAEE,0BAA0B,CAAC;EAEtF,cAAqB,IAAAG,WAAM,GAAE;IAArBC,QAAQ,WAARA,QAAQ;EAEhB,IAAAC,oDAAyB,EAAC,YAAM;IAC9B,IAAMC,mBAAmB,GAAG,IAAAC,wDAA2B,EAACX,QAAQ,EAAEG,UAAU,CAAC;;IAE7E;IACAK,QAAQ,CAAEI,IAAI,CAACC,SAAS,CAACC,GAAG,CAACJ,mBAAmB,CAAC;IAEjD,OAAO,YAAM;MACX;MACAF,QAAQ,CAAEI,IAAI,CAACC,SAAS,CAACE,MAAM,CAACL,mBAAmB,CAAC;IACtD,CAAC;EACH,CAAC,EAAE,CAACV,QAAQ,EAAEG,UAAU,CAAC,CAAC;EAE1B,IAAMa,aAAa,GAAG,IAAAC,4BAAa,EAAC;IAClCpB,WAAW,EAAXA,WAAW;IACXC,SAAS,EAATA,SAAS;IACTC,uBAAuB,EAAvBA,uBAAuB;IACvBC,QAAQ,EAARA,QAAQ;IACRC,MAAM,EAANA,MAAM;IACNE,UAAU,EAAVA;EACF,CAAC,CAAC;EAEF,oBACE,oBAAC,4CAAqB,CAAC,QAAQ;IAAC,KAAK,EAAEa;EAAc,gBACnD,oBAAC,wCAAmB;IAAC,QAAQ,EAAEhB,QAAS;IAAC,UAAU,EAAEG;EAAW,GAC7DP,QAAQ,CACW,CACS;AAErC,CAAC;AAAC"}