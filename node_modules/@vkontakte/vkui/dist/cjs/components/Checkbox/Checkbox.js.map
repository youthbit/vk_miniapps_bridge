{"version":3,"file":"Checkbox.js","names":["warn","warnOnce","Checkbox","children","className","style","getRootRef","getRef","description","indeterminate","defaultIndeterminate","onChange","restProps","inputRef","useExternRef","platform","usePlatform","useAdaptivity","sizeY","useAdaptivityConditionalRender","adaptiveSizeY","React","useEffect","indeterminateValue","undefined","current","Boolean","handleChange","useCallback","event","checked","process","env","NODE_ENV","defaultChecked","classNames","Platform","VKCOM","getSizeYClassName","hasReactNode","disabled","IOS","ACTIVE_EFFECT_DELAY","compact","regular"],"sources":["../../../../src/components/Checkbox/Checkbox.tsx"],"sourcesContent":["import * as React from 'react';\nimport { ACTIVE_EFFECT_DELAY, Tappable } from '../Tappable/Tappable';\nimport { classNames, hasReactNode } from '@vkontakte/vkjs';\nimport { Platform } from '../../lib/platform';\nimport {\n  Icon20CheckBoxOn,\n  Icon24CheckBoxOn,\n  Icon20CheckBoxOff,\n  Icon24CheckBoxOff,\n  Icon20CheckBoxIndetermanate,\n} from '@vkontakte/icons';\nimport { HasRef, HasRootRef } from '../../types';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { Footnote } from '../Typography/Footnote/Footnote';\nimport { getSizeYClassName } from '../../helpers/getSizeYClassName';\nimport { useAdaptivity } from '../../hooks/useAdaptivity';\nimport { useExternRef } from '../../hooks/useExternRef';\nimport { useAdaptivityConditionalRender } from '../../hooks/useAdaptivityConditionalRender';\nimport { VisuallyHiddenInput } from '../VisuallyHiddenInput/VisuallyHiddenInput';\nimport { warnOnce } from '../../lib/warnOnce';\nimport styles from './Checkbox.module.css';\n\nexport interface CheckboxProps\n  extends React.InputHTMLAttributes<HTMLInputElement>,\n    HasRootRef<HTMLLabelElement>,\n    HasRef<HTMLInputElement> {\n  description?: React.ReactNode;\n  indeterminate?: boolean;\n  defaultIndeterminate?: boolean;\n}\n\nconst warn = warnOnce('Checkbox');\n\n/**\n * @see https://vkcom.github.io/VKUI/#/Checkbox\n */\nexport const Checkbox = ({\n  children,\n  className,\n  style,\n  getRootRef,\n  getRef,\n  description,\n  indeterminate,\n  defaultIndeterminate,\n  onChange,\n  ...restProps\n}: CheckboxProps) => {\n  const inputRef = useExternRef(getRef);\n  const platform = usePlatform();\n  const { sizeY } = useAdaptivity();\n  const { sizeY: adaptiveSizeY } = useAdaptivityConditionalRender();\n\n  React.useEffect(() => {\n    const indeterminateValue = indeterminate === undefined ? defaultIndeterminate : indeterminate;\n\n    if (inputRef.current) {\n      inputRef.current.indeterminate = Boolean(indeterminateValue);\n    }\n  }, [defaultIndeterminate, indeterminate, inputRef]);\n\n  const handleChange: CheckboxProps['onChange'] = React.useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      if (\n        defaultIndeterminate !== undefined &&\n        indeterminate === undefined &&\n        restProps.checked === undefined &&\n        inputRef.current\n      ) {\n        inputRef.current.indeterminate = false;\n      }\n      if (indeterminate !== undefined && inputRef.current) {\n        inputRef.current.indeterminate = indeterminate;\n      }\n      onChange && onChange(event);\n    },\n    [defaultIndeterminate, indeterminate, restProps.checked, onChange, inputRef],\n  );\n\n  if (process.env.NODE_ENV === 'development') {\n    if (defaultIndeterminate && restProps.defaultChecked) {\n      warn('defaultIndeterminate и defaultChecked не могут быть true одновременно', 'error');\n    }\n\n    if (indeterminate && restProps.checked) {\n      warn('indeterminate и checked не могут быть true одновременно', 'error');\n    }\n\n    if (restProps.defaultChecked && restProps.checked) {\n      warn('defaultChecked и checked не могут быть true одновременно', 'error');\n    }\n  }\n\n  return (\n    <Tappable\n      Component=\"label\"\n      className={classNames(\n        styles['Checkbox'],\n        platform === Platform.VKCOM && styles['Checkbox--vkcom'],\n        getSizeYClassName(styles['Checkbox'], sizeY),\n        !(hasReactNode(children) || hasReactNode(description)) && styles['Checkbox--simple'],\n        className,\n      )}\n      style={style}\n      disabled={restProps.disabled}\n      activeEffectDelay={platform === Platform.IOS ? 100 : ACTIVE_EFFECT_DELAY}\n      getRootRef={getRootRef}\n    >\n      <VisuallyHiddenInput\n        {...restProps}\n        onChange={handleChange}\n        type=\"checkbox\"\n        className={styles['Checkbox__input']}\n        getRef={inputRef}\n      />\n      <div className={classNames(styles['Checkbox__icon'], styles['Checkbox__icon--on'])}>\n        {platform === Platform.VKCOM ? (\n          <Icon20CheckBoxOn />\n        ) : (\n          <React.Fragment>\n            {adaptiveSizeY.compact && (\n              <Icon20CheckBoxOn className={adaptiveSizeY.compact.className} />\n            )}\n            {adaptiveSizeY.regular && (\n              <Icon24CheckBoxOn className={adaptiveSizeY.regular.className} />\n            )}\n          </React.Fragment>\n        )}\n      </div>\n      <div className={classNames(styles['Checkbox__icon'], styles['Checkbox__icon--off'])}>\n        {platform === Platform.VKCOM ? (\n          <Icon20CheckBoxOff />\n        ) : (\n          <React.Fragment>\n            {adaptiveSizeY.compact && (\n              <Icon20CheckBoxOff className={adaptiveSizeY.compact.className} />\n            )}\n            {adaptiveSizeY.regular && (\n              <Icon24CheckBoxOff className={adaptiveSizeY.regular.className} />\n            )}\n          </React.Fragment>\n        )}\n      </div>\n      <div\n        className={classNames(styles['Checkbox__icon'], styles['Checkbox__icon--indeterminate'])}\n      >\n        {platform === Platform.VKCOM ? (\n          <Icon20CheckBoxIndetermanate width={20} height={20} />\n        ) : (\n          <React.Fragment>\n            {adaptiveSizeY.compact && (\n              <Icon20CheckBoxIndetermanate\n                className={adaptiveSizeY.compact.className}\n                width={20}\n                height={20}\n              />\n            )}\n            {adaptiveSizeY.regular && (\n              <Icon20CheckBoxIndetermanate\n                className={adaptiveSizeY.regular.className}\n                width={24}\n                height={24}\n              />\n            )}\n          </React.Fragment>\n        )}\n      </div>\n      <div className={styles['Checkbox__content']}>\n        <div className={styles['Checkbox__children']}>{children}</div>\n        {hasReactNode(description) && (\n          <Footnote className={styles['Checkbox__description']}>{description}</Footnote>\n        )}\n      </div>\n    </Tappable>\n  );\n};\n"],"mappings":"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"}