{"version":3,"file":"accessibility.js","names":["FOCUSABLE_ELEMENTS_LIST","Keys","ACCESSIBLE_KEYS","code","ENTER","key","keyCode","SPACE","TAB","ESCAPE","HOME","END","ARROW_LEFT","ARROW_RIGHT","ARROW_DOWN","pressedKey","e","find","includes","shouldTriggerClickOnEnterOrSpace","el","target","tagName","role","getAttribute","isValidKeyboardEventTarget","isContentEditable","isNativeAnchorEl","hasAttribute","keyPressed"],"sources":["../../src/lib/accessibility.ts"],"sourcesContent":["import * as React from 'react';\n\nexport const FOCUSABLE_ELEMENTS_LIST = [\n  'a[href]',\n  'area[href]',\n  'input:not([disabled]):not([hidden]):not([type=\"hidden\"]):not([aria-hidden])',\n  'select:not([disabled]):not([hidden]):not([aria-hidden])',\n  'textarea:not([disabled])',\n  'button:not([disabled])',\n  'iframe',\n  'audio',\n  'video',\n  '[contenteditable]',\n  '[tabindex]:not([tabindex=\"-1\"])',\n];\n\nexport enum Keys {\n  ENTER = 'Enter',\n  SPACE = 'Space',\n  TAB = 'Tab',\n  ESCAPE = 'Escape',\n  HOME = 'Home',\n  END = 'End',\n  ARROW_LEFT = 'ArrowLeft',\n  ARROW_RIGHT = 'ArrowRight',\n  ARROW_DOWN = 'ArrowDown',\n}\n\ninterface AccessibleKey {\n  code: Keys;\n  key: string[];\n  keyCode: number;\n}\n\nconst ACCESSIBLE_KEYS: AccessibleKey[] = [\n  {\n    code: Keys.ENTER,\n    key: ['Enter'],\n    keyCode: 13,\n  },\n  {\n    code: Keys.SPACE,\n    key: ['Space', 'Spacebar', ' '],\n    keyCode: 32,\n  },\n  {\n    code: Keys.TAB,\n    key: ['Tab'],\n    keyCode: 9,\n  },\n  {\n    code: Keys.ESCAPE,\n    key: ['Escape'],\n    keyCode: 27,\n  },\n  {\n    code: Keys.HOME,\n    key: ['Home'],\n    keyCode: 36,\n  },\n  {\n    code: Keys.END,\n    key: ['End'],\n    keyCode: 35,\n  },\n  {\n    code: Keys.ARROW_LEFT,\n    key: ['ArrowLeft'],\n    keyCode: 37,\n  },\n  {\n    code: Keys.ARROW_RIGHT,\n    key: ['ArrowRight'],\n    keyCode: 39,\n  },\n  {\n    code: Keys.ARROW_DOWN,\n    key: ['ArrowDown'],\n    keyCode: 40,\n  },\n];\n\nexport function pressedKey(e: KeyboardEvent | React.KeyboardEvent<HTMLElement>) {\n  return (\n    ACCESSIBLE_KEYS.find(({ key, keyCode }) => key.includes(e.key) || keyCode === e.keyCode)\n      ?.code || null\n  );\n}\n\nexport function shouldTriggerClickOnEnterOrSpace(\n  e: KeyboardEvent | React.KeyboardEvent<HTMLElement>,\n) {\n  const el = e.target as HTMLElement;\n  const { tagName } = el;\n\n  const role = el.getAttribute('role');\n\n  const isValidKeyboardEventTarget: boolean =\n    el.isContentEditable !== true &&\n    tagName !== 'INPUT' &&\n    tagName !== 'TEXTAREA' &&\n    (role === 'button' || role === 'link');\n\n  const isNativeAnchorEl = tagName === 'A' && el.hasAttribute('href');\n  const keyPressed = pressedKey(e);\n\n  return (\n    isValidKeyboardEventTarget &&\n    // trigger buttons on Space\n    ((keyPressed === Keys.SPACE && role === 'button') ||\n      // trigger non-native links and buttons on Enter\n      (keyPressed === Keys.ENTER && !isNativeAnchorEl))\n  );\n}\n"],"mappings":"AAEA,OAAO,IAAMA,uBAAuB,GAAG,CACrC,SAAS,EACT,YAAY,EACZ,6EAA6E,EAC7E,yDAAyD,EACzD,0BAA0B,EAC1B,wBAAwB,EACxB,QAAQ,EACR,OAAO,EACP,OAAO,EACP,mBAAmB,EACnB,iCAAiC,CAClC;AAED,WAAYC,IAAI;AAUf,WAVWA,IAAI;EAAJA,IAAI;EAAJA,IAAI;EAAJA,IAAI;EAAJA,IAAI;EAAJA,IAAI;EAAJA,IAAI;EAAJA,IAAI;EAAJA,IAAI;EAAJA,IAAI;AAAA,GAAJA,IAAI,KAAJA,IAAI;AAkBhB,IAAMC,eAAgC,GAAG,CACvC;EACEC,IAAI,EAAEF,IAAI,CAACG,KAAK;EAChBC,GAAG,EAAE,CAAC,OAAO,CAAC;EACdC,OAAO,EAAE;AACX,CAAC,EACD;EACEH,IAAI,EAAEF,IAAI,CAACM,KAAK;EAChBF,GAAG,EAAE,CAAC,OAAO,EAAE,UAAU,EAAE,GAAG,CAAC;EAC/BC,OAAO,EAAE;AACX,CAAC,EACD;EACEH,IAAI,EAAEF,IAAI,CAACO,GAAG;EACdH,GAAG,EAAE,CAAC,KAAK,CAAC;EACZC,OAAO,EAAE;AACX,CAAC,EACD;EACEH,IAAI,EAAEF,IAAI,CAACQ,MAAM;EACjBJ,GAAG,EAAE,CAAC,QAAQ,CAAC;EACfC,OAAO,EAAE;AACX,CAAC,EACD;EACEH,IAAI,EAAEF,IAAI,CAACS,IAAI;EACfL,GAAG,EAAE,CAAC,MAAM,CAAC;EACbC,OAAO,EAAE;AACX,CAAC,EACD;EACEH,IAAI,EAAEF,IAAI,CAACU,GAAG;EACdN,GAAG,EAAE,CAAC,KAAK,CAAC;EACZC,OAAO,EAAE;AACX,CAAC,EACD;EACEH,IAAI,EAAEF,IAAI,CAACW,UAAU;EACrBP,GAAG,EAAE,CAAC,WAAW,CAAC;EAClBC,OAAO,EAAE;AACX,CAAC,EACD;EACEH,IAAI,EAAEF,IAAI,CAACY,WAAW;EACtBR,GAAG,EAAE,CAAC,YAAY,CAAC;EACnBC,OAAO,EAAE;AACX,CAAC,EACD;EACEH,IAAI,EAAEF,IAAI,CAACa,UAAU;EACrBT,GAAG,EAAE,CAAC,WAAW,CAAC;EAClBC,OAAO,EAAE;AACX,CAAC,CACF;AAED,OAAO,SAASS,UAAU,CAACC,CAAmD,EAAE;EAAA;EAC9E,OACE,0BAAAd,eAAe,CAACe,IAAI,CAAC;IAAA,IAAGZ,GAAG,QAAHA,GAAG;MAAEC,OAAO,QAAPA,OAAO;IAAA,OAAOD,GAAG,CAACa,QAAQ,CAACF,CAAC,CAACX,GAAG,CAAC,IAAIC,OAAO,KAAKU,CAAC,CAACV,OAAO;EAAA,EAAC,0DAAxF,sBACIH,IAAI,KAAI,IAAI;AAEpB;AAEA,OAAO,SAASgB,gCAAgC,CAC9CH,CAAmD,EACnD;EACA,IAAMI,EAAE,GAAGJ,CAAC,CAACK,MAAqB;EAClC,IAAQC,OAAO,GAAKF,EAAE,CAAdE,OAAO;EAEf,IAAMC,IAAI,GAAGH,EAAE,CAACI,YAAY,CAAC,MAAM,CAAC;EAEpC,IAAMC,0BAAmC,GACvCL,EAAE,CAACM,iBAAiB,KAAK,IAAI,IAC7BJ,OAAO,KAAK,OAAO,IACnBA,OAAO,KAAK,UAAU,KACrBC,IAAI,KAAK,QAAQ,IAAIA,IAAI,KAAK,MAAM,CAAC;EAExC,IAAMI,gBAAgB,GAAGL,OAAO,KAAK,GAAG,IAAIF,EAAE,CAACQ,YAAY,CAAC,MAAM,CAAC;EACnE,IAAMC,UAAU,GAAGd,UAAU,CAACC,CAAC,CAAC;EAEhC,OACES,0BAA0B;EAC1B;EACEI,UAAU,KAAK5B,IAAI,CAACM,KAAK,IAAIgB,IAAI,KAAK,QAAQ;EAC9C;EACCM,UAAU,KAAK5B,IAAI,CAACG,KAAK,IAAI,CAACuB,gBAAiB,CAAC;AAEvD"}