{"version":3,"file":"touch.js","names":["canUseDOM","coordX","e","clientX","changedTouches","coordY","clientY","touchEnabled","window","getSupportedEvents","rubber","offset","dimension","resistanceRate","isAndroid","offsettedResistance"],"sources":["../../src/lib/touch.ts"],"sourcesContent":["import { canUseDOM } from './dom';\n\nexport interface VKUITouchEvent extends MouseEvent, TouchEvent {}\nexport type VKUITouchEventHandler = (e: VKUITouchEvent) => void;\n\n/*\n * Получает координату по оси абсцисс из touch- или mouse-события\n */\nconst coordX = (e: VKUITouchEvent): number => {\n  if (e.clientX != null) {\n    return e.clientX;\n  }\n  return e.changedTouches && e.changedTouches[0].clientX;\n};\n\n/*\n * Получает координату по оси ординат из touch- или mouse-события\n */\nconst coordY = (e: VKUITouchEvent): number => {\n  if (e.clientY != null) {\n    return e.clientY;\n  }\n  return e.changedTouches && e.changedTouches[0].clientY;\n};\n\n// eslint-disable-next-line no-restricted-globals\nconst touchEnabled = () => canUseDOM && 'ontouchstart' in window;\n\n/*\n * Возвращает массив поддерживаемых событий\n * Если браузер поддерживает pointer events или подключена handjs, вернет события указателя.\n * Если нет, используем события мыши\n */\nfunction getSupportedEvents(): string[] {\n  if (touchEnabled()) {\n    return ['touchstart', 'touchmove', 'touchend', 'touchcancel'];\n  }\n\n  return ['mousedown', 'mousemove', 'mouseup', 'mouseleave'];\n}\n\n/*\n * Рассчитывает \"сопротивление\" для iOS тач-событий\n */\nfunction rubber(\n  offset: number,\n  dimension: number,\n  resistanceRate: number,\n  isAndroid: boolean,\n): number {\n  if (isAndroid || offset < 0) {\n    return offset;\n  }\n\n  const offsettedResistance = offset * resistanceRate;\n  return (offsettedResistance * dimension) / (offsettedResistance + dimension);\n}\n\nexport { getSupportedEvents, coordX, coordY, touchEnabled, rubber };\n"],"mappings":"AAAA,SAASA,SAAS,QAAQ,OAAO;AAKjC;AACA;AACA;AACA,IAAMC,MAAM,GAAG,SAATA,MAAM,CAAIC,CAAiB,EAAa;EAC5C,IAAIA,CAAC,CAACC,OAAO,IAAI,IAAI,EAAE;IACrB,OAAOD,CAAC,CAACC,OAAO;EAClB;EACA,OAAOD,CAAC,CAACE,cAAc,IAAIF,CAAC,CAACE,cAAc,CAAC,CAAC,CAAC,CAACD,OAAO;AACxD,CAAC;;AAED;AACA;AACA;AACA,IAAME,MAAM,GAAG,SAATA,MAAM,CAAIH,CAAiB,EAAa;EAC5C,IAAIA,CAAC,CAACI,OAAO,IAAI,IAAI,EAAE;IACrB,OAAOJ,CAAC,CAACI,OAAO;EAClB;EACA,OAAOJ,CAAC,CAACE,cAAc,IAAIF,CAAC,CAACE,cAAc,CAAC,CAAC,CAAC,CAACE,OAAO;AACxD,CAAC;;AAED;AACA,IAAMC,YAAY,GAAG,SAAfA,YAAY;EAAA,OAASP,SAAS,IAAI,cAAc,IAAIQ,MAAM;AAAA;;AAEhE;AACA;AACA;AACA;AACA;AACA,SAASC,kBAAkB,GAAa;EACtC,IAAIF,YAAY,EAAE,EAAE;IAClB,OAAO,CAAC,YAAY,EAAE,WAAW,EAAE,UAAU,EAAE,aAAa,CAAC;EAC/D;EAEA,OAAO,CAAC,WAAW,EAAE,WAAW,EAAE,SAAS,EAAE,YAAY,CAAC;AAC5D;;AAEA;AACA;AACA;AACA,SAASG,MAAM,CACbC,MAAc,EACdC,SAAiB,EACjBC,cAAsB,EACtBC,SAAkB,EACV;EACR,IAAIA,SAAS,IAAIH,MAAM,GAAG,CAAC,EAAE;IAC3B,OAAOA,MAAM;EACf;EAEA,IAAMI,mBAAmB,GAAGJ,MAAM,GAAGE,cAAc;EACnD,OAAQE,mBAAmB,GAAGH,SAAS,IAAKG,mBAAmB,GAAGH,SAAS,CAAC;AAC9E;AAEA,SAASH,kBAAkB,EAAER,MAAM,EAAEI,MAAM,EAAEE,YAAY,EAAEG,MAAM"}