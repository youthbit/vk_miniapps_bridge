{"version":3,"file":"View.js","names":["React","classNames","noop","animationEvent","Platform","Touch","useConfigProvider","useSplitCol","canUseDOM","useDOM","blurActiveElement","useScroll","NavTransitionProvider","getNavId","warnOnce","usePlatform","swipeBackExcluded","useWaitTransitionFinish","useTimeout","usePrevious","useIsomorphicLayoutEffect","SWIPE_BACK_AREA","SwipeBackResults","scrollsCache","warn","View","activePanelProp","activePanel","history","nav","onTransition","onSwipeBack","onSwipeBackStart","onSwipeBackCancelProp","onSwipeBackCancel","children","className","restProps","scrolls","useRef","id","afterTransition","useEffect","current","panelNodes","window","document","scroll","configProvider","splitCol","platform","useState","animated","setAnimated","visiblePanels","setVisiblePanels","setActivePanel","undefined","isBack","setIsBack","prevPanel","setPrevPanel","nextPanel","setNextPanel","swipingBack","setSwipingBack","swipeBackPrevented","setSwipeBackPrevented","swipeBackStartX","setSwipeBackStartX","swipeBackShift","setSwipeBackShift","swipeBackNextPanel","setSwipeBackNextPanel","swipeBackPrevPanel","setSwipeBackPrevPanel","swipeBackResult","setSwipeBackResult","browserSwipe","setBrowserSwipe","prevActivePanel","prevSwipingBack","prevBrowserSwipe","prevSwipeBackResult","prevSwipeBackPrevPanel","prevOnTransition","panels","Children","toArray","filter","panel","panelId","props","includes","disableAnimation","transitionMotionEnabled","animate","VKCOM","pickPanel","flushTransition","useCallback","isBackTransition","scrollTo","from","to","transitionEndHandler","e","animationName","Boolean","waitTransitionFinish","animationFinishTimeout","IOS","onSwipeBackSuccess","swipingBackTransitionEndHandler","propertyName","target","fail","success","onMoveX","event","isWebView","startX","innerWidth","length","payload","getScroll","y","slice","shiftX","onEnd","speed","duration","calcPanelSwipeStyles","isPrev","isNext","prevPanelTranslate","nextPanelTranslate","prevPanelShadow","boxShadow","transform","WebkitTransform","firstLayerId","map","find","supported","set","isTransitionTarget","compensateScroll","el","marginTop"],"sources":["../../../../src/components/View/View.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames, noop } from '@vkontakte/vkjs';\nimport { animationEvent } from '../../lib/supportEvents';\nimport { Platform } from '../../lib/platform';\nimport { Touch, TouchEvent } from '../Touch/Touch';\nimport { useConfigProvider } from '../ConfigProvider/ConfigProviderContext';\nimport { useSplitCol } from '../SplitCol/SplitCol';\nimport { canUseDOM, useDOM, blurActiveElement } from '../../lib/dom';\nimport { useScroll } from '../AppRoot/ScrollContext';\nimport { NavTransitionProvider } from '../NavTransitionContext/NavTransitionContext';\nimport { getNavId, NavIdProps } from '../../lib/getNavId';\nimport { warnOnce } from '../../lib/warnOnce';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { swipeBackExcluded } from './utils';\nimport { useWaitTransitionFinish } from '../../hooks/useWaitTransitionFinish';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { usePrevious } from '../../hooks/usePrevious';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nimport styles from './View.module.css';\nimport iosStyles from './ViewIOS.module.css';\n\nconst SWIPE_BACK_AREA = 70;\n\nenum SwipeBackResults {\n  fail = 1,\n  success,\n}\n\ninterface Scrolls {\n  [index: string]: number | undefined;\n}\n\ninterface ViewsScrolls {\n  [index: string]: Scrolls;\n}\n\nexport let scrollsCache: ViewsScrolls = {};\n\nexport interface ViewProps extends React.HTMLAttributes<HTMLElement>, NavIdProps {\n  activePanel: string;\n  onTransition?(params: { isBack: boolean; from: string; to: string }): void;\n  /**\n   * callback свайпа назад\n   */\n  onSwipeBack?(): void;\n  /**\n   * callback начала анимации свайпа назад.\n   *\n   * Чтобы остановить свайп назад, возвращайте `\"prevent\"`.\n   */\n  onSwipeBackStart?(activePanel: string | null): void | 'prevent';\n  /**\n   * callback завершения анимации отмененного пользователем свайпа\n   */\n  onSwipeBackCancel?(): void;\n  history?: string[];\n}\n\nexport interface ViewState {\n  animated: boolean;\n\n  visiblePanels: string[];\n  activePanel: string | null;\n  isBack: boolean | undefined;\n  prevPanel: string | null;\n  nextPanel: string | null;\n\n  swipingBack: boolean;\n  swipeBackStartX: number;\n  swipeBackShift: number;\n  swipeBackNextPanel: string | null;\n  swipeBackPrevPanel: string | null;\n  swipeBackResult: SwipeBackResults | null;\n\n  browserSwipe: boolean;\n}\n\nconst warn = warnOnce('View');\n\n/**\n * @see https://vkcom.github.io/VKUI/#/View\n */\nexport const View = ({\n  activePanel: activePanelProp,\n  history,\n  nav,\n  onTransition,\n  onSwipeBack,\n  onSwipeBackStart,\n  onSwipeBackCancel: onSwipeBackCancelProp,\n  children,\n  className,\n  ...restProps\n}: ViewProps) => {\n  const scrolls = React.useRef(scrollsCache[getNavId({ nav, id: restProps.id }) as string] || {});\n  const afterTransition = React.useRef(noop);\n\n  React.useEffect(() => () => {\n    const id = getNavId({ nav, id: restProps.id });\n    if (id) {\n      scrollsCache[id] = scrolls.current;\n    }\n  });\n\n  const panelNodes = React.useRef<{ [id: string]: HTMLDivElement | null }>({});\n\n  const { window, document } = useDOM();\n  const scroll = useScroll();\n  const configProvider = useConfigProvider();\n  const splitCol = useSplitCol();\n  const platform = usePlatform();\n\n  const [animated, setAnimated] = React.useState(false);\n\n  const [visiblePanels, setVisiblePanels] = React.useState([activePanelProp]);\n  const [activePanel, setActivePanel] = React.useState<string | null>(activePanelProp);\n  const [isBack, setIsBack] = React.useState<boolean | undefined>(undefined);\n  const [prevPanel, setPrevPanel] = React.useState<string | null>(null);\n  const [nextPanel, setNextPanel] = React.useState<string | null>(null);\n\n  const [swipingBack, setSwipingBack] = React.useState<boolean>(false);\n  const [swipeBackPrevented, setSwipeBackPrevented] = React.useState<boolean>(false);\n  const [swipeBackStartX, setSwipeBackStartX] = React.useState<number>(0);\n  const [swipeBackShift, setSwipeBackShift] = React.useState<number>(0);\n  const [swipeBackNextPanel, setSwipeBackNextPanel] = React.useState<string | null>(null);\n  const [swipeBackPrevPanel, setSwipeBackPrevPanel] = React.useState<string | null>(null);\n  const [swipeBackResult, setSwipeBackResult] = React.useState<SwipeBackResults | null>(null);\n\n  const [browserSwipe, setBrowserSwipe] = React.useState(false);\n\n  const prevActivePanel = usePrevious(activePanelProp);\n  const prevSwipingBack = usePrevious(swipingBack);\n  const prevBrowserSwipe = usePrevious(browserSwipe);\n  const prevSwipeBackResult = usePrevious(swipeBackResult);\n  const prevSwipeBackPrevPanel = usePrevious(swipeBackPrevPanel);\n  const prevOnTransition = usePrevious(onTransition);\n\n  const panels = (React.Children.toArray(children) as React.ReactElement[]).filter(\n    (panel: React.ReactElement) => {\n      const panelId = getNavId(panel.props, warn);\n\n      return (\n        (panelId !== undefined && visiblePanels.includes(panelId)) ||\n        panelId === swipeBackPrevPanel ||\n        panelId === swipeBackNextPanel\n      );\n    },\n  );\n\n  const disableAnimation =\n    configProvider?.transitionMotionEnabled === false ||\n    !splitCol?.animate ||\n    platform === Platform.VKCOM;\n\n  const pickPanel = (id: string | null) => {\n    if (id === null) {\n      return null;\n    }\n    return panelNodes.current[id];\n  };\n\n  const flushTransition = React.useCallback(\n    (prevPanel: string, isBackTransition: boolean) => {\n      if (isBackTransition) {\n        scrolls.current[prevPanel] = 0;\n      }\n      setPrevPanel(null);\n      setNextPanel(null);\n      setVisiblePanels([activePanelProp]);\n      setActivePanel(activePanelProp);\n      setAnimated(false);\n      setIsBack(undefined);\n\n      afterTransition.current = () => {\n        scroll?.scrollTo(0, isBackTransition ? scrolls.current[activePanelProp] : 0);\n        onTransition &&\n          onTransition({\n            isBack: isBackTransition,\n            from: prevPanel,\n            to: activePanelProp,\n          });\n      };\n    },\n    [activePanelProp, onTransition, scroll],\n  );\n\n  useIsomorphicLayoutEffect(() => {\n    afterTransition.current();\n    afterTransition.current = noop;\n  }, [afterTransition.current]);\n\n  const transitionEndHandler = React.useCallback(\n    (e?: React.AnimationEvent): void => {\n      if (\n        (!e ||\n          [\n            'vkui-animation-ios-next-forward',\n            'vkui-animation-ios-prev-back',\n            'vkui-animation-view-next-forward',\n            'vkui-animation-view-prev-back',\n          ].includes(e.animationName)) &&\n        prevPanel !== null\n      ) {\n        flushTransition(prevPanel, Boolean(isBack));\n      }\n    },\n    [flushTransition, isBack, prevPanel],\n  );\n\n  const { waitTransitionFinish } = useWaitTransitionFinish();\n  const animationFinishTimeout = useTimeout(\n    transitionEndHandler,\n    platform === Platform.IOS ? 600 : 300,\n  );\n\n  const onSwipeBackSuccess = React.useCallback(() => {\n    onSwipeBack && onSwipeBack();\n  }, [onSwipeBack]);\n\n  const onSwipeBackCancel = React.useCallback(() => {\n    onSwipeBackCancelProp && onSwipeBackCancelProp();\n    setSwipeBackPrevPanel(null);\n    setSwipeBackNextPanel(null);\n    setSwipingBack(false);\n    setSwipeBackResult(null);\n    setSwipeBackStartX(0);\n    setSwipeBackShift(0);\n  }, [onSwipeBackCancelProp]);\n\n  const swipingBackTransitionEndHandler = React.useCallback(\n    (e?: TransitionEvent): void => {\n      // indexOf because of vendor prefixes in old browsers\n      if (\n        !e ||\n        (e?.propertyName.includes('transform') && e?.target === pickPanel(swipeBackNextPanel))\n      ) {\n        switch (swipeBackResult) {\n          case SwipeBackResults.fail:\n            onSwipeBackCancel();\n            break;\n          case SwipeBackResults.success:\n            onSwipeBackSuccess();\n        }\n      }\n    },\n    [onSwipeBackCancel, onSwipeBackSuccess, swipeBackNextPanel, swipeBackResult],\n  );\n\n  const onMoveX = (event: TouchEvent): void => {\n    if (\n      platform !== Platform.IOS ||\n      swipeBackPrevented ||\n      swipeBackExcluded(event) ||\n      disableAnimation\n    ) {\n      return;\n    }\n\n    if (!configProvider?.isWebView) {\n      if (\n        (event.startX <= SWIPE_BACK_AREA || event.startX >= window!.innerWidth - SWIPE_BACK_AREA) &&\n        !browserSwipe\n      ) {\n        setBrowserSwipe(true);\n      }\n\n      return;\n    }\n\n    if (!onSwipeBack || (animated && event.startX <= SWIPE_BACK_AREA)) {\n      return;\n    }\n\n    if (!swipingBack && event.startX <= SWIPE_BACK_AREA && history && history.length > 1) {\n      // Начался свайп назад\n      if (onSwipeBackStart) {\n        const payload = onSwipeBackStart(activePanel);\n        if (payload === 'prevent') {\n          setSwipeBackPrevented(true);\n          return;\n        }\n      }\n\n      if (activePanel !== null) {\n        // Note: вызываем закрытие клавиатуры. В iOS это нативное поведение при свайпе.\n        blurActiveElement(document);\n        scrolls.current[activePanel] = scroll?.getScroll().y;\n      }\n\n      setSwipingBack(true);\n      setSwipeBackStartX(event.startX);\n      setSwipeBackPrevPanel(activePanel);\n      setSwipeBackNextPanel(history.slice(-2)[0]);\n    }\n\n    if (swipingBack) {\n      let swipeBackShift = 0;\n      if (event.shiftX < 0) {\n        swipeBackShift = 0;\n      } else if (event.shiftX > window!.innerWidth - swipeBackStartX) {\n        swipeBackShift = window!.innerWidth;\n      } else {\n        swipeBackShift = event.shiftX;\n      }\n      setSwipeBackShift(swipeBackShift);\n    }\n  };\n\n  const onEnd = React.useCallback(\n    (event: TouchEvent): void => {\n      if (swipingBack) {\n        const speed = (swipeBackShift / event.duration) * 1000;\n        if (swipeBackShift === 0) {\n          onSwipeBackCancel();\n        } else if (swipeBackShift >= (window!.innerWidth ?? 0)) {\n          onSwipeBackSuccess();\n        } else if (speed > 250 || swipeBackStartX + swipeBackShift > window!.innerWidth / 2) {\n          setSwipeBackResult(SwipeBackResults.success);\n        } else {\n          setSwipeBackResult(SwipeBackResults.fail);\n        }\n      }\n      if (swipeBackPrevented) {\n        setSwipeBackPrevented(false);\n      }\n    },\n    [\n      onSwipeBackCancel,\n      onSwipeBackSuccess,\n      swipeBackShift,\n      swipeBackStartX,\n      swipingBack,\n      swipeBackPrevented,\n      window,\n    ],\n  );\n\n  const calcPanelSwipeStyles = (panelId: string | undefined): React.CSSProperties => {\n    if (!canUseDOM || !window) {\n      return {};\n    }\n\n    const isPrev = panelId === swipeBackPrevPanel;\n    const isNext = panelId === swipeBackNextPanel;\n\n    if ((!isPrev && !isNext) || swipeBackResult) {\n      return {};\n    }\n\n    let prevPanelTranslate = `${swipeBackShift}px`;\n    let nextPanelTranslate = `${-50 + (swipeBackShift * 100) / window.innerWidth / 2}%`;\n    let prevPanelShadow = (0.3 * (window.innerWidth - swipeBackShift)) / window.innerWidth;\n\n    if (swipeBackResult) {\n      return isPrev ? { boxShadow: `-2px 0 12px rgba(0, 0, 0, ${prevPanelShadow})` } : {};\n    }\n\n    if (isNext) {\n      return {\n        transform: `translate3d(${nextPanelTranslate}, 0, 0)`,\n        WebkitTransform: `translate3d(${nextPanelTranslate}, 0, 0)`,\n      };\n    }\n    if (isPrev) {\n      return {\n        transform: `translate3d(${prevPanelTranslate}, 0, 0)`,\n        WebkitTransform: `translate3d(${prevPanelTranslate}, 0, 0)`,\n        boxShadow: `-2px 0 12px rgba(0, 0, 0, ${prevPanelShadow})`,\n      };\n    }\n\n    return {};\n  };\n\n  React.useEffect(() => {\n    // Нужен переход\n    if (\n      prevActivePanel &&\n      prevActivePanel !== activePanelProp &&\n      !prevSwipingBack &&\n      !prevBrowserSwipe\n    ) {\n      const firstLayerId = (React.Children.toArray(children) as React.ReactElement[])\n        .map((panel) => getNavId(panel.props, warn))\n        .find((id) => id === prevActivePanel || id === activePanelProp);\n\n      const isBackTransition = firstLayerId === activePanelProp;\n      scrolls.current[prevActivePanel] = scroll?.getScroll().y;\n\n      if (disableAnimation) {\n        flushTransition(prevActivePanel, isBackTransition);\n      } else {\n        blurActiveElement(document);\n\n        setVisiblePanels([prevActivePanel, activePanelProp]);\n        setPrevPanel(prevActivePanel);\n        setNextPanel(activePanelProp);\n        setActivePanel(null);\n        setAnimated(true);\n        setIsBack(isBackTransition);\n\n        // Фолбек анимации перехода\n        if (!animationEvent.supported) {\n          animationFinishTimeout.set();\n        }\n      }\n    }\n\n    // Закончилась анимация свайпа назад\n    if (prevActivePanel && prevActivePanel !== activePanelProp && prevSwipingBack) {\n      const nextPanel = activePanelProp;\n      const prevPanel = prevActivePanel;\n      if (prevSwipeBackPrevPanel) {\n        scrolls.current[prevSwipeBackPrevPanel] = 0;\n      }\n\n      setSwipeBackPrevPanel(null);\n      setSwipeBackNextPanel(null);\n      setSwipingBack(false);\n      setSwipeBackResult(null);\n      setSwipeBackStartX(0);\n      setSwipeBackShift(0);\n      setActivePanel(nextPanel);\n      setVisiblePanels([nextPanel]);\n\n      afterTransition.current = () => {\n        if (nextPanel !== null) {\n          scroll?.scrollTo(0, scrolls.current[nextPanel]);\n        }\n        prevOnTransition &&\n          prevOnTransition({\n            isBack: true,\n            from: prevPanel,\n            to: nextPanel,\n          });\n      };\n    }\n\n    // Началась анимация завершения свайпа назад.\n    if (!prevSwipeBackResult && swipeBackResult) {\n      waitTransitionFinish(\n        pickPanel(swipeBackNextPanel),\n        swipingBackTransitionEndHandler,\n        platform === Platform.IOS ? 600 : 300,\n      );\n    }\n\n    // Если свайп назад отменился (когда пользователь недостаточно сильно свайпнул)\n    if (prevSwipeBackResult === SwipeBackResults.fail && !swipeBackResult && activePanel !== null) {\n      scroll?.scrollTo(0, scrolls.current[activePanel]);\n    }\n\n    // Закончился Safari свайп\n    if (prevActivePanel !== activePanelProp && browserSwipe) {\n      setBrowserSwipe(false);\n      setNextPanel(null);\n      setPrevPanel(null);\n      setAnimated(false);\n      setVisiblePanels([activePanelProp]);\n      setActivePanel(activePanelProp);\n    }\n  }, [\n    activePanelProp,\n    activePanel,\n    animationFinishTimeout,\n    browserSwipe,\n    children,\n    disableAnimation,\n    document,\n    flushTransition,\n    onSwipeBackStart,\n    panels,\n    platform,\n    prevActivePanel,\n    prevBrowserSwipe,\n    prevOnTransition,\n    prevSwipeBackPrevPanel,\n    prevSwipeBackResult,\n    prevSwipingBack,\n    scroll,\n    swipeBackNextPanel,\n    swipeBackResult,\n    swipingBack,\n    swipingBackTransitionEndHandler,\n    waitTransitionFinish,\n  ]);\n\n  return (\n    <Touch\n      Component=\"section\"\n      {...restProps}\n      className={classNames(\n        styles['View'],\n        platform === Platform.IOS && iosStyles['View--ios'],\n        !disableAnimation && animated && styles['View--animated'],\n        !disableAnimation && swipingBack && styles['View--swiping-back'],\n        disableAnimation && styles['View--no-motion'],\n        className,\n      )}\n      onMoveX={onMoveX}\n      onEnd={onEnd}\n    >\n      <div className={styles['View__panels']}>\n        {panels.map((panel: React.ReactElement) => {\n          const panelId = getNavId(panel.props, warn);\n          const isPrev = panelId === prevPanel || panelId === swipeBackPrevPanel;\n          const isTransitionTarget = animated && panelId === (isBack ? prevPanel : nextPanel);\n          const compensateScroll =\n            isPrev || panelId === swipeBackNextPanel || (panelId === nextPanel && isBack);\n\n          return (\n            <div\n              className={classNames(\n                styles['View__panel'],\n                panelId === activePanel && iosStyles['View__panel--active'],\n                panelId === prevPanel && styles['View__panel--prev'],\n                panelId === nextPanel && styles['View__panel--next'],\n                panelId === swipeBackPrevPanel && iosStyles['View__panel--swipe-back-prev'],\n                panelId === swipeBackNextPanel && iosStyles['View__panel--swipe-back-next'],\n                swipeBackResult === SwipeBackResults.success &&\n                  iosStyles['View__panel--swipe-back-success'],\n                swipeBackResult === SwipeBackResults.fail &&\n                  iosStyles['View__panel--swipe-back-failed'],\n              )}\n              onAnimationEnd={isTransitionTarget ? transitionEndHandler : undefined}\n              ref={(el) => panelId !== undefined && (panelNodes.current[panelId] = el)}\n              style={calcPanelSwipeStyles(panelId)}\n              key={panelId}\n            >\n              <div\n                className={styles['View__panel-in']}\n                style={{\n                  marginTop: compensateScroll ? -(scrolls.current[panelId] ?? 0) : undefined,\n                }}\n              >\n                <NavTransitionProvider\n                  entering={panelId === nextPanel || panelId === swipeBackNextPanel}\n                >\n                  {panel}\n                </NavTransitionProvider>\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    </Touch>\n  );\n};\n"],"mappings":"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"}