{"version":3,"file":"useTrackerVisibility.js","names":["React","useTimeout","useTrackerVisibility","autoHideScrollbar","autoHideScrollbarDelay","useState","trackerVisible","setTrackerVisible","isMouseOver","useRef","isTrackerDragging","setVisibilityTimeout","set","clearVisibilityTimeout","clear","onTrackerDragStart","useCallback","current","onTrackerDragStop","queueTrackerVisibility","onTrackerMouseEnter","onTrackerMouseLeave","onTargetScroll"],"sources":["../../../../src/components/CustomScrollView/useTrackerVisibility.ts"],"sourcesContent":["import * as React from 'react';\nimport { useTimeout } from '../../hooks/useTimeout';\n\n/**\n * Хук, который позволяет управлять видимостью ползунка скроллбара.\n * @param autoHideScrollbar - скрывать ли ползунок скроллбара\n * @param autoHideScrollbarDelay - через какое кол-во миллисекунд ползунок скроллбара скрывается\n * @returns Объект, содержащий параметры, которые позволяют управлять видимостью ползунка\n */\nexport const useTrackerVisibility = (\n  autoHideScrollbar = false,\n  autoHideScrollbarDelay = 500,\n): TrackerVisibilityProps => {\n  const [trackerVisible, setTrackerVisible] = React.useState(!autoHideScrollbar);\n  const isMouseOver = React.useRef(false);\n  const isTrackerDragging = React.useRef(false);\n\n  const { set: setVisibilityTimeout, clear: clearVisibilityTimeout } = useTimeout(\n    () => setTrackerVisible(false),\n    autoHideScrollbarDelay,\n  );\n\n  const onTrackerDragStart = React.useCallback(() => {\n    clearVisibilityTimeout();\n    setTrackerVisible(true);\n    isTrackerDragging.current = true;\n  }, [clearVisibilityTimeout]);\n\n  const onTrackerDragStop = React.useCallback(() => {\n    isTrackerDragging.current = false;\n    if (!isMouseOver.current) {\n      setVisibilityTimeout();\n    }\n  }, [setVisibilityTimeout, isMouseOver]);\n\n  /**\n   * Позволяет \"запланировать\" скрытие ползунка через delay миллисекунд. Если тайм-аут не успевает сработать, то каждый\n   * последующий вызов функции откладывает скрытие ползунка на delay миллисекунд\n   */\n  const queueTrackerVisibility = React.useCallback(() => {\n    if (isTrackerDragging.current) {\n      return;\n    }\n    setTrackerVisible(true);\n    setVisibilityTimeout();\n  }, [setVisibilityTimeout]);\n\n  const onTrackerMouseEnter = React.useCallback(() => {\n    clearVisibilityTimeout();\n    isMouseOver.current = true;\n    setTrackerVisible(true);\n  }, [clearVisibilityTimeout]);\n\n  const onTrackerMouseLeave = React.useCallback(() => {\n    queueTrackerVisibility();\n    isMouseOver.current = false;\n  }, [queueTrackerVisibility]);\n\n  const onTargetScroll = React.useCallback(() => {\n    queueTrackerVisibility();\n  }, [queueTrackerVisibility]);\n\n  return {\n    trackerVisible,\n    onTrackerDragStart,\n    onTrackerDragStop,\n    onTrackerMouseEnter,\n    onTrackerMouseLeave,\n    onTargetScroll,\n  };\n};\n\nexport interface TrackerOptionsProps {\n  /**\n   * Скрывать ли ползунок скроллбара\n   */\n  autoHideScrollbar?: boolean;\n  /**\n   * Через какое кол-во миллисекунд ползунок скроллбара скрывается\n   */\n  autoHideScrollbarDelay?: number;\n}\n\nexport interface TrackerVisibilityProps {\n  /**\n   * Отвечает за видимость ползунка\n   */\n  trackerVisible: boolean;\n  /**\n   * Функция для обработки события у блока со скроллом\n   */\n  onTargetScroll(this: void): void;\n  /**\n   * Функция для обработки начала drag event ползунка\n   */\n  onTrackerDragStart(this: void): void;\n  /**\n   * Функция для обработки окончания drag event ползунка\n   */\n  onTrackerDragStop(this: void): void;\n  /**\n   * Функция для обработки mouseLeave event ползунка\n   */\n  onTrackerMouseEnter(this: void): void;\n  /**\n   * Функция для обработки mouseEnter event ползунка\n   */\n  onTrackerMouseLeave(this: void): void;\n}\n"],"mappings":";AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SAASC,UAAU,QAAQ,wBAAwB;;AAEnD;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAoB,GAGJ;EAAA,IAF3BC,iBAAiB,uEAAG,KAAK;EAAA,IACzBC,sBAAsB,uEAAG,GAAG;EAE5B,sBAA4CJ,KAAK,CAACK,QAAQ,CAAC,CAACF,iBAAiB,CAAC;IAAA;IAAvEG,cAAc;IAAEC,iBAAiB;EACxC,IAAMC,WAAW,GAAGR,KAAK,CAACS,MAAM,CAAC,KAAK,CAAC;EACvC,IAAMC,iBAAiB,GAAGV,KAAK,CAACS,MAAM,CAAC,KAAK,CAAC;EAE7C,kBAAqER,UAAU,CAC7E;MAAA,OAAMM,iBAAiB,CAAC,KAAK,CAAC;IAAA,GAC9BH,sBAAsB,CACvB;IAHYO,oBAAoB,eAAzBC,GAAG;IAA+BC,sBAAsB,eAA7BC,KAAK;EAKxC,IAAMC,kBAAkB,GAAGf,KAAK,CAACgB,WAAW,CAAC,YAAM;IACjDH,sBAAsB,EAAE;IACxBN,iBAAiB,CAAC,IAAI,CAAC;IACvBG,iBAAiB,CAACO,OAAO,GAAG,IAAI;EAClC,CAAC,EAAE,CAACJ,sBAAsB,CAAC,CAAC;EAE5B,IAAMK,iBAAiB,GAAGlB,KAAK,CAACgB,WAAW,CAAC,YAAM;IAChDN,iBAAiB,CAACO,OAAO,GAAG,KAAK;IACjC,IAAI,CAACT,WAAW,CAACS,OAAO,EAAE;MACxBN,oBAAoB,EAAE;IACxB;EACF,CAAC,EAAE,CAACA,oBAAoB,EAAEH,WAAW,CAAC,CAAC;;EAEvC;AACF;AACA;AACA;EACE,IAAMW,sBAAsB,GAAGnB,KAAK,CAACgB,WAAW,CAAC,YAAM;IACrD,IAAIN,iBAAiB,CAACO,OAAO,EAAE;MAC7B;IACF;IACAV,iBAAiB,CAAC,IAAI,CAAC;IACvBI,oBAAoB,EAAE;EACxB,CAAC,EAAE,CAACA,oBAAoB,CAAC,CAAC;EAE1B,IAAMS,mBAAmB,GAAGpB,KAAK,CAACgB,WAAW,CAAC,YAAM;IAClDH,sBAAsB,EAAE;IACxBL,WAAW,CAACS,OAAO,GAAG,IAAI;IAC1BV,iBAAiB,CAAC,IAAI,CAAC;EACzB,CAAC,EAAE,CAACM,sBAAsB,CAAC,CAAC;EAE5B,IAAMQ,mBAAmB,GAAGrB,KAAK,CAACgB,WAAW,CAAC,YAAM;IAClDG,sBAAsB,EAAE;IACxBX,WAAW,CAACS,OAAO,GAAG,KAAK;EAC7B,CAAC,EAAE,CAACE,sBAAsB,CAAC,CAAC;EAE5B,IAAMG,cAAc,GAAGtB,KAAK,CAACgB,WAAW,CAAC,YAAM;IAC7CG,sBAAsB,EAAE;EAC1B,CAAC,EAAE,CAACA,sBAAsB,CAAC,CAAC;EAE5B,OAAO;IACLb,cAAc,EAAdA,cAAc;IACdS,kBAAkB,EAAlBA,kBAAkB;IAClBG,iBAAiB,EAAjBA,iBAAiB;IACjBE,mBAAmB,EAAnBA,mBAAmB;IACnBC,mBAAmB,EAAnBA,mBAAmB;IACnBC,cAAc,EAAdA;EACF,CAAC;AACH,CAAC"}