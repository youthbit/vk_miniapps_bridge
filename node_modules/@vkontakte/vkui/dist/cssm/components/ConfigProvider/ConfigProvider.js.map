{"version":3,"file":"ConfigProvider.js","names":["React","ConfigProviderContext","useConfigProvider","TokensClassProvider","useObjectMemo","generateVKUITokensClassName","useAutoDetectAppearance","noop","useIsomorphicLayoutEffect","useDOM","ConfigProvider","props","parentConfig","children","webviewType","isWebView","transitionMotionEnabled","platform","locale","appearanceProp","appearance","onDetectAppearanceByBridge","document","VKUITokensClassName","body","classList","add","remove","configContext"],"sources":["../../../../src/components/ConfigProvider/ConfigProvider.tsx"],"sourcesContent":["import * as React from 'react';\nimport {\n  ConfigProviderContext,\n  ConfigProviderContextInterface,\n  useConfigProvider,\n} from './ConfigProviderContext';\nimport { TokensClassProvider } from '../../lib/tokensClassProvider';\nimport { useObjectMemo } from '../../hooks/useObjectMemo';\nimport { generateVKUITokensClassName } from '../../helpers/generateVKUITokensClassName';\nimport { useAutoDetectAppearance } from '../../hooks/useAutoDetectAppearance';\nimport { noop } from '@vkontakte/vkjs';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nimport { useDOM } from '../../lib/dom';\n\nexport interface ConfigProviderProps extends Partial<ConfigProviderContextInterface> {\n  onDetectAppearanceByBridge?: () => void;\n  children: React.ReactNode;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/ConfigProvider\n */\nexport const ConfigProvider = (props: ConfigProviderProps) => {\n  const parentConfig = useConfigProvider();\n\n  const {\n    children,\n    webviewType,\n    isWebView,\n    transitionMotionEnabled,\n    platform,\n    locale,\n    appearance: appearanceProp,\n    onDetectAppearanceByBridge = noop,\n  } = {\n    ...parentConfig,\n    ...props,\n  };\n\n  const appearance = useAutoDetectAppearance(appearanceProp, onDetectAppearanceByBridge);\n\n  const { document } = useDOM();\n\n  useIsomorphicLayoutEffect(() => {\n    const VKUITokensClassName = generateVKUITokensClassName(platform, appearance);\n\n    // eslint-disable-next-line no-restricted-properties\n    document!.body.classList.add(VKUITokensClassName);\n\n    return () => {\n      // eslint-disable-next-line no-restricted-properties\n      document!.body.classList.remove(VKUITokensClassName);\n    };\n  }, [platform, appearance]);\n\n  const configContext = useObjectMemo({\n    webviewType,\n    isWebView,\n    transitionMotionEnabled,\n    platform,\n    locale,\n    appearance,\n  });\n\n  return (\n    <ConfigProviderContext.Provider value={configContext}>\n      <TokensClassProvider platform={platform} appearance={appearance}>\n        {children}\n      </TokensClassProvider>\n    </ConfigProviderContext.Provider>\n  );\n};\n"],"mappings":";AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SACEC,qBAAqB,EAErBC,iBAAiB,QACZ,yBAAyB;AAChC,SAASC,mBAAmB,QAAQ,+BAA+B;AACnE,SAASC,aAAa,QAAQ,2BAA2B;AACzD,SAASC,2BAA2B,QAAQ,2CAA2C;AACvF,SAASC,uBAAuB,QAAQ,qCAAqC;AAC7E,SAASC,IAAI,QAAQ,iBAAiB;AACtC,SAASC,yBAAyB,QAAQ,qCAAqC;AAC/E,SAASC,MAAM,QAAQ,eAAe;AAOtC;AACA;AACA;AACA,OAAO,IAAMC,cAAc,GAAG,SAAjBA,cAAc,CAAIC,KAA0B,EAAK;EAC5D,IAAMC,YAAY,GAAGV,iBAAiB,EAAE;EAExC,0DAUKU,YAAY,GACZD,KAAK;IAVRE,QAAQ,uBAARA,QAAQ;IACRC,WAAW,uBAAXA,WAAW;IACXC,SAAS,uBAATA,SAAS;IACTC,uBAAuB,uBAAvBA,uBAAuB;IACvBC,QAAQ,uBAARA,QAAQ;IACRC,MAAM,uBAANA,MAAM;IACMC,cAAc,uBAA1BC,UAAU;IAAA,4CACVC,0BAA0B;IAA1BA,0BAA0B,sCAAGd,IAAI;EAMnC,IAAMa,UAAU,GAAGd,uBAAuB,CAACa,cAAc,EAAEE,0BAA0B,CAAC;EAEtF,cAAqBZ,MAAM,EAAE;IAArBa,QAAQ,WAARA,QAAQ;EAEhBd,yBAAyB,CAAC,YAAM;IAC9B,IAAMe,mBAAmB,GAAGlB,2BAA2B,CAACY,QAAQ,EAAEG,UAAU,CAAC;;IAE7E;IACAE,QAAQ,CAAEE,IAAI,CAACC,SAAS,CAACC,GAAG,CAACH,mBAAmB,CAAC;IAEjD,OAAO,YAAM;MACX;MACAD,QAAQ,CAAEE,IAAI,CAACC,SAAS,CAACE,MAAM,CAACJ,mBAAmB,CAAC;IACtD,CAAC;EACH,CAAC,EAAE,CAACN,QAAQ,EAAEG,UAAU,CAAC,CAAC;EAE1B,IAAMQ,aAAa,GAAGxB,aAAa,CAAC;IAClCU,WAAW,EAAXA,WAAW;IACXC,SAAS,EAATA,SAAS;IACTC,uBAAuB,EAAvBA,uBAAuB;IACvBC,QAAQ,EAARA,QAAQ;IACRC,MAAM,EAANA,MAAM;IACNE,UAAU,EAAVA;EACF,CAAC,CAAC;EAEF,oBACE,oBAAC,qBAAqB,CAAC,QAAQ;IAAC,KAAK,EAAEQ;EAAc,gBACnD,oBAAC,mBAAmB;IAAC,QAAQ,EAAEX,QAAS;IAAC,UAAU,EAAEG;EAAW,GAC7DP,QAAQ,CACW,CACS;AAErC,CAAC"}