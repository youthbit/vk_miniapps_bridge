{"version":3,"file":"CustomSelect.js","names":["React","SelectMimicry","debounce","multiRef","getTitleFromChildren","classNames","CustomSelectOption","Input","DropdownIcon","Footnote","warnOnce","defaultFilterFn","getFormFieldModeFromSelectType","CustomSelectDropdown","useIsomorphicLayoutEffect","findIndexAfter","options","startIndex","length","findIndex","option","i","disabled","findIndexBefore","endIndex","result","warn","checkOptionsValueType","Set","map","item","value","size","defaultRenderOptionFn","props","handleOptionDown","e","preventDefault","findSelectedIndex","Number","filter","inputValue","filterFn","defaultOptions","CustomSelect","useState","opened","setOpened","before","name","className","getRef","getRootRef","popupDirection","style","onChange","children","onInputChangeProp","onInputChange","renderDropdown","onOpen","onClose","fetching","forceDropdownPortal","selectType","autoHideScrollbar","autoHideScrollbarDelay","searchable","renderOption","renderOptionProp","optionsProp","emptyText","icon","dropdownOffsetDistance","fixDropdownWidth","restProps","process","env","NODE_ENV","containerRef","useRef","scrollBoxRef","selectElRef","focusedOptionIndex","setFocusedOptionIndex","undefined","isControlledOutside","setIsControlledOutside","setInputValue","defaultValue","nativeSelectValue","setNativeSelectValue","keyboardInput","setKeyboardInput","popperPlacement","setPopperPlacement","setOptions","selectedOptionIndex","setSelectedOptionIndex","useEffect","event","Event","bubbles","current","dispatchEvent","selected","useMemo","openedClassNames","includes","resetKeyboardInput","useCallback","scrollToElement","index","center","dropdown","dropdownHeight","offsetHeight","scrollTop","itemTop","offsetTop","itemHeight","isValidIndex","focusOptionByIndex","scrollTo","areOptionsShown","setScrollBoxRef","ref","onKeyboardInput","key","fullInput","optionIndex","label","toLowerCase","close","selectFocused","open","onBlur","resetFocusedOption","onFocus","onClick","handleKeyUp","focusOption","type","nextIndex","beforeIndex","updateOptionsAndSelectedOptionIndex","onLabelClick","contains","target","onNativeSelectChange","newSelectedOptionIndex","currentTarget","onInputKeyDown","handleKeyDownSelect","handleOptionClick","Array","prototype","indexOf","call","parentNode","handleOptionHover","hovered","onMouseDown","onMouseOver","resolvedContent","defaultDropdownContent","placeholder"],"sources":["../../../../src/components/CustomSelect/CustomSelect.tsx"],"sourcesContent":["import * as React from 'react';\nimport { SelectMimicry } from '../SelectMimicry/SelectMimicry';\nimport { debounce, multiRef, getTitleFromChildren } from '../../lib/utils';\nimport { classNames } from '@vkontakte/vkjs';\nimport { NativeSelectProps } from '../NativeSelect/NativeSelect';\nimport {\n  CustomSelectOption,\n  CustomSelectOptionProps,\n} from '../CustomSelectOption/CustomSelectOption';\nimport { FormFieldProps } from '../FormField/FormField';\nimport { Input } from '../Input/Input';\nimport { DropdownIcon } from '../DropdownIcon/DropdownIcon';\nimport { Footnote } from '../Typography/Footnote/Footnote';\nimport { warnOnce } from '../../lib/warnOnce';\nimport { defaultFilterFn, getFormFieldModeFromSelectType } from '../../lib/select';\nimport { Placement } from '../Popper/Popper';\nimport { CustomSelectDropdown } from '../CustomSelectDropdown/CustomSelectDropdown';\nimport { TrackerOptionsProps } from '../CustomScrollView/useTrackerVisibility';\nimport { SelectType } from '../Select/Select';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\nimport styles from './CustomSelect.module.css';\n\nconst findIndexAfter = (options: CustomSelectOptionInterface[] = [], startIndex = -1) => {\n  if (startIndex >= options.length - 1) {\n    return -1;\n  }\n  return options.findIndex((option, i) => i > startIndex && !option.disabled);\n};\n\nconst findIndexBefore = (\n  options: CustomSelectOptionInterface[] = [],\n  endIndex: number = options.length,\n) => {\n  let result = -1;\n  if (endIndex <= 0) {\n    return result;\n  }\n  for (let i = endIndex - 1; i >= 0; i--) {\n    let option = options[i];\n\n    if (!option.disabled) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n};\n\nconst warn = warnOnce('CustomSelect');\n\nconst checkOptionsValueType = (options: CustomSelectOptionInterface[]) => {\n  if (new Set(options.map((item) => typeof item.value)).size > 1) {\n    warn(\n      'Некоторые значения ваших опций имеют разные типы. onChange всегда возвращает строковый тип.',\n      'error',\n    );\n  }\n};\n\nfunction defaultRenderOptionFn({ option, ...props }: CustomSelectOptionProps): React.ReactNode {\n  return <CustomSelectOption {...props} />;\n}\n\nconst handleOptionDown: MouseEventHandler = (e: React.MouseEvent<HTMLElement>) => {\n  e.preventDefault();\n};\n\nfunction findSelectedIndex(options: CustomSelectOptionInterface[], value: SelectValue) {\n  return (\n    options.findIndex((item) => {\n      value = typeof item.value === 'number' ? Number(value) : value;\n      return item.value === value;\n    }) ?? -1\n  );\n}\n\nconst filter = (\n  options: SelectProps['options'],\n  inputValue: string,\n  filterFn: SelectProps['filterFn'],\n) => {\n  return typeof filterFn === 'function'\n    ? options.filter((option) => filterFn(inputValue, option))\n    : options;\n};\n\nconst defaultOptions: CustomSelectOptionInterface[] = [];\n\ntype SelectValue = React.SelectHTMLAttributes<HTMLSelectElement>['value'];\n\nexport interface CustomSelectOptionInterface {\n  value: SelectValue;\n  label: React.ReactElement | string;\n  disabled?: boolean;\n  [index: string]: any;\n}\n\nexport interface SelectProps extends NativeSelectProps, FormFieldProps, TrackerOptionsProps {\n  /**\n   * Если `true`, то при клике на селект в нём появится текстовое поле для поиска по `options`. По умолчанию поиск\n   * производится по `option.label`.\n   */\n  searchable?: boolean;\n  /**\n   * Текст, который будет отображен, если приходит пустой `options`.\n   */\n  emptyText?: string;\n  /**\n   * > ⚠️ В v6 из возвращаемых типов будет удалён `CustomSelectOptionInterface[]`. Для кастомной фильтрации используйте\n   * > `filterFn`.\n   */\n  onInputChange?: (\n    e: React.ChangeEvent,\n    options: CustomSelectOptionInterface[],\n  ) => void | CustomSelectOptionInterface[];\n  options: CustomSelectOptionInterface[];\n  /**\n   * Функция для кастомной фильтрации. По умолчанию поиск производится по `option.label`.\n   */\n  filterFn?:\n    | false\n    | ((\n        value: string,\n        option: CustomSelectOptionInterface,\n        getOptionLabel?: (option: Partial<CustomSelectOptionInterface>) => string,\n      ) => boolean);\n  popupDirection?: 'top' | 'bottom';\n  /**\n   * Рендер-проп для кастомного рендера опции.\n   * В объекте аргумента приходят [свойства опции](https://vkcom.github.io/VKUI/#/CustomSelectOption?id=props)\n   */\n  renderOption?: (props: CustomSelectOptionProps) => React.ReactNode;\n  /**\n   * Рендер-проп для кастомного рендера содержимого дропдауна.\n   * В `defaultDropdownContent` содержится список опций в виде скроллящегося блока.\n   */\n  renderDropdown?: ({\n    defaultDropdownContent,\n  }: {\n    defaultDropdownContent: React.ReactNode;\n  }) => React.ReactNode;\n  /**\n   * Если `true`, то в дропдауне вместо списка опций рисуется спиннер. При переданных `renderDropdown` и `fetching: true`\n   * \"победит\" `renderDropdown`.\n   */\n  fetching?: boolean;\n  onClose?: VoidFunction;\n  onOpen?: VoidFunction;\n  icon?: React.ReactNode;\n  dropdownOffsetDistance?: number;\n  fixDropdownWidth?: boolean;\n  forceDropdownPortal?: boolean;\n  selectType?: SelectType;\n}\n\ntype MouseEventHandler = (event: React.MouseEvent<HTMLElement>) => void;\n\n/**\n * @see https://vkcom.github.io/VKUI/#/CustomSelect\n */\nexport function CustomSelect(props: SelectProps) {\n  const [opened, setOpened] = React.useState(false);\n  const {\n    before,\n    name,\n    className,\n    getRef,\n    getRootRef,\n    popupDirection,\n    style,\n    onChange,\n    children,\n    onInputChange: onInputChangeProp,\n    renderDropdown,\n    onOpen,\n    onClose,\n    fetching,\n    forceDropdownPortal,\n    selectType = 'default',\n    autoHideScrollbar,\n    autoHideScrollbarDelay,\n    searchable = false,\n    renderOption: renderOptionProp = defaultRenderOptionFn,\n    options: optionsProp = defaultOptions,\n    emptyText = 'Ничего не найдено',\n    filterFn = defaultFilterFn,\n    icon = <DropdownIcon opened={opened} />,\n    dropdownOffsetDistance = 0,\n    fixDropdownWidth = true,\n    ...restProps\n  } = props;\n\n  if (process.env.NODE_ENV === 'development') {\n    checkOptionsValueType(optionsProp);\n  }\n\n  const containerRef = React.useRef<HTMLLabelElement>(null);\n  const scrollBoxRef = React.useRef<HTMLDivElement | null>(null);\n  const selectElRef = React.useRef<HTMLSelectElement>(null);\n\n  const [focusedOptionIndex, setFocusedOptionIndex] = React.useState<number | undefined>(-1);\n  const [isControlledOutside, setIsControlledOutside] = React.useState(props.value !== undefined);\n  const [inputValue, setInputValue] = React.useState('');\n  const [nativeSelectValue, setNativeSelectValue] = React.useState(\n    props.value ?? props.defaultValue,\n  );\n  const [keyboardInput, setKeyboardInput] = React.useState('');\n  const [popperPlacement, setPopperPlacement] = React.useState<Placement | undefined>(undefined);\n  const [options, setOptions] = React.useState(optionsProp);\n  const [selectedOptionIndex, setSelectedOptionIndex] = React.useState<number | undefined>(\n    findSelectedIndex(optionsProp, props.value ?? props.defaultValue),\n  );\n\n  React.useEffect(() => {\n    setIsControlledOutside(props.value !== undefined);\n    setNativeSelectValue((nativeSelectValue) => props.value ?? nativeSelectValue);\n  }, [props.value]);\n\n  useIsomorphicLayoutEffect(() => {\n    if (nativeSelectValue !== undefined) {\n      const event = new Event('change', { bubbles: true });\n\n      selectElRef.current?.dispatchEvent(event);\n    }\n  }, [nativeSelectValue]);\n\n  const selected = React.useMemo(() => {\n    if (!options.length) {\n      return null;\n    }\n\n    return selectedOptionIndex !== undefined ? options[selectedOptionIndex] : undefined;\n  }, [options, selectedOptionIndex]);\n\n  const openedClassNames = React.useMemo(\n    () =>\n      classNames(\n        opened &&\n          dropdownOffsetDistance === 0 &&\n          (popperPlacement?.includes('top')\n            ? styles['CustomSelect--pop-up']\n            : styles['CustomSelect--pop-down']),\n      ),\n    [dropdownOffsetDistance, opened, popperPlacement],\n  );\n\n  const resetKeyboardInput = React.useCallback(() => {\n    setKeyboardInput('');\n  }, []);\n\n  const scrollToElement = React.useCallback((index: number, center = false) => {\n    const dropdown = scrollBoxRef.current;\n    const item = dropdown ? (dropdown.children[index] as HTMLElement) : null;\n\n    if (!item || !dropdown) {\n      return;\n    }\n\n    const dropdownHeight = dropdown.offsetHeight;\n    const scrollTop = dropdown.scrollTop;\n    const itemTop = item.offsetTop;\n    const itemHeight = item.offsetHeight;\n\n    if (center) {\n      dropdown.scrollTop = itemTop - dropdownHeight / 2 + itemHeight / 2;\n    } else if (itemTop + itemHeight > dropdownHeight + scrollTop) {\n      dropdown.scrollTop = itemTop - dropdownHeight + itemHeight;\n    } else if (itemTop < scrollTop) {\n      dropdown.scrollTop = itemTop;\n    }\n  }, []);\n\n  const isValidIndex = React.useCallback(\n    (index: number) => {\n      return index >= 0 && index < (options.length ?? 0);\n    },\n    [options.length],\n  );\n\n  const focusOptionByIndex = React.useCallback(\n    (index: number | undefined, scrollTo = true) => {\n      if (index === undefined || index < 0 || index > (options.length ?? 0) - 1) {\n        return;\n      }\n\n      const option = options[index];\n\n      if (option?.disabled) {\n        return;\n      }\n\n      if (scrollTo) {\n        scrollToElement(index);\n      }\n\n      // Это оптимизация, прежде всего, под `onMouseOver`\n      setFocusedOptionIndex((focusedOptionIndex) =>\n        focusedOptionIndex !== index ? index : focusedOptionIndex,\n      );\n    },\n    [options, scrollToElement],\n  );\n\n  const areOptionsShown = React.useCallback(() => {\n    return scrollBoxRef.current !== null;\n  }, []);\n\n  const setScrollBoxRef = React.useCallback(\n    (ref: HTMLDivElement | null) => {\n      scrollBoxRef.current = ref;\n\n      if (ref && selectedOptionIndex !== undefined && isValidIndex(selectedOptionIndex)) {\n        {\n          scrollToElement(selectedOptionIndex, true);\n        }\n      }\n    },\n    [isValidIndex, scrollToElement, selectedOptionIndex],\n  );\n\n  const onKeyboardInput = React.useCallback(\n    (key: string) => {\n      const fullInput = keyboardInput + key;\n\n      const optionIndex = options.findIndex((option) => {\n        return getTitleFromChildren(option.label).toLowerCase().includes(fullInput);\n      });\n\n      if (optionIndex !== undefined && optionIndex > -1) {\n        focusOptionByIndex(optionIndex);\n      }\n\n      setKeyboardInput(fullInput);\n    },\n    [focusOptionByIndex, keyboardInput, options],\n  );\n\n  /**\n   * Note: сбрасывать `options` через `setOptions(optionsProp)` не нужно.\n   *  Сброс происходит в одном из эффекте `updateOptionsAndSelectedOptionIndex()`.\n   */\n  const close = React.useCallback(() => {\n    resetKeyboardInput();\n\n    setInputValue('');\n    setOpened(false);\n    setFocusedOptionIndex(-1);\n    onClose?.();\n  }, [onClose, resetKeyboardInput]);\n\n  const selectFocused = React.useCallback(() => {\n    if (focusedOptionIndex !== undefined && isValidIndex(focusedOptionIndex)) {\n      const item = options[focusedOptionIndex];\n\n      setNativeSelectValue(item?.value);\n      close();\n    }\n  }, [close, focusedOptionIndex, isValidIndex, options]);\n\n  const open = React.useCallback(() => {\n    setOpened(true);\n    setFocusedOptionIndex(selectedOptionIndex);\n\n    if (typeof onOpen === 'function') {\n      onOpen();\n    }\n  }, [onOpen, selectedOptionIndex]);\n\n  const onBlur = React.useCallback(() => {\n    close();\n    const event = new Event('blur');\n    selectElRef.current?.dispatchEvent(event);\n  }, [close]);\n\n  const resetFocusedOption = React.useCallback(() => {\n    setFocusedOptionIndex(-1);\n  }, []);\n\n  const onFocus = React.useCallback(() => {\n    const event = new Event('focus');\n    selectElRef.current?.dispatchEvent(event);\n  }, []);\n\n  const onClick = React.useCallback(() => {\n    if (opened) {\n      close();\n    } else {\n      open();\n    }\n  }, [close, open, opened]);\n\n  const handleKeyUp = React.useMemo(() => debounce(resetKeyboardInput, 1000), [resetKeyboardInput]);\n\n  const focusOption = React.useCallback(\n    (type: 'next' | 'prev') => {\n      let index = focusedOptionIndex;\n\n      if (type === 'next') {\n        const nextIndex = findIndexAfter(options, index);\n        index = nextIndex === -1 ? findIndexAfter(options) : nextIndex; // Следующий за index или первый валидный до index\n      } else if (type === 'prev') {\n        const beforeIndex = findIndexBefore(options, index);\n        index = beforeIndex === -1 ? findIndexBefore(options) : beforeIndex; // Предшествующий index или последний валидный после index\n      }\n\n      focusOptionByIndex(index);\n    },\n    [focusOptionByIndex, focusedOptionIndex, options],\n  );\n\n  React.useEffect(\n    function updateOptionsAndSelectedOptionIndex() {\n      const value = props.value ?? nativeSelectValue ?? props.defaultValue;\n\n      const options =\n        searchable && inputValue !== undefined\n          ? filter(optionsProp, inputValue, filterFn)\n          : optionsProp;\n\n      setOptions(options);\n      setSelectedOptionIndex(findSelectedIndex(options, value));\n    },\n    [\n      filterFn,\n      inputValue,\n      nativeSelectValue,\n      optionsProp,\n      props.defaultValue,\n      props.value,\n      searchable,\n    ],\n  );\n\n  /**\n   * Нужен для правильного поведения обработчика onClick на select. Фильтрует клики, которые были сделаны по\n   * выпадающему списку.\n   */\n  const onLabelClick = React.useCallback((e: React.MouseEvent<HTMLLabelElement>) => {\n    if (scrollBoxRef.current?.contains(e.target as Node)) {\n      e.preventDefault();\n    }\n  }, []);\n\n  const onNativeSelectChange: React.ChangeEventHandler<HTMLSelectElement> = (e) => {\n    const newSelectedOptionIndex = findSelectedIndex(options, e.currentTarget.value);\n\n    if (selectedOptionIndex !== newSelectedOptionIndex) {\n      if (!isControlledOutside) {\n        setSelectedOptionIndex(newSelectedOptionIndex);\n      }\n      onChange?.(e);\n    }\n  };\n\n  const onInputKeyDown: React.KeyboardEventHandler<HTMLInputElement> = React.useCallback(\n    (event) => {\n      ['ArrowUp', 'ArrowDown', 'Escape', 'Enter'].includes(event.key) &&\n        areOptionsShown() &&\n        event.preventDefault();\n\n      switch (event.key) {\n        case 'ArrowUp':\n          areOptionsShown() && focusOption('prev');\n          break;\n        case 'ArrowDown':\n          areOptionsShown() && focusOption('next');\n          break;\n        case 'Escape':\n          close();\n          break;\n        case 'Enter':\n          areOptionsShown() && selectFocused();\n          break;\n      }\n    },\n    [areOptionsShown, close, focusOption, selectFocused],\n  );\n\n  const onInputChange: React.ChangeEventHandler<HTMLInputElement> = React.useCallback(\n    (e) => {\n      // TODO v6 удалить `onInputChangeProp`.\n      if (onInputChangeProp) {\n        const options = onInputChangeProp(e, optionsProp);\n        if (options) {\n          if (process.env.NODE_ENV === 'development') {\n            warn(\n              'Этот метод фильтрации устарел. Возвращаемое значение onInputChange будет ' +\n                'проигнорировано в v6.0.0. Для фильтрации обновляйте props.options самостоятельно или используйте свойство filterFn.',\n            );\n          }\n          setOptions(options);\n          setSelectedOptionIndex(findSelectedIndex(options, nativeSelectValue));\n        }\n      } else {\n        const options = filter(optionsProp, e.target.value, filterFn);\n        setOptions(options);\n        setSelectedOptionIndex(findSelectedIndex(options, nativeSelectValue));\n      }\n      setInputValue(e.target.value);\n    },\n    [filterFn, nativeSelectValue, onInputChangeProp, optionsProp],\n  );\n\n  const handleKeyDownSelect = React.useCallback(\n    (event: React.KeyboardEvent) => {\n      if (event.key.length === 1 && event.key !== ' ') {\n        onKeyboardInput(event.key);\n        return;\n      }\n\n      ['ArrowUp', 'ArrowDown', 'Escape', 'Enter'].includes(event.key) &&\n        areOptionsShown() &&\n        event.preventDefault();\n\n      switch (event.key) {\n        case 'ArrowUp':\n          if (opened) {\n            areOptionsShown() && focusOption('prev');\n          } else {\n            open();\n          }\n          break;\n        case 'ArrowDown':\n          if (opened) {\n            areOptionsShown() && focusOption('next');\n          } else {\n            open();\n          }\n          break;\n        case 'Escape':\n          close();\n          break;\n        case 'Enter':\n        case 'Spacebar':\n        case ' ':\n          if (opened) {\n            areOptionsShown() && selectFocused();\n          } else {\n            open();\n          }\n          break;\n      }\n    },\n    [areOptionsShown, close, focusOption, onKeyboardInput, open, opened, selectFocused],\n  );\n\n  const handleOptionClick = React.useCallback(\n    (e: React.MouseEvent<HTMLElement>) => {\n      const index = Array.prototype.indexOf.call(\n        e.currentTarget.parentNode?.children,\n        e.currentTarget,\n      );\n      const option = options[index];\n\n      if (option && !option.disabled) {\n        selectFocused();\n      }\n    },\n    [options, selectFocused],\n  );\n\n  const handleOptionHover = React.useCallback(\n    (e: React.MouseEvent<HTMLElement>) => {\n      focusOptionByIndex(\n        Array.prototype.indexOf.call(e.currentTarget.parentNode?.children, e.currentTarget),\n        false,\n      );\n    },\n    [focusOptionByIndex],\n  );\n\n  const renderOption = React.useCallback(\n    (option: CustomSelectOptionInterface, index: number) => {\n      const hovered = index === focusedOptionIndex;\n      const selected = index === selectedOptionIndex;\n\n      return (\n        <React.Fragment key={`${option.value}`}>\n          {renderOptionProp({\n            option,\n            hovered,\n            children: option.label,\n            selected,\n            disabled: option.disabled,\n            onClick: handleOptionClick,\n            onMouseDown: handleOptionDown,\n            // Используем `onMouseOver` вместо `onMouseEnter`.\n            // При параметре `searchable`, обновляется \"ребёнок\", из-за чего `onMouseEnter` не срабатывает в следующих кейсах:\n            //  1. До загрузки выпадающего списка, курсор мышки находится над произвольным элементом этого списка.\n            //     > Лечение: только увод курсора мыши и возвращении его обратно вызывает событие `onMouseEnter` на этот элемент.\n            //  2. Если это тач-устройство.\n            //     > Лечение: нужно нажать на какой-нибудь произвольный элемент списка, после чего `onMouseEnter` будет работать на соседние элементы,\n            //     но не на тот, на который нажали в первый раз.\n            // Более подробно по ссылке https://github.com/facebook/react/issues/13956#issuecomment-1082055744\n            onMouseOver: handleOptionHover,\n          })}\n        </React.Fragment>\n      );\n    },\n    [\n      focusedOptionIndex,\n      handleOptionClick,\n      handleOptionHover,\n      renderOptionProp,\n      selectedOptionIndex,\n    ],\n  );\n\n  const resolvedContent = React.useMemo(() => {\n    const defaultDropdownContent =\n      options?.length > 0 ? (\n        options.map(renderOption)\n      ) : (\n        <Footnote className={styles['CustomSelect__empty']}>{emptyText}</Footnote>\n      );\n\n    if (typeof renderDropdown === 'function') {\n      return renderDropdown({ defaultDropdownContent });\n    } else {\n      return defaultDropdownContent;\n    }\n  }, [emptyText, options, renderDropdown, renderOption]);\n\n  return (\n    <label\n      className={classNames(styles['CustomSelect'], className)}\n      style={style}\n      ref={multiRef(containerRef, getRootRef)}\n      onClick={onLabelClick}\n    >\n      {opened && searchable ? (\n        <Input\n          {...restProps}\n          autoFocus\n          onBlur={onBlur}\n          className={openedClassNames}\n          value={inputValue}\n          onKeyDown={onInputKeyDown}\n          onChange={onInputChange}\n          // TODO Ожидается, что клик поймает нативный select, но его перехватывает Input. К сожалению, это приводит к конфликтам типизации.\n          // TODO Нужно перестать пытаться превратить CustomSelect в select. Тогда эта проблема уйдёт.\n          // @ts-expect-error: TS2322 MouseEventHandler<HTMLSelectElement> !== MouseEventHandler<HTMLInputElement>\n          onClick={props.onClick}\n          before={before}\n          after={icon}\n          placeholder={restProps.placeholder}\n          mode={getFormFieldModeFromSelectType(selectType)}\n        />\n      ) : (\n        <SelectMimicry\n          {...restProps}\n          aria-hidden\n          onClick={onClick}\n          onKeyDown={handleKeyDownSelect}\n          onKeyUp={handleKeyUp}\n          onFocus={onFocus}\n          onBlur={onBlur}\n          className={openedClassNames}\n          after={icon}\n          selectType={selectType}\n        >\n          {selected?.label}\n        </SelectMimicry>\n      )}\n      <select\n        ref={selectElRef}\n        name={name}\n        onChange={onNativeSelectChange}\n        onBlur={props.onBlur}\n        onFocus={props.onFocus}\n        onClick={props.onClick}\n        value={nativeSelectValue}\n        aria-hidden\n        className={styles['CustomSelect__control']}\n      >\n        {optionsProp.map((item) => (\n          <option key={`${item.value}`} value={item.value} />\n        ))}\n      </select>\n      {opened && (\n        <CustomSelectDropdown\n          targetRef={containerRef}\n          placement={popupDirection}\n          scrollBoxRef={setScrollBoxRef}\n          onPlacementChange={setPopperPlacement}\n          onMouseLeave={resetFocusedOption}\n          fetching={fetching}\n          offsetDistance={dropdownOffsetDistance}\n          sameWidth={fixDropdownWidth}\n          forcePortal={forceDropdownPortal}\n          autoHideScrollbar={autoHideScrollbar}\n          autoHideScrollbarDelay={autoHideScrollbarDelay}\n          observableRefs={scrollBoxRef}\n        >\n          {resolvedContent}\n        </CustomSelectDropdown>\n      )}\n    </label>\n  );\n}\n"],"mappings":"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"}