{"version":3,"file":"CalendarDays.js","names":["React","isSameDay","isSameMonth","CalendarDay","getDaysNames","getWeeks","useConfigProvider","classNames","Footnote","useTodayDate","CalendarDays","viewDate","value","weekStartsOn","onDayChange","isDaySelected","isDayActive","isDaySelectionEnd","isDaySelectionStart","onDayEnter","onDayLeave","isDayHinted","isHintedDaySelectionStart","isHintedDaySelectionEnd","isDayFocused","isDayDisabled","size","showNeighboringMonth","dayProps","className","listenDayChangesForUpdate","props","locale","ref","useRef","now","weeks","useMemo","daysNames","handleDayChange","useCallback","date","current","focus","styles","map","dayName","week","i","day","sameMonth","toISOString"],"sources":["../../../../src/components/CalendarDays/CalendarDays.tsx"],"sourcesContent":["import * as React from 'react';\nimport { isSameDay, isSameMonth } from '../../lib/date';\nimport { CalendarDay, CalendarDayElementProps } from '../CalendarDay/CalendarDay';\nimport { getDaysNames, getWeeks } from '../../lib/calendar';\nimport { useConfigProvider } from '../ConfigProvider/ConfigProviderContext';\nimport { classNames } from '@vkontakte/vkjs';\nimport { Footnote } from '../Typography/Footnote/Footnote';\nimport { useTodayDate } from '../../hooks/useTodayDate';\nimport styles from './CalendarDays.module.css';\n\nexport interface CalendarDaysProps extends Omit<React.HTMLAttributes<HTMLDivElement>, 'onChange'> {\n  value?: Date | Array<Date | null>;\n  viewDate: Date;\n  weekStartsOn: 0 | 1 | 2 | 3 | 4 | 5 | 6;\n  showNeighboringMonth?: boolean;\n  size?: 's' | 'm';\n  dayProps?: CalendarDayElementProps;\n  listenDayChangesForUpdate?: boolean;\n  onDayChange(value: Date): void;\n  isDayDisabled(value: Date): boolean;\n  isDaySelectionStart(value: Date, dayOfWeek: number): boolean;\n  isDaySelectionEnd(value: Date, dayOfWeek: number): boolean;\n  isHintedDaySelectionStart?(value: Date, dayOfWeek: number): boolean;\n  isHintedDaySelectionEnd?(value: Date, dayOfWeek: number): boolean;\n  isDayActive(value: Date): boolean;\n  isDayHinted?(value: Date): boolean;\n  isDaySelected?(value: Date): boolean;\n  isDayFocused(value: Date): boolean;\n  onDayEnter?(value: Date): void;\n  onDayLeave?(value: Date): void;\n}\n\nexport const CalendarDays = ({\n  viewDate,\n  value,\n  weekStartsOn,\n  onDayChange,\n  isDaySelected,\n  isDayActive,\n  isDaySelectionEnd,\n  isDaySelectionStart,\n  onDayEnter,\n  onDayLeave,\n  isDayHinted,\n  isHintedDaySelectionStart,\n  isHintedDaySelectionEnd,\n  isDayFocused,\n  isDayDisabled,\n  size,\n  showNeighboringMonth = false,\n  dayProps,\n  className,\n  listenDayChangesForUpdate = false,\n  ...props\n}: CalendarDaysProps) => {\n  const { locale } = useConfigProvider();\n  const ref = React.useRef<HTMLDivElement>(null);\n  const now = useTodayDate(listenDayChangesForUpdate);\n\n  const weeks = React.useMemo(() => getWeeks(viewDate, weekStartsOn), [weekStartsOn, viewDate]);\n\n  const daysNames = React.useMemo(\n    () => getDaysNames(now, weekStartsOn, locale),\n    [locale, now, weekStartsOn],\n  );\n\n  const handleDayChange = React.useCallback(\n    (date: Date) => {\n      onDayChange(date);\n\n      ref.current?.focus();\n    },\n    [onDayChange],\n  );\n\n  return (\n    <div {...props} className={classNames(styles['CalendarDays'], className)} ref={ref}>\n      <div\n        className={classNames(\n          styles['CalendarDays__row'],\n          size && styles[`CalendarDays__row--size-${size}`],\n        )}\n      >\n        {daysNames.map((dayName) => (\n          <Footnote key={dayName} className={styles['CalendarDays__weekday']}>\n            {dayName}\n          </Footnote>\n        ))}\n      </div>\n\n      {weeks.map((week, i) => (\n        <div\n          className={classNames(\n            styles['CalendarDays__row'],\n            size && styles[`CalendarDays__row--size-${size}`],\n          )}\n          key={i}\n        >\n          {week.map((day, i) => {\n            const sameMonth = isSameMonth(day, viewDate);\n            return (\n              <CalendarDay\n                key={day.toISOString()}\n                day={day}\n                today={isSameDay(day, now)}\n                active={isDayActive(day)}\n                onChange={handleDayChange}\n                hidden={!showNeighboringMonth && !sameMonth}\n                disabled={isDayDisabled(day)}\n                selectionStart={isDaySelectionStart(day, i)}\n                selectionEnd={isDaySelectionEnd(day, i)}\n                hintedSelectionStart={isHintedDaySelectionStart?.(day, i)}\n                hintedSelectionEnd={isHintedDaySelectionEnd?.(day, i)}\n                selected={isDaySelected?.(day)}\n                focused={isDayFocused(day)}\n                onEnter={onDayEnter}\n                onLeave={onDayLeave}\n                hinted={isDayHinted?.(day)}\n                sameMonth={sameMonth}\n                size={size}\n                {...dayProps}\n              />\n            );\n          })}\n        </div>\n      ))}\n    </div>\n  );\n};\n"],"mappings":"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"}