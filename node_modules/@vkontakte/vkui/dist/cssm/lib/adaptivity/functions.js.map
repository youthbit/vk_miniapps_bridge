{"version":3,"file":"functions.js","names":["Platform","SizeType","ViewHeight","ViewWidth","getViewWidthByMediaQueries","mediaQueries","desktopPlus","matches","DESKTOP","tablet","TABLET","smallTablet","SMALL_TABLET","mobile","MOBILE","SMALL_MOBILE","getViewHeightByMediaQueries","mediumHeight","MEDIUM","mobileLandscapeHeight","SMALL","EXTRA_SMALL","getSizeX","viewWidth","COMPACT","REGULAR","getSizeY","viewHeight","hasPointer","tryToCheckIsDesktop","platform","IS_VKCOM_CRUTCH","VKCOM","undefined","widthIsLikeDesktop","otherParametersIsLikeDesktop"],"sources":["../../../../src/lib/adaptivity/functions.ts"],"sourcesContent":["import { type PlatformType, Platform } from '../platform';\nimport type { MediaQueries } from './types';\nimport { SizeType, ViewHeight, ViewWidth } from './constants';\n\nexport function getViewWidthByMediaQueries(mediaQueries: MediaQueries): ViewWidth {\n  /* eslint-disable no-restricted-properties */\n  if (mediaQueries.desktopPlus.matches) {\n    return ViewWidth.DESKTOP;\n  }\n  if (mediaQueries.tablet.matches) {\n    return ViewWidth.TABLET;\n  }\n  if (mediaQueries.smallTablet.matches) {\n    return ViewWidth.SMALL_TABLET;\n  }\n  if (mediaQueries.mobile.matches) {\n    return ViewWidth.MOBILE;\n  }\n  /* eslint-enable no-restricted-properties */\n  return ViewWidth.SMALL_MOBILE;\n}\n\nexport function getViewHeightByMediaQueries(mediaQueries: MediaQueries): ViewHeight {\n  /* eslint-disable no-restricted-properties */\n  if (mediaQueries.mediumHeight.matches) {\n    return ViewHeight.MEDIUM;\n  }\n  if (mediaQueries.mobileLandscapeHeight.matches) {\n    return ViewHeight.SMALL;\n  }\n  /* eslint-enable no-restricted-properties */\n  return ViewHeight.EXTRA_SMALL;\n}\n\nexport function getSizeX(viewWidth: ViewWidth): SizeType {\n  return viewWidth <= ViewWidth.MOBILE ? SizeType.COMPACT : SizeType.REGULAR;\n}\n\nexport function getSizeY(\n  viewWidth: ViewWidth,\n  viewHeight: ViewHeight,\n  hasPointer: boolean,\n): SizeType {\n  if ((viewWidth >= ViewWidth.SMALL_TABLET && hasPointer) || viewHeight <= ViewHeight.EXTRA_SMALL) {\n    return SizeType.COMPACT;\n  }\n  return SizeType.REGULAR;\n}\n\n/**\n * Проверка на Desktop.\n *\n * Функция гарантировано вернёт `boolean` или `null` в зависимости от условий.\n *\n * Возвращаем `null` в случае, если у нас недостаточно данных, чтобы определить платформу.\n *\n * ⚠️ При передаче Platform.VKCOM всегда будет возвращать `true`.\n */\nexport function tryToCheckIsDesktop(viewWidth: ViewWidth, viewHeight: ViewHeight, hasPointer: undefined | boolean, platform?: PlatformType): boolean; // prettier-ignore\nexport function tryToCheckIsDesktop(viewWidth: ViewWidth, viewHeight: undefined, hasPointer: boolean, platform?: PlatformType): boolean; // prettier-ignore\nexport function tryToCheckIsDesktop(viewWidth: undefined | ViewWidth, viewHeight: undefined, hasPointer: undefined, platform?: PlatformType): null; // prettier-ignore\nexport function tryToCheckIsDesktop(viewWidth: undefined, viewHeight: undefined | ViewHeight, hasPointer: undefined, platform?: PlatformType): null; // prettier-ignore\nexport function tryToCheckIsDesktop(viewWidth: undefined, viewHeight: undefined, hasPointer: undefined | boolean, platform?: PlatformType): null; // prettier-ignore\nexport function tryToCheckIsDesktop(viewWidth: undefined | ViewWidth, viewHeight: undefined | ViewHeight, hasPointer: undefined | boolean, platform?: PlatformType): null | boolean; // prettier-ignore\nexport function tryToCheckIsDesktop(\n  viewWidth: undefined | ViewWidth,\n  viewHeight: undefined | ViewHeight,\n  hasPointer: undefined | boolean,\n  platform?: PlatformType,\n): null | boolean {\n  // см. https://github.com/VKCOM/VKUI/pull/2473\n  const IS_VKCOM_CRUTCH = platform === Platform.VKCOM;\n\n  if (\n    ((viewWidth === undefined || hasPointer === undefined) &&\n      (viewWidth === undefined || viewHeight === undefined)) ||\n    (hasPointer === undefined && viewHeight === undefined)\n  ) {\n    return IS_VKCOM_CRUTCH ? true : null;\n  }\n\n  const widthIsLikeDesktop = viewWidth >= ViewWidth.SMALL_TABLET;\n  const otherParametersIsLikeDesktop =\n    hasPointer || (viewHeight !== undefined ? viewHeight >= ViewHeight.MEDIUM : false);\n\n  return (widthIsLikeDesktop && otherParametersIsLikeDesktop) || IS_VKCOM_CRUTCH;\n}\n"],"mappings":"AAAA,SAA4BA,QAAQ,QAAQ,aAAa;AAEzD,SAASC,QAAQ,EAAEC,UAAU,EAAEC,SAAS,QAAQ,aAAa;AAE7D,OAAO,SAASC,0BAA0B,CAACC,YAA0B,EAAa;EAChF;EACA,IAAIA,YAAY,CAACC,WAAW,CAACC,OAAO,EAAE;IACpC,OAAOJ,SAAS,CAACK,OAAO;EAC1B;EACA,IAAIH,YAAY,CAACI,MAAM,CAACF,OAAO,EAAE;IAC/B,OAAOJ,SAAS,CAACO,MAAM;EACzB;EACA,IAAIL,YAAY,CAACM,WAAW,CAACJ,OAAO,EAAE;IACpC,OAAOJ,SAAS,CAACS,YAAY;EAC/B;EACA,IAAIP,YAAY,CAACQ,MAAM,CAACN,OAAO,EAAE;IAC/B,OAAOJ,SAAS,CAACW,MAAM;EACzB;EACA;EACA,OAAOX,SAAS,CAACY,YAAY;AAC/B;AAEA,OAAO,SAASC,2BAA2B,CAACX,YAA0B,EAAc;EAClF;EACA,IAAIA,YAAY,CAACY,YAAY,CAACV,OAAO,EAAE;IACrC,OAAOL,UAAU,CAACgB,MAAM;EAC1B;EACA,IAAIb,YAAY,CAACc,qBAAqB,CAACZ,OAAO,EAAE;IAC9C,OAAOL,UAAU,CAACkB,KAAK;EACzB;EACA;EACA,OAAOlB,UAAU,CAACmB,WAAW;AAC/B;AAEA,OAAO,SAASC,QAAQ,CAACC,SAAoB,EAAY;EACvD,OAAOA,SAAS,IAAIpB,SAAS,CAACW,MAAM,GAAGb,QAAQ,CAACuB,OAAO,GAAGvB,QAAQ,CAACwB,OAAO;AAC5E;AAEA,OAAO,SAASC,QAAQ,CACtBH,SAAoB,EACpBI,UAAsB,EACtBC,UAAmB,EACT;EACV,IAAKL,SAAS,IAAIpB,SAAS,CAACS,YAAY,IAAIgB,UAAU,IAAKD,UAAU,IAAIzB,UAAU,CAACmB,WAAW,EAAE;IAC/F,OAAOpB,QAAQ,CAACuB,OAAO;EACzB;EACA,OAAOvB,QAAQ,CAACwB,OAAO;AACzB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAMqL;AACrL,OAAO,SAASI,mBAAmB,CACjCN,SAAgC,EAChCI,UAAkC,EAClCC,UAA+B,EAC/BE,QAAuB,EACP;EAChB;EACA,IAAMC,eAAe,GAAGD,QAAQ,KAAK9B,QAAQ,CAACgC,KAAK;EAEnD,IACG,CAACT,SAAS,KAAKU,SAAS,IAAIL,UAAU,KAAKK,SAAS,MAClDV,SAAS,KAAKU,SAAS,IAAIN,UAAU,KAAKM,SAAS,CAAC,IACtDL,UAAU,KAAKK,SAAS,IAAIN,UAAU,KAAKM,SAAU,EACtD;IACA,OAAOF,eAAe,GAAG,IAAI,GAAG,IAAI;EACtC;EAEA,IAAMG,kBAAkB,GAAGX,SAAS,IAAIpB,SAAS,CAACS,YAAY;EAC9D,IAAMuB,4BAA4B,GAChCP,UAAU,KAAKD,UAAU,KAAKM,SAAS,GAAGN,UAAU,IAAIzB,UAAU,CAACgB,MAAM,GAAG,KAAK,CAAC;EAEpF,OAAQgB,kBAAkB,IAAIC,4BAA4B,IAAKJ,eAAe;AAChF"}