{"version":3,"file":"useTimeout.js","names":["React","useIsomorphicLayoutEffect","canUseDOM","useTimeout","cb","duration","options","useRef","current","timeout","clear","useCallback","clearTimeout","set","setTimeout"],"sources":["../../../src/hooks/useTimeout.ts"],"sourcesContent":["import * as React from 'react';\nimport { useIsomorphicLayoutEffect } from '../lib/useIsomorphicLayoutEffect';\nimport { canUseDOM } from '../lib/dom';\n\nexport function useTimeout(cb: () => any, duration: number) {\n  const options = React.useRef({ cb, duration });\n  useIsomorphicLayoutEffect(() => {\n    options.current.cb = cb;\n    options.current.duration = duration;\n  }, [cb, duration]);\n\n  const timeout = React.useRef<ReturnType<typeof setTimeout>>();\n  const clear = React.useCallback(() => {\n    if (canUseDOM && timeout?.current) {\n      clearTimeout(timeout.current);\n    }\n  }, []);\n  const set = React.useCallback(\n    (duration = options.current.duration) => {\n      clear();\n      if (canUseDOM) {\n        timeout.current = setTimeout(() => {\n          const { cb } = options.current;\n          typeof cb === 'function' && cb();\n        }, duration);\n      }\n    },\n    [clear],\n  );\n  useIsomorphicLayoutEffect(() => clear, []);\n\n  return { set, clear };\n}\n"],"mappings":"AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SAASC,yBAAyB,QAAQ,kCAAkC;AAC5E,SAASC,SAAS,QAAQ,YAAY;AAEtC,OAAO,SAASC,UAAU,CAACC,EAAa,EAAEC,QAAgB,EAAE;EAC1D,IAAMC,OAAO,GAAGN,KAAK,CAACO,MAAM,CAAC;IAAEH,EAAE,EAAFA,EAAE;IAAEC,QAAQ,EAARA;EAAS,CAAC,CAAC;EAC9CJ,yBAAyB,CAAC,YAAM;IAC9BK,OAAO,CAACE,OAAO,CAACJ,EAAE,GAAGA,EAAE;IACvBE,OAAO,CAACE,OAAO,CAACH,QAAQ,GAAGA,QAAQ;EACrC,CAAC,EAAE,CAACD,EAAE,EAAEC,QAAQ,CAAC,CAAC;EAElB,IAAMI,OAAO,GAAGT,KAAK,CAACO,MAAM,EAAiC;EAC7D,IAAMG,KAAK,GAAGV,KAAK,CAACW,WAAW,CAAC,YAAM;IACpC,IAAIT,SAAS,IAAIO,OAAO,aAAPA,OAAO,eAAPA,OAAO,CAAED,OAAO,EAAE;MACjCI,YAAY,CAACH,OAAO,CAACD,OAAO,CAAC;IAC/B;EACF,CAAC,EAAE,EAAE,CAAC;EACN,IAAMK,GAAG,GAAGb,KAAK,CAACW,WAAW,CAC3B,YAAyC;IAAA,IAAxCN,QAAQ,uEAAGC,OAAO,CAACE,OAAO,CAACH,QAAQ;IAClCK,KAAK,EAAE;IACP,IAAIR,SAAS,EAAE;MACbO,OAAO,CAACD,OAAO,GAAGM,UAAU,CAAC,YAAM;QACjC,IAAQV,EAAE,GAAKE,OAAO,CAACE,OAAO,CAAtBJ,EAAE;QACV,OAAOA,EAAE,KAAK,UAAU,IAAIA,EAAE,EAAE;MAClC,CAAC,EAAEC,QAAQ,CAAC;IACd;EACF,CAAC,EACD,CAACK,KAAK,CAAC,CACR;EACDT,yBAAyB,CAAC;IAAA,OAAMS,KAAK;EAAA,GAAE,EAAE,CAAC;EAE1C,OAAO;IAAEG,GAAG,EAAHA,GAAG;IAAEH,KAAK,EAALA;EAAM,CAAC;AACvB"}